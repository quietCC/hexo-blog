<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Zookeeper源码分析</title>
      <link href="/2021/05/12/Zookeeper%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"/>
      <url>/2021/05/12/Zookeeper%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="dc58f264b32afcb14da68e61f531a80faafbabf7e7ddc0a598cf4af91517d544">d3e6c873a0c2a163e561e7b8a7ba8ea923b01beaafcf2038f30aec25ad1c510f8716600d9900390e1e1eb2223432d9782da7f751d2c8f1970b6f285f1fa1d272c9b5041d59db57ba6407f38abbb4ce04ee1305c376109c5aa252b539d64d3c798cf12d6ef000a15f15c71e91f9f247d1d085326ab62808429e92dba97b1ae8caec3498ebc7f4a8c2276d1ccf4b40f7cf0c897fb854e8e7c96b4b92dd75ec9b804e475173fce9764eefd5595c16b4851ea02d0ea87b721748be059dc0066da73139507766f7688f1c51264b9dee25742d309e7e519697ac79675f0d0cfffecf174aa5a450ad33a86c9dd1ff31cce5cfcfed5917ae3edc01aca117d4caf4ab0d7588458fea9af1ee12c37b748498929055e925c5df94cf68be0f8610f4862d5e3f19c199d5eafcad1f4ec8bb82e06d423a7f6705bbf0de986a122fe5646767044a91a2fc7ce1e795bc729e72f70d49b5c0f870c07d196826d7bcdf605a9c1ba8f6e55a3709d4bd2080f19dcb151214138b17b49602de85213384454a7a07c16ba793535a009a12db686b7c538af06ee1248bebeaca0fd19a3436e2c57a1ce2276ef09af84d27ef5608cdda3b7845cd7ba4401f709ccda6184893b0caf480e45a4a9691c370beabca8de7104b6e6769c02564dc8b1791b23a8fdb62195819289ba01fb4650068042b48961c4024cc811af9d7755bb95c282623f3a59c713b4c4f5aaac4d94c14abab2396c196443523c9a7bcd23471f02d3e42369120ee2ed730f16fb832ba201b481dca35217c101fae45c960d721b03baef737b3ca1d18623313bc6d21799322061095837cb9f2eebdf74267f1b11d0a8721b5511e595b757888617b73a254ddd0e7cd763bb89ae85d27852ae099f148205d61926a6023d04b321e96ac8ccdff70c68fc5c77463a65472bb00b7800de66d09a46a88bb6ae166ce7a72e45e474304526b2c1a0ac0f2397e803c4da673670913e99d2305a6cadfad69e37b740181864c435afdd992f2cf05145cf2677181057f73cd57f0293b4afac1f85bd58ec4a777efb8f317c97de671e76d0628983da2f5b973d72bce548c928fbff148a2176ab216ef2d81b3322195f9b034806eb75537ec7a1ca858e547103941216bba6db0d22827a3d4351893e14d71c9c4019a506732167eef638d0a3c817324d6dac2eb1951a524900aa6f94ab360eb10dcf77e68b32876e8ac756afb22b6e2ff24b3e222ca4b8ec78e86926af4485f88ab3ccacfe09b8270b206faa354d1a3e3afdf3a87d8a85801631e5ef9e082f5ce0374a1ec65d7ffd267610919687229d07805a40f24435cde9e4fb8f8aa2119da10d8dde1a3c8870d86dc4e1b0a075c6cf210ba53820291f420ae329d9dc359bc652ddfa92a2f9b390b2d98aa88bff50ea399b628937948278484f390aa4266d805ab7c2a290ab2af8287498b59062ccd1977d532dc83552174807c5ccf49996218d154d8f10692ec3f5083b643f795e1dcd14dc332cc8db8b0df5d9fe15cb18cc6410cb007bfc767d7e453c91f5033df5cc17d8c005553741f7429b812b4e2f18ce6bf160b5f5e097daa91d351c8a4d2663cae97d6517ed31a60043e3459b9b5727ec3e445cd9629a699f3b363e02f67f976003925179f67d91a8153fb13cf1989161a3a3f68d56e2e699f069740178170f470c50bc8d605a8deb570d17ba402eb54a33f8131887cc2c112543140f79aab67c9087759090766bef5a098355df2b6c7a7af2c00100cbfca8222ed55853d68f496595480cea15bdabfa52abb73af0ff7f49fcf9d899e4b2c15114c8f8cc8ac5b5873ec24399cd9cb3c32b1b6254c7236050826d81f226f5c6a55a1468523b53b9f8e06049d174e197fa4a2c0f53e36abade417d56af9b7ded9eb70640cb3735d346e6168c86868a26e514d6f1a7d0ff19e2b6faf0c2f4b6951a7045361a50cba5a058ab2d627fee0090675d58f4636527beb19b8a57236054839c18dade9226ad435459497e00e6d53caa3ef9871473cb07474c30b29afbadff1cfa381361c717427ed364bd0afe3ae00d3387c8ed340deb94b1eeb2f0e051c0e8bcf0a4a095d044a405b8933462e3c84247a49d4873931f11cf89f020cbdeac5d4473f20adb4981dc76cb1aa1b8186d1b9c8a979e433cbb3deaae3949afd83e586074ec8f76335b1dcd9ac587f216eed77522fdba824e4637aa0094950e0e829451773119843fd589aab5757d3f171d072c0a805eb68bafff87b0aaa9053d0efbe3924facbec776b8175571e8a578b38f8118ec5644b1c6006362a35b51792626243fcb9909eb2922c28db65d161aba3d98b53a95495909557370fe9a2d0e3b560d1281b4485930e46cca5e57f345c17f8cc1929231f732bebec75a13da93928f2376e502e0844c4254599493a994c48bb71d305944aa55f9ce4478ae5ed86761a6c624ab9da73cf2e3977b3e9f581d7fb473f0d5262d71d9cb78bf17d40fd6a6b163ff8e7469005b38b6fd139ba8448637e99cd0bfe55b3d970b22eea7f83c260205a1297fa5f5f2216f2e724bb57d27c99f39ce737a49671d355477c19f985e0df481d8d9124384f03d16337619ee7605cc2cf679275952d2afb88cba4690a43bed72b55e5a9eb49a33574d30b091b519afda4ffdc9057b20bc2979aca538d54b6b1062c735f007b775025febc7a6dba6656f339f97d492ee6fc6ccb2f580edea751df9bd62fc44434f95d619c1e032557913748b3e78b534c36b80f189f47ccb72a9e27beefac78deef2469377b0702a179fe2f6866196459d63403b2033c7ee0258466e9a430821a794ca77858f15c07f2ea45e72fd6f5b441254ac78c4654d9d7247fa39369b9f5c393367cd018c77501b739be11091b0d77ea7e1b1bf6940af425cafa32defc41abf6b7667aeaad06cb5a7fb4435806b5330571dfdbbc3485a4303470845b1901f84c5650ffe0c1dfde2b100dbc86f1c7d0254ae80deab305a2f9d2979125e386616c825a9254dce1be5be069df7d6146f9c98bdfa24de52af18ca0b770020380a751400ba233a77e2d1ef097dfa6a40006087062cde286929b82c48026ab23c670fb8481c327a41e9944ebe06a686c55591f13806b13b85419fd0356c8ccbe1b42d4d3db7da731f953c9594305e05b7990377c9bcfbc6a603c242171ddebb37f4aeb70ac332aa5ad1991ed2fabb2967e3ac1d3081a9a4be55eb2c1a954e861cfe290e244d8399c5f9db7fff50e35bef655fbc18b1fe3adba1b333c0f5d2ef289c68180a90df3e2e592400c743d5d63d0c07358bf9294084723e7c2ef9584f21e38b129a799dba3b77604f45b4c4e83b3d1b0c3743e9d1c15925c122c863a168c5e547ec0d83238aa9a003ed28bbedfcd8a3fd94cf87bb4a7895342b2a732423b26ef0c5cedceb5f84d83fe4a46c261d04ac04d7987a4ee42b394467aaf4333a75f36fe02808e5c35571a0f0810aa19c99d58955018e787ddeb97849e4399cba5654f80ee059b5a30366ad7d0c07c08334ffaa14774c850cadb1f19a8b8a732509ba823d3992cb9f8f461e93460f1bdbdc9c7c7891700be25db1d8ef40293e0a86b5bede398be8efb45cdf884817d5021ae8e77f44092f596edff762d6e46450a6a989d188b66b889c577711913270429ba8a48919b334d83a45f0bc07d33fe4b7896b582bdf225f9422d9b48170651b5435dbea4e891c5e3b3c50bf5111768003933675b1b417a7e0f4728f9129a1f577597ef33f62c3c540e9bde95d9d2b620762165b23f77dfe1fc5fa2ac66c8d41eb9bdeb9cf8ab4714f567267a4b27f77e0b652fdf1089c5635c3b7cb6bb5a4648824925bb50d521d71d69e445eb99ee7c4834b42b14c849f12bd1a919fdb7a51c230427f95dca2dd11b4b29e5aa29d18cb33e1c443080183804ac56f087e5436c6118d3ae1981637d2978b13c42a21a03c18a690b12176411fa361de58319b15bb2f873bf8170b4f414beaa308265a59f7bfda792a6b5d05dc8dab4edfd6ab105afc12d27994795648de2ab616f8dfc862c3c2f79e425c3477856e8108a4bc9929459acccf6207e7452361b1ae3ec1a53de43cd921aada12d43466365f1b7541ea4ce195e087b3bfd8bbb86452b444c71da5cb7976fbd9219192147153c3e06b8549103b70281acf330a119bb0c401470cccf069abe9ececfaa64a122fd214456eb1a98a1e4e26616773311967f89a5e308320b2ef19f69929a77935a6be89eb51c0b42ec2e9b15e1ac1de97422c9b23915665f7c2d6232657e381748807814988b432191daf20d559ebb1734bd80da68870ea6edb8789695acb0689a04f5ebd5d356118680e80711a87f96c93b5920d30c9dec454f896a01835c67f9edd6ad015883965bf7f6b22bf274f055a59f5edeaf19071a6a8e4c808228b7f52c952daf235414d800f02a77830ad4afa84723483568b5940a20ffddf808b78f43ecaee34a575646049a0824396aa7f770ea489ebd40698bd0b2521fb2e72bad0c90486b47a6b310798944b798661edbc3b61892a68c00cd688d4f00d05919850ee2a30f99a64af90cb153d4559b33b7ba38c1805c82c6a5e9323bfb30c698656f720a73fd832708ab886b53343c18fe88b420499c9075ee2521143ca01147ad2da6d11569765956d8b655c75ecc7e44ff829f96cdf538acc7abb8810e9c7289d7ff2c3e723ad9b13ae8b3a2ac0b5b6f890902d3a58052dbb2be48ad6d58879c7f99f223d190a5f00aa52f615560597c35dbe0969c0be71d23e6ac6e6d7868494c3b70d7c5d65409ca713a7f9e1e8a3e0334bac3c3138569d4f65640fee79c88b244aa88b60ce8992b259c37a022e4f5a0c1abbbde8ecefdb2b51fe9fde3b399c32f8a20dbf38d30d9859d88bc7d100e4bcbb8cb267a031156e2bae2fff0323010d94bcecd82dca0015b94276ada1a48ca88138e990ca34dd07235044c5a9e7a8328c1bc87bb09e1f5db3453d5abd12f442adddd4285891e947777e82b4e649c4ba89f09595eaad0760a53d93369266ec2287ffa36dbd29aba659552619795ccd02f1a21030175ec93f5b14a1f90ac2c75bcf8b3f092a1a306b2606ffa1f9b5769e8cd1bcce173074107426831cc3ea583a9eef8d4d0954f8f71d2e38cbedb230e018183b97ec7d8b44338bf87a7fdb009053a78613ace6cac4eb9298d3e57b00d7c9a4d3940e94794bae65e6dd981d7925211a4050d06b341403a805964df3fef7c41875a6adefddd2adfdd8e3ee3d27c289179c1bdea8b34017854bd2cde7d32d40ac8d54858309870f47b03cebaf39fbada08fcd6c028dd1ca35382d2928f00bd743261359f9109d5adfe708541b4006e44f03d7e22139bb476faaa60a44af12b477d6bcf30b670b5199c0416c2762a474076e17f3e70473f522a98ede2762a7903bbda99ef90f9a830987ed74f9d6fe7ff14f2a79044c67a4891cc269f93e18bc03bf79ec6e4f4df9d5f64ce12066fde1f467e460e7717bb4340e13cb179a2cc615cf6e6ad64fafef64abb37a5dbeb0cd4f5ec45e6d05d55435e2e078376b84c3248104ebc6d2a17e78853978065cbbd993c92c0aa5aae0cff1d75713e1a27e9ed26be775a9f908e41dbe33efb6d459140cfc18f67f2f1b071b667bb1142b508eed677c2236de9590adf4f7a008a84790b4393764b7a20518b2a0f65376e214880c018a80b90ff9cb7e9f5ed9b6feb4f73ca48b39ab4dddc8545e3ee14dde982b7f3596463458927a7bc9d3f8eca560b20513742bd398c31374df5864076d66cc97c906083f8eaeaf5561e3d48562b493800569f98f5e98715284bdefc688b41b46388670be3926c72bdea83e6792283eda77ab9cbb63e53dae2003a1cb412a88afbd2a354fa0fd5ce337fdafca4932fa34282c0fbc9d760d7c1d276e261f793bfa22ded2df1f10f950f801a2cf763d587adbe6b5492ed8f96eb6f4c6998f88f6992965917698e98a0a51e360442b88fe8040ea98b821f609ec13dc50a7dba2383458315f590d9c84d81fe3db3d086c2c8c6935383a6106f9884021b302c71b8ac09b0e84f3875e5fcf1bd30d56f624b089ccca80371dc7cbf065e222d23bcd08b7c013ef7fed143c5ba1e210e87f574b5457a16d723df9f8d020a0622f4cebfece8af70050c86f21ff6fc40860a73d88225c229304cfadc3c8d463cde6fe32e95ffe59db019bf70b281fabc2a71d4e77254a99f2e31cef3ac7cf16a23b40b0d7d4d19cb2b5ce2b90eea37c96584317240a3929c9821ff54d3d6d68fa3dd9a78dd673c1e2b45b62e509c95c3bed826994c1db9e1800caa6566693cf584759d67d726c31f35bebe1c2577a41d11e46f0664d0b271775875099af990dfa4d4da6ddd714b4e29a22225691274b5aea7014b7eb39dba1dcaf785f0de6e1bf88166d490f3cc4847d470ca92a00a7bf8efeff4a2869787643d0c955645c6f5f90138be88a27f68b2d03226d035a45910db93ac0656e92b273394fa1b7fef35a6bf9057b9172dcc4442918c5fc2ae9aea813f2779fb8ce17767c8d81f8808c049e1c15a81dac8855dd35df7ee179347815a9c86d0877a88e25fdd46c4720db4ffb285c90cc88652b583bda06a08898b11c62ffe536388c27cbdb794135362302ffcb3a289c2c9ac1c59ef53defb464368b38bcbbbeaf3fe28a108f7ee675abaad7066cf3341d3cc0581918221f0345bc32adae2244c6602dd1aa00c3ba9136ced6baf10af599d85080cbf97a4d552c245b44ebc807a1cb6fc219d8e2445835c811506039786c5623b83e1a74307c0e3274d7eb641749fda304ea398765610cd42bdd9c25565348cd4310bc3264eb8f7e34e97dbb977e3a2130ec391e94fb70626690c15391f61ab089808118841805d7fb763f0bd0c30332e356213c951f6cae378c200ba58b2d24907173b7ab8b3da04a452bb7b57a16b7f510c9f647dbea6f16ec63d0b9af7fede5edb43787b6520c8e17e8f69b6708d8115774f21131b52d1ee52e1bc510c07cd0413a85b43d12ae59be60bb592df9da76e438ad31a7707bf8f5e06c6b7ae6bd2e13bd4c885a90fb5f8aeafcfc979670a7e214f3c5a49e2142976079b2c59fb5980aa395c79d0395a039cbbb260d175abea68ebd089e9019a0f7a272be41b24ccbb6a99d5ede028abf6705819563d6f28c42735c7ac28207bf6fe5c6deae1bb55276525d818fdc1cd1284e1d67694837369d6427c0a8e2c5f3328c23489d89ec912c5252b8bea0d5344614315baa017fe52005a6114adb54a5ecdba485de41f902058b6b46dbacd8a9323a9394b44ad02ee8c4443b439df5c4d5fc4774d325f5e946c9038388b65ea71ee508f6bc7bab7e75e20fe0f403827931be040ee519fd7e5e0950ec31ff93aabea4533404c3b9b81ee99b9a36beef1ef1142286fcd0beb87aea80572517f774af8adcea52fbc5d33e81a3dc5c237ecab2da57f58813b3839e62a0d3012f82dbe9edcec99af84d01ea27ffc72589619ba27d765245a6016792518d3a6c39fbb6922ea3a5eacf8449740766cbe2021e998462760d1a9646c10cf572ee88955e4baf676ffb04dc89acc123fc6a5f1f894351811c31a53c9b28837afd3e5d8ece1480a38dcb506bd186c116db60334d78193f461a6fd933daf1157ead1e5509827a35520f48a2fa2b214c9e02c1df0bc49982e723a17549bef0b711e19bfb9b07dec1887f961d829f129c161319e868c4043223c54a58bacb97a7b746e0948360c4775fa5955ee38c00faca42696f96dc5326d46a23c38296247d29ab84d6c9a6e198a78b64ea7ca02ad23bcb2bcfa2eb8e0fd68a6b80a5302832a0b0762979f757049c9fa4fa25b6c99879d7f8113f976953afc6b7e70b19ff28338a04e35c780d5e63a5ba76db2ad263666f2c37538402a206ef07dff584da8d9e628a4e5957b5bc69bb4483ff9a45035d9cf7d6ca445979204eb8bddd003cc454230edbc68d68a462bab50ee6a88eebc8a41e48e32e46dfd0fe794f69684f30802360ec779133a89e67cea26547a84d6a21f482fbee9f57ce56caae7957feb22a0684ccea1dabc0e45372fcd94816d16159fd1cad857536ad4ea9e54d1c253d896cebe198c4fa69b63fe8b8fe7919873730bfcef9bbbb47c683061c2d6c40002f6a5511bd2c6000b0e40e909edb4e31548e6cf869628ea8f6e33fd738096d9a1a8a4cc6612881874d3a02c216a1d653359ad678383ee0409e4c8f6276fb7868a1842653364aebb6996ef145dbca5bf4a45132a5a3c3fc329c0f4f2f783c94d2087ffdf5e6d9c9cf5e5e944e467b1db29f0d1a2aee52e216ee94fdba793715ee4cf42bf03b932b9206a04136b9918c3275f2965f3a202c3a8bd9757a96bd8c12a4085eba3271930932fd122757c509ff20151d183ca255798689b2dbaf66c763f79a7c77084f26c9d0133697ff999b5244b8663752751cdf92166e43d0b580557d100a3974329d2bd47cd742f671bf6a61d39b85cebe3a0d99d8bc9d7d23143eb735ae63387d4349407d355d8860162bbb4ffbb9572ebb581a4167a98322750958d65362d6ce294720cfc4782c051ab40492f567d8408c33304468fb6846e51a932e4760a41c3cc53deb24b6e8af4570780d69bfa74af167880811c37c673c592de32024432b9c0aa18f599b5eabeb1bf30482239e4be973d7272b2293ffd3235ee57802f1dd6646f521ecc98e74af1d2e14016d6d154fe14513f3324aae33e47882c5dda29e954dab7f7af964cb2318546a012e334f1aba7797f33ea6d4aedf42987a6706860b93d96ff482f3445f1691b400d8eddeca2c0f99bff60f74844a232d5e44f1604b47a1ad383e6d92674c63168e5bc75eb2b1c8417a962e1ec40b3ca3d50cdbd9f44257efcd837954e1c70e94b87f5fdfa7b0454335d64dfc22a77a3aed6965b5542656fb74d1f8c60451dbb6b94547c50c6c325dbd23b1b550ed8799e891c38e97f0ee75e355964db7021a9ee1892c899ac3fbe67ce599eb001c0faa57e2e0c508de4ac0190a0efd0f8fd84d25bb3f6c43df50a50b4c8f10c9931250fefc3481472475501835ccf5d73327ac39deedb5f0e4e6b778507225df2f304b5fec38041e8df1f4dad1d74c1bc3108086ded0bd6722c81acc0ba4f549b537c0a444ea17e4631c4679d1494b339eb2667073aa41c018e41e30ab4b735ba67901ee06c1eab7aefb1d5d22eed79764d65ef15d7c4b0a0033f69d841ed36a6ae54a0fbbd8c459650669c212c5d8ffc1437e5af4ea49c76de773337ccbddda29ae55c2c65571299411595887bdc8d1ad3f274e0f5655164fe544bacab7ab83658889871dee3692747e056a81b416ff8dda60e2604aa0a2e2d95c85c91f39c26e07020ef417b0834806580eb7d8086badcf9773d5eb03c58bdf72e1031a28667b183e930e1357b8fac2244a8baf6edd9992fcd4b3f38ac0766eb3ac6008dff7faf5e191185ed2a557ded31e1afa0b31a52ceeef48a92838709e5963a45b59cf8d8735ec471d4eb9d99ccaf20cf93ee1ace48b6dde7b4bad2868fa112348bb24c4fc5c80db4cbf0b3f1f51064cd3963427d1919cfd55ad8e4a9439ca375aa4c6e1b4824030ea1634e343fb0bdf6332c734453d60722e2abc715ebae2b06c026461cf7666ad7e06ee1d93603139ff6a8b1c59edc3e436453c4ad241619002ac6052115197ff27611ef3d116fc911ff37a3fbdfd00847e1ab442883f356eb78bd07bbad9fa759cbda15b2d0139720ea3cdc571ecd768642ef46a80ab37d53813ab6bd057c0c1bbf7997e46fd24cd20c61514833ffc5ab9c6306e894f4e39bcd76561643e30adc50a5fb999d31179d261324628fec31a24a9a1f3b78a3ecbb6f84deb5b18e0b1a93e5c482ba94715593312415df8161e4ba27550212cba8532523a9b9614b59981386351a24ff094725ba187acf653c922a4cd09d1fa412bb98bd6b9439b11bfd93bda9469a4d85034d6b0fac3e30a4d6c92a80006b9a1bcf893edf6666fa2c4cd3085f13cdba546ff60b69afcea093305a1b61a7a79846852579580613c412913e8592135a683d17e86cda6f5beea1f2f2f4c44d2223711832ed7a290640eef3bbc947af2ac7e68598ed54d39158a4df324a7feea70edf0d59fce117eebaaebe1a975b7d8cd9469f9adb087bf97521c38d393fc8cdad8a301dd308bc87a443dca1ae91a99216ca8199340d7d66216cd57158625b7b06e375e1b24fa73138e5a10209010e98c0f77d1d4c7099d823f8d0fd345cd131e7c2f2205e7fec5c924947c639487d36ab5784f0e7dc5a8d7095bea97f614740870ac063b53a85155cdd59483f5f08d882abdddade0956800e1dacbc1eb0f091c1c27426a835bf21cedfc155d9e72e20fe40e4dbb7e2a1c4d8012b25f3628577b0c59e537712099db7697be6e01f39972b5f6b8a96f4586309465befba437e7d1ff7dd4b70329fc8609d3dfedd0cdc2391d032aea8656c4752bc61abe20447f057fc6198f29c37b3d8700e1912a1d5074b1ed48bb2ac162fa0e3eaf80da84a49eb9941914f2203fdff09f64e0d0c7ad9d386ac47a07fb5917514f91bc289e04fc8253fb4936b9b5d02ef9c2140137f17275260fdb56ad9541515c5c82e6894518d1d2cf0cfb6a85e3b7468cd43f526863d6cc697cebade808fe35a2fd9ae0dd7449c040cc5b20331b5b10935d163f1a43d06ce6f21f7e79fc6336b5a3c470a205376484c652337233eebfbd57ad52b136630fb878d33e3bf13ef829314cabf25a07777b40db6949108f649a21c6e9f9d352f0c0b5fe86cc88e68c6c310b84568ee89dcda25b66b87fb7a91abdc4501a58e8beda6dae7929348d2dd39fa7bf47ad9eb345c8e186518c1ee8865abc27278d5ae16fffe7b5700b12ab99d8f04b7b330a2f316b5cee0f81e2c55ae06d844e40e87720d0733bad70cd31e9e3469f1bd42d06ee32b8d3ef07a18acb28c35d32f5e26c3edfd9ddebb84f89fddbaa18ef5c546c277e0ffbb69ddcaa8f5fe6066bdb88de313313da6925cfdd1c17f0badbf7d0fbf53a5edd00e738e0d3b759d1d94d0b5c7c0551b3e9069e7bea05df88964d217de44f24fedfddb7938f981bc861f4cd97bada4af20a1dc2bd28033986c4d28a53c5e437d69364ca65d3bb84c45c4a3cd8e1bb1d4bdfd389cc3f8fed4f7c666450046bd36d1ad94c20f731f48a66840e64d813d844989f11a31f13b728dc08305370feee902871ec53210fd1df83239fde5238dc44e47b78515a1551910b5286a83db3e90686c7543f9cd9de6d160d3f68d3ed6d0f7b9be7e61112c1f885f34317caeb022c27f14a9e9cfc807f4d808f7e20eabdef0d4f4409443c161ea4d666472a3be6512fafcc80d986d56fe160781e71a2050e378df41795455098176d76a25799869ca8c2622b9a4be14bf5e360454b1f1a7f4f0b1a914dcb570865116957d06d0a5046a1b9bb00fe4343b06eaf1399689a34dc5364f47f1cf38b4b229726e10230943b770afce6f8e342511307818908872c31522f7e86e0780462893ee94496413effaffa70f5d21d0d9e719085f30c22270534432b634db3b980206f1c21cf49343c61451029eb9266cbe5363a0c54d31dc81c08b906663334a21ce3a80e6c6e041693281390c12532ee960d3d3f948a18f1531c3e50f5cf45aa7ea3c03c513b96f0b98862a78d91b45235982be7bb493bccd92447f5a66df8194440022a5838859ed3699c82cd7f836c2c26eea6a992fbce484e42eed0bad859edac050e188082b3bcc4ce9ba7b45c69931e1a2efa7fec74e48abf53648ecc88aa32f09efbcd087bd6cd225e33140e263b79666d70e5ce0af014e58a2f272ae1eb6aad49a7a916eac17d882e25279ecd2dfcdcbc4b8af97781cc926f85e0069aa8a7541957795804e040d877616101af8027997ad317034766d4fabe99accc94113b9c6a0f5c0e8c2e87fcffa783496844132f881d2349622b7dbc61e9ed4ec1817e1f9a01502d8d336405946217ebd19b409756f219c4fbe40688734a386be7a19e04b219f3ce845134ef76208b9d76bad8abcd9c2d188e0f5dedf4bcf051853f618e0c347d82b4623e5c9a831aa6b51153200136e9c2ce556e761a0aadc274633b2cb6ae1d8a9e8e2221ff4e64c263bea6e812a31a0d093702b4bdfe395615a161dcb8301e7f252e73ddf7ebb173cb16683ae4dc9939e24a153384af6eea3418d9ca6a4740e9b5888bb4c91af6d3b85319abf567f676064249b71436fa11f3d56d7892d7fd5e2e7aea681022eefbfdfe7f681410f9525a89e98a447c39e5d4b1bad3db1c85713b3f0ee2f2f0840a0edd307179c2422bd2adcce139bf7f118349419922b989f09ca6b0acbc907e677db0d51ffe087e58d739a0294b68b6907489327ee32443e697741e65dbd847483f7c367112e05cf83bf778c52aa45347763fbe1dc7db1a52a9ffa90ebb6c8754e00b8f00a6d269daee784cfffa8f095b199660039a7acea678e07fb60903b57b13d159df877f1091df155a6e7d55b1aa35b85005090ea496c70e8590dd3a00ca78805dfc3f24ccdac0420d5a533b0f5c7b52f66edf71921d328708be41a904bd1883ee0279b968f27688a1389a8b13d47897f6c41aafa17d174d07e83d8fb3bb3fd9d767a8e419f18c516f0f1566bceb287edf3613a50902e4f26c578e6618a3fc13ff809f2b3fcf29ec98b058ccb1d673a2005dec937d018ba18735300ef710d5fa72a3c98c36faa8ab0a4d753e20e53797ceac26225170e577724ec611c4221f34df079da77e1704e1fd66733faf0e90d53aa65a6ecdbda8ead8d6b02b0d10dbb73e90137e7628ce0cfc6779a1fe650fc9e71c57b4a5c77f366cbbacea9c389fe045aedde54d3074b534a42ebd2fe22e8b8e2186f3ace23a0027d34893fb663289f1591c4e64197429e935bbad443b5ec7b009a3affbdb7992dee0a9c036cc59ff1d7546312acdb8ffbf90bf3f34dc0ef1ce10c1884944939b5b9adc87a0dae121a08d230af99667960fba18a44a591851461aeedd6451fe66e4aab7c63d106cfb978d11e5be5d04e3e0d674dfadc530d2e295755ab64c682c65fdba141da07f0f2c709c95443dc77088d01f860aca797f61a4fa02322798d90577a262a2496e01074959e2272fedde9ab292cea6b924545c57a833865a012ba432210681bb2986022b4e51972dadd648215bb38b6e0ed8dc94057784759f3da6168cd0f2f85512221bb7a7714a7f3952adc55826847e6ff6b317a4ce4d042535c8b1efd87a92c7010312b93d58805597d46f8d239275c5f15ddea5793a66e6331c1e593f43c28db18aa22ac5375e1cf8dc455dfbeef5d89e64bbfce64e4b945c285f505cee209c058697c511640041cf7ebe8083d5ca01bb0506577802589cce3ced8753c0bcf6e83289c3c782d4dd374ef364781c931d4448703b4a6a16f631080569030d02867d902f4d3865c6cf87c56c30d2a35c6fb5e23923650299d5d0a793abc69a807b48a976629a4232f3fef8653f3cebd25d457a3a246dfc521cbb42b60480094c344ea5f1832a0e0c3ca4ffc2c8c0fec8a8039581aa60fe0fd611fefe73e84fc4dc34a50334cac3760344080c9c72cb848fdf1b521df0b4916210eac043d903262aef9c09a85d0359c0a17ddf1081a8e9898df9aba6e8029d2b96f56cdb5e4f9931020ef53a99ad06456ccd543551d4f936ed981b6014443cd1ec3f42d6e61485a6cfd1860b9cb23457e4f030330f216e61779f17d4a020309055edaf8e71afb50d5c44f08910e715b07b65d2be755b57739474dc864a2878376238faecc39e4cd6213220a1cd27eacd36e263d4e5aa91d2e1fafd0eaf1ff9645de89e70d39845b56afcc5e52029bac2bbf5cfe59516329e13f0772e329f6efda84f8804ad3582750d112aeba083f65c21952678907db52553f1e267622e120be0c192103c3257d3ad1319c01b395ee8b2ccb96b9e6ea5b2fdaa2242052c7433f66e0a5092878f1bb0f300bfd4223cfbc0a5199e2e22733363e25387c64ab94fa58fccc21d608fb68d5b36f93359343632fb40fcfb2304c48122e69e0255ea0ac5bffcf0092d864c4eafb5bbc87e728c93492cb306b7d9f345fb1e6d9d0004e2c25433f36f8397d7b307847ad9bab1dbd1ed0aafbfa1d5f5fc4c4aca876a707201ca71235fb3ae2e3122f4eefef3acf7119235eeead8d2266b78fc9e7e74388b213bfab52e6b01566c523031de8a650cf77f4cdd26ed33294ec59709bfb5745ad028ce642534cc92a2a051e4b71b41b8490ef4fefdeabe96e3968a91dfabeaaf74e74c49678d39d88a117d73943fc9a3b67f5d632752525d7109c95c890467382c3e6c121350ad7bde566605a1759a7ed25266ec457174398c3a98f044bfee051b0f2eaca981d99961e3c03f05ed077b752ce0a41aec1cd2a402c7b82536ed958e0bae5d4da626df917aa188c0f7cd081cb006b98370c515652b72a71d1597f473fd3724e5ada54186830049cbdffaaac108c3e66663f95f755b5cbcb73505338a868cedfe9017d7d9a5cab676c9e99f4a453bad9a8e3aba52badd4b9bfac1c0d9d6e644c93500f59b694b30c390586258c1619b35c2b2c101b9632af51e2f67e9f79ca5dc2aeea478a10fb1b4172061b9530070469ad8f76ea04d2875c3a9d97a77e5e1b9dd7d70d292c4a43a73e67858747b844769fe56523af341adf931db636d2629261dff407ca26ae79e682bea22cf52bb453f15cebe614dd7fb06c24a270ccb62e231293f5e5ede11bbf9efd478b92fdc23db9d5eed147df4ea6f3d992092927d31141ba90c4c96f2afcd3a601e4ddf60a874604d65389afafe0e376d8f5fd62b14434e9efdf608a15cf4ebd1d2f52111d73b041cea43cc1431c987a2e73d19dc85fb29f289c64e66d47957ae42566b3b354c978ae19677d2c49c216f9f12a15f1e34b1468494fd29cd36c45ce93549ad8b3186b7d6871607f3bc47522bf16bcb310f95403e013f71e62228ac654cd0b19ac4097ef15cfa4a5f510539017b24544affc468dce363ca5d4887e8b7c26df31d35b3a59f5c5ddd9ba89cd6f55c50046307abecc265923d06fba2988b5b5e6370a88479613545ba2a0358d6f04d21614c9b8d702088c5c81ce0adeab043a557d16edacfbd5e8d0d870d8c21cdbde3bbac7866939d80eb7c98b8c76e645e10e09cc6d30f76130546bb17c4fea1a4befc8594c3ed2fd0512f7dce9254d79e4bdd19226190b15ea369f0195c94b1a5d134482a71ec07f46c34a8ca9a9941d3e63eb870e2b873faff148829a1af1b87c7fb89602a49913b885bfffe15602b8453997ce77816a582d7406d177d04729d89ebaaa9e78bb836542d6bdceb602dede3403e950afbab9d47e302976dd2237df38703657b46777cde4d836ade82cea78a099916e1b068405911ae5bc769b3b3e6e183fa20c5ec757c154a4763a565a033a66a397d04d87adba90363a075259c367adca6daebad3570337699bbe69bba848b8b6d4a2fd2694bb69c0bf1e32ae46530b5b878f724316a46cce7310856442e3ebcc7433c77c1fd32e9fed5172ca737534f6a98e859d00b0c20b1843af1babef07ef32e7899d460e942c14d91637687d74d8ed2e480a789f55dc4528b788c0ed9eb58717f4acad4849859c5033d2974d691a83d8217bad06627462e38a12721cba7ddc81b900a3260acea4bae1ec4e194978f68a951e38a63d3ee6eaad0c989b58d2bcc9947d028f2d17e98b147cc3cad649a4f837f98b0788827c76672b3eedc036160ca993d4eb4694bed3115ccd395471707320e4befcc1494aefac88ed8b3f410465ef249d733409041224947ee916abd5668650e82099bd23d0aaf8f67de5cd40888c925bce3e17e2562fda7f6dd1eb805e5fb93c0a1ea5d1fadb2845cc0a2f5e79bbbff5af73154e6948447156c0d2e49e70582b169993bd60d65ac6c7982853e095a0e52ebf767a91d6934c69994323a46dbd22e5d78f58e636a0b2d9630d08658b10a6a06856e8d30c51ffd0ae66c934cb78272866f8daa9c168f838b92829258dce08e3ac3aef9b5cc1e4164020300ddb8be017b6b94a0d743dd4e86d01857694101c35725ac516c66f2e623e5cf16412625f377c02914ad23665c7816a349dbdfef5d50ccd2aaafe555d8e52653b78cb307ba43c5e7a19ebd7aef34810557312e31bd88aa43a7dd1b597624d0da0d289553d98eb50cac5fe94eb3eec7b66ff07e1d0b5ffb186df362a7176b086ae9ce6b0566d8a5a555b46aec8c533043d920902114fbfba2ac203613d907575aa357b855ef7e61f3f58d6aa877f5d9d4fd54af2ea850ed5e3dde93fdd4a71b418a38180783f096d2d586fde699d61b1e2cd6c48e7822b5adc5ce0e56fa2ead618c27aeb1b254e0ecd41c0b259a52bd8e7ae033d53cac035d4e14947c537eb2ab23a144506186908a6a0dc02fd68ec521038804755312f031a91e94f4b49cef09becf5963cd55d11b3ad30e58b49f102441501071828215748e9d5b7c61233f4c2562193468cbe252196c4a2c93383315f98ea4d7323280630d82f831cb36ad1c38618de1f044ff81970c4e5c2318f314b9fa0c3d33eb0ddf27c49257788472cf76850359fe84e7112a083d8daf586082a68fb2767f2ad9188e264912e7ef460028a0f2842aa3a3ab23cecb53c6ce0a588915c2ec8d94631005c94e0c3d31b7882713527315c4d4d1254a10c6045642ac880743297873f4900ca4aab6fae0ed2178527e802fa028f6c7f47ad8857cc4bb03c90aee73c7abc03e1532b6f22d0fda2962cf219fe30bdfa7463381a4a702ac290d80247149ae54a95bacd622e184d93d44e39f6634c907e7486e05a9a984f3acf1ad1eefb61a97b6f0b2c73dbd364cbbf3767397e60e1ec1d71cb026a7e1a82397ca40893a0f316cad01d57a4a9cdb04dd97f53aeabcb99ddc78425c01f1dd28da8a661fc481a5ccddd657458d63a48aff369c34dee00d5d96b64f59e7efad926100b04b05ba373ee1c236af46e568de1927913d3ccddc47fa9b36aa1f85086ff75000d8f66f6a97aeeeb9ec2068e2c831fca65acf19e72fe68b1a12d2c127ef4dd9448c78d2fdd1ce2db8d0cc9480bd3ba6b5c185be9eae59ceea64f6cd658b739d6d884d90e8fd816a9e4fd001b3133a455b89859546ab90a1cbdc52810d2790aee0fd4bec82225629aff0eb4cd4e2309a943214afe182f9d000a447af73ea34ed600ce0edeef5a89a5d2d1d0878bf90b30be9282e19c5a320992bfe72911fe35791ae7dd7761864278632868336c56db5d186b1fe184c9b48f9cf52df3dcd3790ac5d802bd2aa1cb9a6ec9afdaaa7c4ffe1ee65217b180256f1229b0f2da3c93c6f01212456803bb7dc10cf6e511099ac994d29c21f5dfb20c7c8b1327e24b94d2f2737d3f1e2c69c7793588e94709c3b08401ce8e711082327b765f8eec8b7783312ccb276e901f15540eda6f1b58aafaf38a5b8c5bc3251920d55c66fdbb9f6a94ad277d5e3f407581a6ef335a6db7e4b4b6f98f64dfcbc0ec71a72bf2ce3bbcc584501675ac1956eee33d5d053e21edac6246e236e836ed1ccd698a79a542b336b825cd28f0948bf5df1cac8e599a8312c7f4feea1e5946014cc2ed28f710f616070b1e868fc74f997715036bcf05743974ed4a07a543212d613a4c494c2ac729096c87de208a135056a0f4e102a2ea4500e47798716c1f08277ecc8421925b65deda16aa4ea927366be1abeaede5d8e39688d80fbb522359c035ff5faf9851e87df640994adc15120ca17d6ff2248db5e21aed44fd65b8269e82823364e29fc2131ad495219f5b183bbb94028c2af02fe0189cad1e29e9089ed950523c90e8dd208e7648095271697b4c9bac834fe797ae8462a4114885d74aa581aef92e131edd69c0a482fd5d8b8d70c32092e9ee9433c4846edbecc252ae42a23d0fc06661125697b0250b66aea3d6deed520032b6e99a7fc91d86232597aa99fa8cad82e06aedaed180a5bdf13359bfd8191342b7abd274f4495a4e3aa45750613d299663d86eb86b87f18f19446625f377504905ff9905db809794566ab37da354afe9535fbb00bdb1cb58cdd4b7023d5a564db7ce31c03c338d8f77e1a6532958c3999d39b13b0f405ca6d6b64aeab00eec55f0702d907fa6fbb41a079f737839deacb1b8b0e7bf4eb8a54c5b8f27f839cafffb43423bca4c9e69901ff46d015eafe8252a650628dc914c9f8fc4173d44ace73a88405055b4d14c7324add9ff19f6612db255ccfc53adba6f987920b587ceb86ef194d715cb2794f96d90fec7eecee931606ddb4375558aa9d10d8ef4ab0ac1e59325507888dbebe0aa39ff78b372ff604ab319eb9e3c50f8dbb903059894c067e6a937d07505451f125625bc53df0d6cc6a299f126ac56921c73bebd2a32bddf697e0325b7925c17162eaa1d1a5ea92dda5a4851950b2df4e224628908a8f046d277cdd3bdbf2af8126a20079cddbbdf2645ad1693b017ae4aa2c281483d177e0f04a66851dd31c5ef1adeabbccfc7e6568f4992ef7282f4db40e46eae6525d477f9c7d495f88b4c97da7aa5ccf685840d41fed9049ac3da6370e261a6e6a5e3c18a8f3638486f4862423f8340d754113e4147dde3f863b5a33c8d73834ad36d276551432ed07b9ac3882b6ce4d930d5235f15f1134311cf33e375f00f373efa094768919ccca563cf3977e59e03b10a80ea4b3b1ce0bc8c6430bd4ca55e6a2e42363150295e9c0d79ba38dd43ec39c796083b455d6d04aef52ac6673fd8c9e2709fbd7b0d6ce6a392f31456799890e718f38b0d12ec1be9125e53ae4c84a2e5e46f50f00e13bb77c057df03c94759500404b54745fcc689be286846e5bd351f1a9c128861318204e6ba16ec980bfa3877b840837993fa71b9562ef9b3250ea2809249bc7fd4f29284b49e835a2bdeb2965895106c7fae61fe194e32ddc261a8fe046c7df2ab2fcdb5feb8710bd0ba1cb52e1573c5efb9ac7e0dd021771ccc3725e581a17f9e5e5b818093e60c8739044288d82c853ad43f3b7cbeeda81cb46e918f4eb36b7223d18b0ad7d9e1452c201792cec4bf9ebed8c52d9016861b23c02841c8e90bc8f05bb9649909a8710773fa73445b76ba1898f7fb13604dd24509676328649f29d8f765a3bcc917c57c30d76abf2c058b902ba444b75f038eaba2063aff38316ac2ada4f11de7ca1722f9192f3292156068ebdb5ea364d1048c16ed233185ebb8e113fa1d8c1ad4cdba980b52951b939bf4260d6b9955eaba44068ddce8a66128bca6084aa70967cc2f074f50037568eb15643f7b73d31cb15d630e0af3e7934bc9c086ddf05de47d360dfb5305496f9b13878ccab776c5641a6e5a2917960faf2cdc3a500e04ec1a39302cc1af77d1787c2e5216cf3a2d8ed8b68277cdafa0c3ec0d4a52382be4134160e060149304c97355cc1b49d601a16a02d389264d630a8174d34d179c72dc36f4af4d91b2da08c202b08730ef0d0fa337fc632e1d27bf360973c7a4a4bae6aafafcb4a0bbfd443605c777ef40bedccc885971c6bb812fca56a868c09833a87097f822de492d960aa2a69904c4c1a98bbeca592b9aff3ee91db094580c332b92b774ce31e8aacec5727d08f764c0602ecd7a8a1d5beb2a20974bdc77da2a68e5d3a5cf5604d9b4b9418b0c3c6e970346d11558909069158a4e71c79812b4cbf0802a5a3301653f56ffe18553c57d3269a2ee8a0e94926074e4d1fb7b6cfbda0cdc730d302bdbbb8828710cfb11207a3d68af33885f8a6885fd66bdb939c7f486d054eaf1614ab8084051a45c37471d121a7eaea4074b1f3917d9fd94be2ee0da616ee907709a9306d72f2333aaf57633855cae6a3413d6fb35357223822d1de240956254526c7820101d00a9e32dbb4fcbfe5195c5dbb4ee3647c01ae86101acbba6e725e41008c6b8b95f873b05e4f214e8e9fb64eb5303654cf3ab50473a01339b6da14959e166c7c33402892e7b605b97486c403725b2d2b912565480148c6f074ad6efbe3f01f5a7ade2c5ee95b7830e59da67a7e06200b93a20ee0dc9c5e59c31aa3c19810bd71567c9af236549905c4f06f5a6039732e0d4efd00d0c1b93726117ea729b4263f0d5b9953c4183b0b1861fb24ed522cbe8dafd9252363b1e5760d3e43b544a0a697cd6556080428e36b778be6cd7e5d242cc2d8875033a225ca71d56befbd6f924e8b3071da7e2d3b91467fda83d8aae53f961314c9e29d42a226b0fa2428dcebd5c65d5d43d1c1e86a53eaed035910263f383bd6742a99d192bd2b6bd1bbaeb2f148c94d6536f41b008856acb23505652d3c6f43db427b0a6e886bfc93fe183605013fefc13b11ee61faaee5ceb8f987c375c161777abe1d728ab6815658c3e3f51c7c5fd34aeb9f31c2ab77d207c77a1b1df74b3b8de54409bdb5532249e25e01245434d712115d9fea2d7f84abe2afa225e62f6f4aff642f09d87692bca60e77a27ee10ce3025e2d9971140168e5edb8be80b9565dbff78066f28d30dd7c4aab8861c4ccaefe7ce9b749a7fc2d101dae17ad4d3105698fd284bb39f3ef7b1ecbf9a4f546fcc5e9079b60e3dcaf51964d8375f268ad4000e1ced89a0d66b8bd8c1a7cd17e9c155b3d352cfc905cbea0cc15e45eb844b53bcfd5f05a0e40518d94286ae4850cb597a23145d8c383d90cb8f4612cc1e665f462c740e2a3ae4e75f12524704047e0f1257f4a272d766b717803dc18469aa70606cfb27f0e37735789177b5f0fcd07491eca070aaaf84c6b510cc315b243b4b785906db5dc7bdf2dcfe4eaff697a006349ef47595c1aca07a27cb0169863129464b5740739fe46ccff6df15a6dc813e0aab5d6bd9212df59e929881b4242b312971b09ae69bff23558d790d5018cd8b812f4b0078693a9630b5a7b86efe5f89181c54b000903da86d1653ea350314fff911963a11514be9f667a567945d2a4218d59e683a2c605a30a6413feea5a828f2e048d58543782268b8a9203c4741fe23ce043b3a2e3af069d6bec169fc4c12b137bce3282413a99f0991e6ff1759375d6f331d3ae5d6cec54d061aa814bf9c9323a70474d38ad0d5bf9ae429d44076c06fc39945905e355f989e03646a577610ffbce66e8e7afb5e88a42a43f8d5b2fe7e593d6d7f079dab169cbd46eeeb1f23ab12c3522c31f1df08076dd5892dff860e030ef3528a005c12186f8f929cb8e0f8395d2a518b63e132d481442caadb2ca1b4e7d636bae647eff8ed52ecca0039391034840e0a8d34865ff625019fd1bd945849e1a95af073a99220800ea12ea7ed20070b39e4ccbbc419e806150bc7dc48bfb2b591143b3e7301f7195cd3b815c08c5b518a3402447ce8f7b104b2018ed73ada78665773caafab273dbad42c8b36167f96bb6d8a2018b51e12274bf2d636b1523d0cd7ad9607f1a32d90c9875b4a5464fd5c754ba8317b723fdbebfddc19b01a1bdc3a3ddf97ade1d5c05cb2bb7b680d6a94c700792922950b78e122037aacfc88ddb05cac99ca3514760c8dee276dba74941f7951358de8854293fadf191813d26a18a2d837e1ca540e95393bd23c3e95037bc5c36f63f97c3748e7efcfa9f92d08a21121111709b9f0f9ed2998f0b79e969c0446aabea6e147218b0eb3a8db97f37ccd5695280ea67865c357d7f2c025c4e57b1742b1b3b8727022c76d0cf48c4a4b01c803ca0b8f702df7e8eb89f4a1c6dfe45037883366e1231ea160d10b266775038de2737d030b6f2ab4fdf2e3e23944633537f4c81288adae69fca1eaefa23320599304036b1e218c341a0d25f457610415f2e1be2606fce0de912a8eca2ddde404cfe5b13c5599399170986c1b4bd653aacaaf0094c459df460f685553d05725356720c1d81b8f6463cf2ea05cf622f176ba8d089706694e8581683a23158f35e2d8e699750b320344fcbf5d1863d1c8b91a120e66aeb5e7c6f09511bed3ca313c06600f67fe145e64c238e43c8e5f8e2d26bd0ff52d7d28e5d75920fb7f4486b3f301f1a79d1905645d44c076412dbf9a2db657861cbd899f9f3724cb2d804565fdd442f15fe3e71b61700428ba8797f60256dd8b3aa7aa124332d408a1a83231590c734ae0e7c4a93146a1b772f4f6ec6d33558fb3b6fdc9279e742d4b2006d588d8131c58030577b7998dd5c820423359b5eef23a216bde7ef72a1acbd419eed5227c3752abc15b0f156bd05181d0bdf305fe01326c7c090e80c03c2b7865615d7ea4a7e91f6a7bf8ef876cd6e5368749845dcb045132571413f88a4c649c50734377272d41c8fa2bf22f991d4ccbea274735d0a29f54be7060e2e5c57559860a70ad7f98073c859c78f1f82fc074a6bacc112b0c9ea544043b356336dd2db3575df6dde9af6a9466ee446e8c3f18a5ef868b088a2971cdb17c4edae43e3aef11b1099e706069bf7a64f3c0c3e788333fe35b9c7dde9cea15b3248f175605f52afd7078f27247dadc3efb63553da6696804bde073aa19a759f29a9d86184734b10c36f51f52f4bebc6cfbd95063ceccc18ad86e6def46b62e2511c50c706e03d00a877b877fdf16dcd393c84616b226db0456ce1db444cd130d9ed2818afc88e8a45c8b696f17497e3b01e195993265650883dbf739cf82e7718fcdea0465b96e7d8b1f2676aa7644a02fabeb0c91098e376738122cc35c7f83b5af181c81286f18dab57208e241f9b883d7b6abb7245f6b450b51c084e337265e2224c3a628ad9ca83e76adb8b2cae8fcde993257c745b576e90f98d510ebe3abb958d57bbbcada38c8ccd5b64b92ddf7b4a3990889e77723d0327d82b51f82ff6b5cb04d654e96c5200de1f5ea5b8ea6f533605b1888b1d9fa185ad5d469d2c78a4be533bfa98942748943ce706cfb8e0560fd3c6754bc3f84946af8eff89f9e926ab344f5833d2bf7e3d076a421d1bdeca61677aacd5d9c8e3b301a12abf5bca849d41b14c4832c38576be266d63653f636ffd546e68e565da3d14501c0fc1f3c26e0670d4cad931af56b2086a5e82b5f05d3156af5ba8df64fa2d48ac889177e9f3017bc0a9a2b428508846adf17ad4976e727ef3e525de7c5b934a7a35e7f3830ecd320aa2d362da91aae9c09499fa4bad1751479b023946d1a2a90a37a60e9053ddf88cfde894325d0c148804ad4353222fbe84b166b4b60bd93f2c4bf901a70c964a1a1d3144138e7f2db617af283a78804ecdf968a27d1bc16e3f814101cba62360bfa416e4bc942b1ab4b42309e14c2c06e5f4e7753551c1fa3e9c06f4e189d29a1275f6dbbd827a63c89e09b174a2057124b15117f8f094582e6cf3910e30ae19b9f25f13c5b561c109bacf3ba4ad9594f59654fd2794b8c15f44b17429af9903caa61649bb587e99392a5d218fa5fc81347c5aa8dc346c39fa7d2489b309bc3c7c3336545047eb4053feb039186232325971ff7ec8b8fd84779b2ffcd5814a7aac52bc7ce889577fb63c18a7b9c6b6671054943c67e28648982c9f50d5fd6cf72f38324a5a3ddeed737079a064e6ac8bd0101093a4f63e438952537cf071b2b9cf14f449ecf2d95cb79a0dedd38a6553e7a7b8939ac927f6581cc8f11a9110745c933220c77dfe7179feb74203fd8c133a041063ff2e10632ec9e2d8be637ab08927e55b31875f7056defce3449333b3bdc5dba508537ac067618802fac77fae961cf37ff961339bf83cd1d7f5a6fb4ef0e7b9db5f5bedd2a56bbeb83441ce7cc18fa63cc0b09adb29894fae531de640c3f16e8ff7947e59fc7877f1808df61ab1df663c90b7c2c60785e88ddea2611394361d464ca0804bdeaf0f1d360ba015a96199b17433a6165eee379007a1b34c833179a16ecb8063a3d90b86a0f5b59ce8a4b4ccdfe2c3ae3689740ac3e734fdee37954b020bc89350aed6fa1a5eafb15439264cf70966e2db44519c259269e5f3050331221016df59808c77fa09d8d5d41449e812114a9b6677e7c92d8dfaeb2442be9880c163b46a628d0df217967cadfe53a741d537a873b5686e9ebd9a7fed8e3a1d45f5f4f641ca188507301f9ca85617eb903e75ef8d5e309825b1c17d6520e4180c150eac51b22d154d3daf63ba02b54be507b0c2328f4cd1adf58d50f13ca13bc7b743e644516967ef78ff3c92b0071c4e16bb163d58a999bf303cb1c91bc8d94fec2ea4402167d53c4eeeeeeb5abaca212f8f93b818348efa70ea6bfb45bef3005a983924fbe21c80037646758f3f9291bec7084f424b5471d8b4c0074fe4c501eb125711a8f3cd4196d2f9b54ef5e82c8a8e6f508e77dc8e9a5282c18207a48ae43883cdfc869039b64ebc72a9b64f36b0ab43c3545f85770333f8493c3cb66c5f231ef52c261235b452cc15ac21f66c566114c3adfd0b7a1e75bbebdc0af7d53cb1efee616dd59d251067d78b4d65f62c2cb7434df88049505150e6d5b43a1f740648e03d0faf9ca3c7641ff5f6601822530432c25956c80c1a2e632d9d7b9bd2c5192ee10b4de13254dab3ff108f47841ac2462f57270278a994d5d594d0f4b75775002f53f74f79b731d8af8d2c6761044da2743f9a6738a06262ab8ca1477317ec12536b2700b16fa134a7e2fccd2db1281989a32f59ee7d267b9b5451cb3e5fe5d05eb5872d81ee099a934cccec16fd593c972e60432fe1ad5d819600f898ff609d589a81a17c27cf0fbac55076390362467989ac5fae82df4c29e784e271b1eeeb092f1bdd9afdaff1b79e4947ee7735d03509f7ae93c8ad3953c930cefc19b7abadd1e9ac54f2218383af21ddd5ba23b5ef9c325ad2998b03986dacca74f64da675f76cc9a7f3b31cf1662e8611cdf426ea6c099bf89c23553e4206a01501ab60e6a251f259fefdcca21ab6924b80444d48b9126956358be89c597b5931389683cd1fcdaae165090961fe07665df3ccb07a087f635f1d381cd033624af59acb010159ca9daa3a81a1cd085a5a9a60f55733e80aeb849b6dda2ee9600a00ff1acd9f683b6a39f325998d01e34006bfc13b9ee464fc9e6c494326a3449ef0a0c4b046e7aecf17a01558dd61512a3e8148fd6a10311b9117c5320ee6a50d139d157193fd729775ecf5d116bf511d3a32e8ef2b7f61e58785c2df8731674549b45c28e42d43ac3398089605b871cdd2bbd99dda4d249aa798b4225e2b0fe95f6f16672f30b294e8a19ba58462d8b5a755c6ada4829e7771af0ad143237e37bb56509b2b6acedcbaec27f37285fd62dd12735802e33220f8446cb2454ebfd987b9e141eed9e4218a87252b46c3ba076fbe96cea555127b0f88f732eb1408f1475207b14347162a4214ccee5f252399d132bd30745b839d63602bd619a87c04312e6434b856224c17f75f8c9cdb62dbbbd8ea99bfc327ca5ea1169ed12ee51a6395f8937da164c33b32df5673b7aafa0d0a3e5050b85edcb18a52bddf58eb289ea796b85ebfe0f30581513696920f8037f849bb8b105c4c19addd3411590850aef780fdf6443a52f506063bd4aa747f62dfe21f9b8b4ffb5ed57a39cae2c02f1d95911b702b453cdc4aacc07591bef4251e93bec49aa2e73c0ba611578b49e0d7cda124d2ade8c745948a26edf16c4e38b427b5027a8d738a8ec3fdefe43234c9a204313f570e5c880fde4510a4f03a3dbeb4bb07ec1f8b71324117fee17638735b50c43bec1fa941a2747a86bf630e7cb7136f7020b3ba3cb2d35a0aef76babea3b99fd1c6422bdcab818d7179b98f7cd24907022dc925bfbb0eb22166708809c95c40898bd4f75c0c1b01c9a4ad3d3c0aaae000b87894a1223e3cd56d904bcec652501d737e93fa5755fb17040ee62d0922d8ec34521454d1fe9e4685577f52396226bf25a7bd413b47d3c0ca252188752faea1588eeff00de4c47a8bb803345051d5cf5d0ceebb5585e18139c110fab32d7eed32b44a0d285f71cf66beb00fd8f10015018ef0214b7c0b2844a983dd9ef425d9437105937885352e54042780545d4a5c2fac31c49e69fd5013141837ef3b3f8e447091aa47962f5fd7ab17ebca9f38a114b3633f8f1c626057b20c34c324775a9cc4eba115f19252064dbe0b17b1043439296c9ae8527413321108039efb3213b8be784cbd98844311b4ae67ddddb7360b047ee6b5ab0e167ed8588de7521887eca553fb57cef99a4ab429e9e40b1b029e1b78d83ebee26d4a1a1baa65958c98157427d9ad9427134d2534f0672d7ece9702be3c153238b2497df34c7d460b6f14848d3c51531caa6077661f7791346ba23cd1a899d586491d792417af21c11304c4d9aa563f43cc957a4fa1cefb8e6aac0f2489adba0cad9ef2605ed5e813a504ce6c85ca1eee82ce452a1e81e8be5386fba76fbd110e1347e571b2af7476d5d291e9e523aa337e13619cdf576d91fa4a3e7e8b05cd8e52767c875e214e1121dbb484ffc076070f3033664d9aa0f2e2ed3dd4a4b9611118e2d51da6e8410eeeaffccdf76c9cbe21ca9880d456083fabb53b3f3460811043b1b82dcd3eedee405850d514c541a34669dd9b2fddc54a7757b078c7687a52998ded0e3ae7f87d3b1f67273b73377691fdff5bc71f130c06592a7446f2a4c368cb808408d44f28bf3d703d385005f0a9fc547d447fa5ccbea5b0d10e8c78d0f7ae2a446351515abca4b9eb458517623d5539d37209da5d08bfd851800b2d23b69ffe12aea6986f8be218e3212565afe036e5c0cd4b65e33b4d4f0cb515f138d19968286a8ede9c15bca6d6d14bf98e3fd9747d7611f61bd564bb2596ddce7409579b4eca5c7b3dd0b95005d3dabb0e38e6d1dd465e4e2343779fd03d06ed3a05c568d115de46d061b4a4e41fbdc681e10c062b912064717b40a292e9090b2aef01cf67724d4eccc568de43a0c5992179bdd0b7b01d80f02812dc4b13f5c2e305d592707e8f962e2a96d5ecdeac6df07713ef385b5a2fb144a66b081c15687a9a4994c89475a4bfdbefdc130b880740caffbf751ce08a31a5930018df4b19142fd8f354454905f187a401b9f1dafb94f858d67b5ac92b237a2cffc2653bd09640db78d7788c83890d4ac23262fba358ea3e36113426f02fc5fee5e71f773de1eea28925935022230d6830456be323404dbe538d8be3d84e4bdcaeaca511fb54d1b6b2266f13a67d0b8d49658d35f15647ea1b16b8a60567362fe87e83a214464e468f02b70fd0f18a8a9e135cc89fd9848da00df727d8524726295954899b6763d19a989e56099b402a87ebbab67ab1b19d07d65d756c7777a09269df43016c403be85cb8e21ac55df334129c556be1be12dc241ec27ccd6e297f984b71d4caf6cde58ce58e858de5ae0f62f9da3f816fe3ae1285df735f5f53a339f237e68e7398c8e04d2ffc802d6378a8b0886b26380971e96056406486da1b712c6f740ad708aa60a564fa89c5cd5ecc1547441ffd3b017abb9e4ac79fd6c791ce617f4bee66ab994dcb25d344fc413efb827ca74a8c8a868fc6ba07b36e3d133d100041fbc8748245f9ec3b344804be3d3bec64a35c424e6b8187135a7c0d080beb26445c87c823e090d2c45e9db40f49893eca89a5167e1678f20179cfd851bf2464293353dfb0eccf31c22fd623036959683362199e0271f7ce8f72665893b15eb1baed3482bef3eac3aa6e4f23ff6c683beb0b3debb0738801256b98f14e8ca312e31d45e3e94b1fbdd2ede1ea6ae28fb44920b83ad52541b2f2c4f8a42c216501c3655888b170e98a287612c291abd0f201e4018c41d89d2e42c953e059a5dbbd334e9710904925923506c5269fd18561dbb5f84c0509a9df64d442aa68340590a85396a052b9dd15c1c5c526af9041f236572f2125678ef7059f5f82a288dafffb4321ca2c4afad7a307ee01d7ef7628ac45723f43ff9eb4842e75cbb3d039f954cd048d68eb75a70fa8ea9c886b608766246934ae94f89c1db5ccdaf49add3caba68dbb1957e90c9c89d12d39bf079fceafc68b925497764b7243af155e5de84bee2fc0a2d19fb650ad6b1b855b3033291731237d1e41011f9a61ed33c304990aaabf66488cc0da4fc3e1457a25d3054673f4904a65161cab0457a932f63c610a83b94773c07418fff488f227ea571c5951f3eea14b6a90115204f4c9d3f4f0735389fdd9390c0b009da00f256ad225c3ac7aa63e21309fc166682715772f3c9101a6ef14036cfa01ecbb307a9d77f37db49dfe41f668ba441e0114fd733862f896fa169fdefbb287add15a60d91b45ba1df804f504525ad7796d1f7bb0c9677c2332b4a73f50ae52ae8a5ffd6333838d7cf596b0e477899993372888e1b81d1540b04a0d9b7cad08df73b7b2b47cc6a06175a353e919086d05e81275b7f1dde65888f3fec291f2166dfffdbdbc445a765b26b1d3e70a4a3f3749fc656d219a5a0d7d24f58dd4aabc76a7a3d09cc36e83a09a038fe1ac7f79651f5d7201a31c76071871a595cf39c56b4e5cd7bb87800a463044d3b360fffaedbdeab1dbedb9bde8a331a79f179d56f5056ecf251e96a46c9fe44e81e53704deb0dc95faf39223631110b076e392a155cbf3aa729e52d8338d422b6fbba8d8354da3f0854907aba86504718156f0a3b1319b4497081b8d91559f53ac211961b1f955ac00004896bd13c5fdd585d6e215637b2cf4c5b1b6a8dfd9fe5a7a99432979d25e02b333e658e5f466664ef5db4e97586a86355a003be904bada0297ecea270e2634ff6f81a60d5320ea2dce1c1218c10c4499833ccbdfbd8b392cc399b123edc1478222e1986052b7609bb07b64a110992776b1a26195f3b6f971c2af9e99779ee9aafe5bf9daeda364b12bc6f6069211841c1c0b1b9cdf9485f8dbbc92b150c7a03b402c43aea0eb7eef8357a945b73bd016e73eeefedf29ec9dab874916c3b6cdbeaf4ae48032e8fb32d0d83d2075cc58b6ab284f7033e5cbe53785ba1e4a5fbcd91fe10ead157660c5b36366498977ec0e58b56a6d524bfb271a53060579897d96253526c788b5a2c89f1698658e4ff5ca4a30795727c4815f7ef1414d46587b27711bf5569ac21e069aab55bc40bc8e9fbc4e902b944da38ad0a7194c907d9cb017a97d1120f9ee8da4dfbf1acc6a597e5e7143944fac939ef1db216e04dab64aadcd652db846c9d346e31eb9da6f36288ea968b1b741f08dd0999c697f89b9f999ef55645f290ce7c31ce3156ce39c5f862959a6c0346b484614c0a78d3a8cc9140d60801bfd884e70f76c97b5bd89b6d49e00729ce779efd703e8d4cc3b2436642f284dbb6d70e7c390835de0663760c2a1c7c07d2197a94bb4b1884d678bfb244580b13b547f17529061e8c9d197c018121e5437a8d903e6f5d85fea2f93061ddb39a72f3a1d2cbf069576e0a73f5f465d14b95edaa17bf98afa5638800390bc1d4202ae630321f4ce820cdebd3582d7e97588308d3f94f8934605281a66c3a654e0bb5f434d3969ec4a2d68bbb7e5ac21daded2bd71a429ac2d51dae8a021129da8e3fa8caa43039a3fd312beb7297e6d78cbc65d940713e1c3eae67b2e80cbbf2be03949b638bfa3eba90810822bd58785cfc139c86156b909c5f055b6422e7c2619b9cff0d411d8c5e391a22de062130b8cf915a7e64c6184c87eacc6b7606b440a1432b546fd31db494360c8d896bb73fe7bfeac10def76afec7ce95d8f1325d27e79b8782202b719057b23fd29799d02ceb3546c8caf86dba485ad9c1d5fbac0402bf2719b9bc671af5580254a2cf7d170cc823b4e6f3939e042ebc24ff3476cf62a7fe47519a1122dc8b554779db4b89b8d5cbfea7c28c31cc7fae1c573aaec2509ed3dbd3fe5d2b78bde490d6b17223aad379f895598d735c9320526bfe64980221f8ea2fc224efed6cd7838b2255a3eb219e591e11eb2e935a2f0dc5241ebc43ab66eb7d15ae16138a66130eecaf94e832ce197f62653ee452c7d8f118e11c0267ea30b6abdb915ff0f5c0d72ea0c5a7f2bbcb662bfaae85d651a569b76e8dfb0fc3eda58bee3f131db5734e4279c72eea0f96db88b0fcd8935fb41895629d7c41f581105e1d34b79c1decf753640ec30e097335d56ccd25a0265bda8b736a2dd84a00d66f94e91df904f8533df88147c805e17f6534ea8b42298235a5b21d686c4fbb04a52fcb2e8becefeb38dec07f8b75880b13214f547c79bc265027ab542e3435b3a168fc88cf3297293ab31ed473da2618e30d2383cacec40da3dec4fd27167665aa26e5881537a6e9759f84f9cdde234a9e35f8e222f64a0b4ef26d02d60ba32ea57d50ba83148b0fc64ca839271593faf22631c3c1d6718b558abaaac468854469d0ee755c153a5d72224b117eb5c3e35dcc462a9d821d4cba3125f8a9050ed4c7d04bb3d93afc8d56bfc7994704d2cc158ebce4ad244dc9fb7943ce8177e8f448b34b05ef68cfec71b00c8f9ad5fda5d736eafc25ad175002f65df7b3d0a931f550702db38fb146bd39fddf63bbcb0ac43f228d5101cd00dbc68d1b2a35ad224e987c7394d95dc4233f6dd494f57f8df1e33eec11c0d76d0711209695f99ff1ef6435ca61e060fdf1dc832bc5625cb654ed37fc2062b3d13850a8a815c6c3d6576a9493548e7f7aad9e02a244e55a712d35620a4b9e3e45259fc5de24689c70e22f6b2a4d60e3c7a80abc5e4e1b227b7ea291db0e15bf1f755d6689eb1d60f7fa15251f825c33bce51e60ff69da1d659374a85aad4fd6f138048307ca10db6245a94ef11c21f4b47b3a51cae081baf1f2d2e1e4d0e01803bd523ea3ca694e62f608a88cd0438f44c6a52ebea75d31d9b345d14f1bae9c6c4c8b9456ac0043e7a6a31bf8f0f4643e7cd9393062e812473a7f1980751b6eaa1775f60871ae9879bcc4d26c994f49249e07db0fbd8c01739861fd10e2432de297f6afd3262f8a21a3728f48ce40157f42f625f3488bab0102747def450a5e8e17fc3ae2cdf37cf6333d1306b6521b09d1fd05bc7e080ce4a81139e530d198c1b2ea4f681c05353f563b3e3b6e44472ca0784aa6ca78d6da7c723747e54ef7ba4806c98fc29eb03e377570a5bb2978337eef12d34e73dbee12253b79023e3dedcf5e521d88243379b3f97afa8bbf905d6f5d808ccddb11aa4608e657ba628487fba3e608d78671a1347cf752fde63964c26b6bbc2360551b597e87861ddaaebef874cc8c656b94fef7ef5f9f87c4556da1865ed6e86d1b5508f3ea5e2efb01cf1d7cf660522a888086e36e01997da033a510f53100876318fec790401139cfa5346bc1564797a3c36d108624a7493aa02eb02cc0cf157ec28e77636c1a4f744119105fc7fe9fb5a0457957060bd644ac8538c632887012a467b6416adcd39a50da1d5f5b3f75b6c2e23af7db1ff985503e3c8cb4a9ad26fa2d53b94b18ddb5f89cc2d4a3b65594011a16e366d08659f55c5c574d33f264aaa736a4b48dd2160e81009f09a77ac15cca4bf1d0965dbd3e50123c275c6c06923f5a434e9ba0e09f04b852f464d531b7675f288cec93fb3f09c016d17c596c3f04afbbfd523a0efe19cf5d671bc9372a4d77bb49c0fbe74f20e4cc554ebb3128a22f75a4af7c9cfe9bf544c2df0feed40c7b0f5c1da379b39216c7b30b285449fcf24fe29f01b8a68bd21bc05a2382c2c77b240b31293e5f834e7cefd77aa65fa5e76fefb6299a63ef09971f1021b0c0242530345f616afc82700407d9beb9cb915a958709dc477f925b79bf725104224a04e4f05ed94e2a63d312bc60435be993f71d3e4e25aabae4acbd571ce69a8055422178f8fb4bf151a35bf2bd6630bb5907a14bf0e24cdf0fd004d191c2733e7590af33f22f95fc3427e9642d7e235aacf09a3f992b1f561ac3e851386691a6f336ce63143d2296cae7dfc950c9666c8ed849ec244c8044835b3cf272945dc9528386a948f33382232e5ac564d986f2d0771347c172fe2265f57cc3650b60e4ea6cdfb40f82ba94be000e6847837ea16ebc65c1ca3377b693ea838c771c96d367c0f38b9faf5cbacc9f608ffa99fd70661489ee26882a47d3c3c8351f1b531efd316e231cd38603e277d1cb5a13a3d87b95edb57204207f91d1df51a6797a3fa4742c1d408f1774d0b8419a8e8853abc55a10b6e1e7e6152df07a7720d46acf441458f63b22f87466a523a49887d4f3cb35bb7523e897d02a4e6fbf40e1ee776c7a8e584b63b0dc1ad57878b30a4c3abdde6b1414f53b25df4373f2abc0ef2a4b11000f870541b5a66cac63844901e2f6cfa216e23aa7450b937868ac7f4cb393bbc06c0be5bba303dc58ad9a55390ff5899213b2fed71e72be7dbda76ed9a817c5b30b4155500446cfc1102cd2b1237076ee8a7777b7c2674a0756b1f418ebd98e4e63b36d4ea4855656807b53dbbc3782ee81e667298e7730ddb65e9224cd8baee8199838946fb5bffff2cae9fc36c3ece6b2f7d18f24506c8801e4c2aef207d15925b8e09e41fd5a830f5d3c033aea5e03d2a1180839ca96a0e44d39b69cd5f420834d49f3f2caaaf6dca360a38b4ece20b65c0f3344924eaf24eaa2bed863cc73dd2ba72ec541b7d46f7e90599ff362fe2a3f7c3e6288d5b9a8573697434e04c9eb3ffd710e10dc1fb1a9f70386ac96ee1ba89334e603e8eb718ca32664074a1c2280c560d9c929394781848214f839868ee29aead5a53aaa107eea0dcffe5b53b8aa2b94ba196d6c4137443db956626eda8bef720ec1b3293d1bd7ef3a1b703c616dd25d8a1c2a4486238eb15f8cf34aee2e65a06c495005b1fa644cd0d2cc1e7a26dd9a71f3776e987353412a8748db5451a380cf9cdc897a5ac20badd87dcedfce22b0ea87dee6a3f8d9e5cc4f9fe4096d4c71a1e58f036444b0dede1586b73190efaa658a288d2c4693771c580e9b606e2479b1466346ad21d92f2eb52f1bef859c3ec4f6c9384fcfa2f4fa10145482767aab627767adee3cc73141827b52d843c6a66d72013b7b10d567d7d428b406457c62a0dc1bed0463bb07e0cd469527fc60c1f6d79b721bba7ce92f424ce4681c5f685ecb62bfb6fb6d0ef14aed956f83e96ed900f285865be4fde2ba85308e46d4bf7ee63dc4d62e83942fe09698cbe4a3ed68f0d3286beedd8a86ab36fe5902d1c3eaab46f64049d5eb6fc7d486e1a783c8e63d8bcaa2479956858dd3304c623bdd2908816ee127f7ec98b0e5cab0d6289f5dd82930ac343eea0958bfced954ae636ab75226f6d806004869fe07698b65214b38baabd86aa11a8b588253d0be8f78e8a6c6b367595af4849691467dd33443bffef7f5de4ca8ab6742c015e7ee87e3160a39673060e6c885bdc58734cb3425b0f5118c318dfb1efc1d18ee9a6a319f0f6431d7bdd505afb0d757779505af062cc926f8dca24c8d9f407fdb2d127ea64141dd5d64506618ec2bbacb8555f77645322aa61d93da1cb77dbeb8840b876523a811bbe55dcf74b02844b847435bf2e7092b2fb5961af0cd6b15e90e53e54d06e06ce3090883b297369751df7b2f0374e2228a6dd98c2de655c044606a00dc800ddf78ec45e440e620a8bd935260fd83b000a4397aec74ed6c657558d22d2b1e062380b2ef2ec5861788564cc01945a585cdb8fffc781f4e442505d68facb7ec9972c8010e23f884fe0d5bf78451ded031c5422b5f04b5d91871b5b19e4311fae34974945daa293292a6f87f852e531ad5cbea623cd7a32c9ccc35a969e89e8d04f1ae53e12faff272147bef34c812566d83664e2507a67570f5a922a67a66daf65b548c926199f9d99d93f3a2aafba4368eca2c4ab2ce1ff7ead3ccd97bdf812e9ae0a5a803f36f581e374f4747018546c0ab6b9ea5ae5d4685eccb78db7a90e681c69183a44ab1fde56d611e8426d1d1ec4fbb17c1a604ac8ad803a500ee28404fb70c4391c15311fda808f176c4bb5b7fb6caae64912b1a0220e3fa4dc5dc506138830bb0095ffbc6c5c533cce2935efd816c8cd75285d37914e9d51bdaaf4bd613ddf89fafb116451428bd99789dc05ef1ce7727ce0369d2077bd8f4d69d1e7ad79b2c106a8464b688043c546c3041b9baeb2e94b6730b9525f9cf9bfceb3c355c7badbd9c27caaec65d07e5921fdad25dae97877cd9e59988d64ce6ca77740fa6c799cbc0849d79ea0fdde7dbc2ca599d1885cd30c7516480b8c7fa8b53d3e925e9b32d16eaf7ebaeb0f672f306dfe8b26556209b974d48990abd08d250f72fca44e8d493dedcd48e75351ee0b3d3d62969e47d6d9b29d2712906ec3d193b1658b8bc74ac2991082dadc2fa99db20eb9dbdc8df4794e32846fdb16f7673ef952ed8c6fed71291ef82a331de6ac6c583a66a9cf2b1443a31198cb7de7e123950d5e3e9f35879ee2925519fc39f2f5ed6f5322dab327665aa86549f979c0b50b1ffa3241991724cafea002ba4a915577643a7ccd77a5f8f2130eb76ed39a8f6e438e0cadf59ff852aed9303d542f257abd8c4cd8f5a80c80fe73ba26204d4d8184e420ce91f15707f60a672c76e7b33e4bb329496051dea2a5a21a9fffe0b02d4db23c8f1c0530612f5e16aa9e2e0d327d6956df0bf8f183ad80a43f29cc87d43549424a365d9f23eb1b33a71a6dd55a880b5e7cc0b620cf45e7ca99f9493755bfd1dfe1acbc9b696a2918abbc7673a51a781de31331aca5ec9b171310ff04d22d8f4990ba6608f880c61d74b186e05b081ce00ff8c29b7d79383f9891efab226d161e088d11be029c1896b23c7882b4896f6ded3c821c4053802fe031520fcd0303ba13d55b5deba2f589f4216733ab1ac3a6e02432397fed92e6345fb2863ef8f4577c1063820dd2d939ffd4dcf29b5482c41d89de4256fd04075c7ffd33fb137de3b44284c230dd000632d43490cbb130a469953903037e6d04aebfab0f783c3b5034e052a06bdfc19d81513ee1dafd820709240dae6c6fe8b18ad2f86b9c7842bca68bad681a4d3e2c3535a96c3f5f0e7bd5129f18fdf023c3f6a4ac02c5a6ddb43ce07f1596763decf664684c423954553c5255afc57d8f80f2c57abba5842170db70cbe51ed19c97d5d41c70a7e72127e8fa5ec2a6aecb42b5637dd411ffa7b6165be8dcddc63052f8955461c74919742998551b0a8221884a7608e90a0faa6c439c154ab2941100d5fb3144a03cb80f081fd67dafbbfee52103eb211cf836e9ee73983222d36314a5ae65d8997bf7dca6cdd0d6268393a6d8424961ca7b5261cd3c0092080cc34d86dc88adb25a326ef9b8ff2e105be6fd2c5954c2ae5a867f640aedf1532d250f298b2e09f179a8f65db5ec91f5638a90b7130688e876f9688ad776882c596a1b2f248850a3c115bc0564915640e9f5a188e3772238d87890db65233dc23eb0b32d555da140fe2f014e0bdb3bea26707491dc27dbb0779560dac352b8539ad0f4430a62b7e5ef6994c09138cce3a2bfa985b7e52b151ec042594433fc6a3d0e17c7e1ac8b04334be7cf34ae1112bcc3396c56ed9e86d95c8eb915cd0d32e0d4a22033ee30feff14e601e28413ff611a43044375a1cb4dd58e6896a4fb26034066b8b1bd6e33ac34c9bea1e49f207f8c19f83fb7e5a2432f0d7aa23119cf681a75c98488d8e35ece98749d49f1b302c646ab3d4713c4b1bef0e2d6a0a57c45bd7e1fee5101ef4e187578709167f7579e67755cb67b9783ce0e791b349f511a866f2a97f506b947f1e78536aec2f2b01c6f8430bdf0583a32c94ecd95f900848afeae16c732c86e136587a08ecf1cf761d6517bff863ff6221ad1dd03b5f489e1337c3d7c9dc8d0dab2dc60920d58812df027d1887c1ef7279dcaeb829c79741c7914879ef44190221d598544f2af8d1a0c82b3047c11dccbb365a1273d8c301b4f4ac9dae3ca3186be236cf56fccf55b549bc09eb205f7f67b365362e81ee6073ef8ecdfc09656b44f25aae612c753fce5929595fc1d153cd4150b88c514090c70416875723a05c5eb9904fec5adaeacdf57231e7dc45962391563aa96570842ae489a54d4fbd2fd6f56082289dc3b888b83f61dc38e87767a1267d4ed94cb81127e44e74e8c5ff5466cffc64761b0871d8e382fb081739d1876f26eab01910108daba03905f2833e8a0100e3f6dbc72d552c8e89720857337b40417fdf98e0960acdbf87700773ed762122bbdf2d222eb40d717055aa8649f16f16ea3f71019406a8deab355e6c94e5926ed8802894f4726d5e12430cb2150428e5a24107c94f2031cbaf4700a35c05bec41afa37d16ad829a8db9c902a7e478e5d0d2d1e6486cc73a606abf7c2bbbc46d4cc62b1a9d5010cf1f4f67727eb16af05bd3e4f99a160853c75fa83f047d6ab0f69f6845e94259252e2ecf4ec1baf0a089d919ef6275f6e03f2d498870a5c4b72c664fb74ea88d8676d037faf77a4372d630d590ec3131ebab48561ac2b9a68734010973aeb5b3602cec17ca7023abba8b0fee142b559d79f54051f6422c5ad5e086e3e06658f5764147b831930655131d9c805fcb45eabb37a58a641d561ec9c5113ca2f3bb4564f4718ab7ee522d5e2731f13189493e9287989f98896a990b7c0d402ac684710e419b99a9db971fe98f7f51d945118175070a368a4ca511c19664536284a4925345ad62ab34a4a3f0f9ffc92b8fd50116cfda6ec187ca9311922f1273d05fc47a49790346a3a342b6775a46f612599f67f6e93a10be01fd6ac8bb4dfd9a44815efce1784ce5e17581030a72cfe0736c7862743fea50ef92a6994f196971f6998b28af0e90b181c1fbd0f885f337cdd8b6b97ca68ae0932b0d3875f300afa6a4a0e7de2748bfb1a69e29d369c7690557aa4236f6d2d20c08b10cbbe91e2a650efbcab5339fae664923656e078ac6bb645c71670fd3b906951a14a1bb3860f19aafdc04d2447261a4b61a1a7975afb77d9d31c4baa4b1bf9cf113a2dbc1011cdada419cd9ccf8dd45f4dc9b3fe0fb1ab034e0a5534364e610ef0f2f10fd0b7936051e600098202307852bd163c8946c81ad3f8f6051afd695828303a77158471a1581954c16288f688306dab1810be122e09942fb3315a9260542636e2a0ff572ce045811a9b02efff2eaa33feb0a085fb1328eecbf7ba20d2567a475784ff24a03c39397d18d2b9145e2857eae1cc6f216e78bb834d6fdf5af9257689162b22b2f8d6690b41678da9387ba87b211ae8da7200aa32017e1dc3cb6816430dc49bf870894f5e6e73ec6361701e21ae74288c85c784884907d31d1ec76e0f3a70f788792ed0b4d32f932b9cd0f3522a2371781408456939f6159453b1874f93f0fee652553ba5903da10f4b4e04d381754b8322dd7e34c8bdf5650c9cf828a7fc72e44718bab18b6a288b560346721cddcd3e42c6cdeeb4d0c91fb1e682bbc0009e5edfce56b4dafee5bdd781e138264b8fd2762df5e118692a28e6d81e061b36c9b88f4f8b1b67ff3ba902d1d208f0fc0f59ced8df7260c5861cb587c0fee9826a9bcf0e3b44f1a9914cd069dce89c2991609d8652ea7e3d5f1968c01db85a4f634ea36fadbb93f77ecfa5b1f21f5f292414acd484fab34c5889c1b6f5f68b3a3bff5030c5fa56a358565636ea2f66240da6a956ddd26712297a4ed58613d6e36944c9f22a46994b106a1c149a9ddc2b3de80b01ac5176f0c0f33ba767ee0aaebb9dfb05b8b8964153f01e3c634f612eced06940747b0367786abf0c665f01173e3d8c54813a86c6cd16e315435bff17356a5a089e8a42d1b281253e6ab50b2a5440000c43ec8d89ed530db00e3f299fbbffbdbc954db4fa48de1d34519405758ea0c9d3e6d0c60f07ca6fd57ecc276b2a09cbbe3bead92d7db71f51de6f5b54fd7ef8653f043b100cb7eb6c3e16079be1e896a9e3ef3c4146d1f6b824113f45fc9205fefb662c371638f15e3dda19b8d4051249ec792da36c84a3d7fa30fea04e536fbdb868a5bcad9a740b6b109e73c7974668f490e96327704c8c2c3c6e19c417cab539a61c1b90c6cac2bf1aef429c34a481265b759ac1b4d659d491bb3d9398744b5d0922092390296196cbdb8c5cd3ef9c43a8dc885102322a69fcdbdc2f2932c64add4e5138ffdf5d835427968bccf024f5f325b2e8e83238a7964c7f802ee0b276ae0c8bceacaa4955df3074a0e02bede20f5a1725fb96c1530220f6ad0322cf20c98d93546e3387fa91fefc7bb9c24161c4f54226da2333e9a86f79007df1fc23c886c0013ae95bc9fc055c8af46e9018266fdffcf23318181826184c2137c708889053718cf3ca4599d3419c02d1af585d3f2b6ca3cb5e68a2ce0d8e9ab2ece7d16c30deccd6baf6ba37da7c3bd9f714c7ecb69cb550185a18427b5a2b7c24c096be2a878d6928adc9da4dcc987698d9f8e87cce5eda7bc3b3c16d47ca33d24d9016289ee5d96341088e5ac02ca0487b5a5d7a7b33564eff6003d9bbb67b67e1cc0211e6f262a8ca7ae162adcfc393e2351e3c53d9a5961829ea6b312cddd4c5c488a6cf62055b280d1aaf7a04e061e01d67127f3584deb8df0174dabb89044b729ba6cf357d63b190c9a571b0ee18473ac391e21e734bd189b757a590292b0b13d46b0b9ac2132608004c5d16dc470d3ce44bcc25d5d7448788b2710ef01c20cc3cd0eb7126460687e38082996fbdfbaf3fe4d0f9f6ecad6dda6835d346f2a9579cc2a59330d0ee4173acf81d20f1a1076d192bc064606a499facb857832c2ead13803e80c266b38386e663337e00e8cc6e3fddb78fd3d15e7ea83d74b080f3386175e5862dcf1085786333e0a9610292764b25cd3691c307ddb19c19eaf5e07d318aa144a07057cb1aafe362d72c6bb43868ef8cea097da8cb761fc94062125532d7d07d9dc0a58925d3f7217b92366f86657b074ac7fad1245e2b8ebc76b13efbb24853ce475541153c7a99f0c7d050e384fe73fb541efc04eaa2514fe06d11a33e445def523f76fdb8c62f82c44fc6ca658df5eb94dcb4753cae055e55d5f73adf0ca5ecf7f3a3861b1e0e0ab51e0bd54ef88e9817473382ba623009a83f0e9cc460d00f02fdc7aa5cc1d6262672472b9aaba1f0c80e73dcadd555e1b7f7541a416de692847416eb03f1cf4129c445c9dbca4f7634291230cb5be422414958d89b177cbb12cc3c0de32aa7809544937a0cb38aa3e234b530c3164a0a8d58b754e9eddd9f5a1f50ec1a96eaa974b67f363b33c68def037f830389c6f7ba184d91699d7168a098cabe375a60270338174f4c6098a4885b6399e1b80a291177fccd7938f838d0569bcdcc164e2bbe12d33fabcef2bfb614846051a0ecab0d04c80a31d8f2752979b3a2eed57e78b953cf923476f7124707115d4b654cab5a7f58ef71348bbbc54d0075bbc3cff439671bf31918c696179ebbb8e8ceba671af4fcc3e9a5b070c8c71077cb247c2d6fda0ecb78cc078a0f84f5c293efc5dc09635694fe343af303e08cec409c2d71ba248eb563e0c3e7c8b5ecd96f083d593d3f7ae42dd1603ab72fa53f961eb3c80d9faace39721fe31562050aff7fd425570b68e2542b5a36e4b9dad1c9418aa60468061112ad802c49711e1c4fa98a0415d553ae3a9b22609488c8ad94ec65c2cc61e2d6699a826cc32e27e305c31a87e6f12c483de47cf6eaea2e867b1c5b3ba907602fa5d81e549f2f2037f24d1955d20f18547e9f9f8c2afbe3cc0685b152284a0ac4c32707565add4c21bd102ed9b199ba15571974f856068f541c2f4d60fb005456032f22404f28680ca379f7882d2f725baa4cf805d9fd1e62a209a481fff0048bd35924ad394e1c25681d78d91ded3dc73e94712b7a4705fb5ddf2544f90dd747e74762801e9721ef84a2439b7f8c2d447eea41b3422491d5d18182fae083c6e4ae27cd36e8d2d17cf89774de8b5824b37828e9878ce46a9fcd8b4873c17c9bf49c38b7d9adbc37fa465ead01416cc378216496bd081262ab0dbe6e3349b1c5ca24683efb153b4a8d863c031f064821e4a6affe9f139eeb58f112d22cd7cee57accb377dfad3a8ca662c46ce9b2e8ce8fa5e949f6099b302f662aa3af67afa94761dfdb0e3dead83bcfc08daffc31dccde16f846225bd7d52bb78e34b6c37fc535da983cf6cd2cd8a12f5ae83049435e9d3dbd287c82cd44c7a96b39829d8ae3df60ce32ef02b7076e9c5861d2492625c8c108914a769157ed3ac27b44d878da870a3863a5fea08a6cd11a95adadc863e865fd0837a4b65efd5a068ce42235f5b0ba286958f430b1f050f8575b857a32f804a147e2519dbdbb0785e6543da257321be072e0b7037aecbfe339bfba583e969202160256f72bb75babc3b3ea9fa38b57263bb031abdb325d6272a51071d4d7a74503200e4eefeaa33843f35ad631174292515abc299a8d891cd94528cc30fe9fc514072bce17a85a588e7e4ae486f12fc2436025c71aaedb6cb5662e85763913d394c926456a7e3b2b010940c94c8482d231d46c60841dfaa96d23c2a98623e51282c6d52291e5a702d10b454c00d09849a8fb0269953d98dd1fabced0f35ca8faabd82d05c457ebd5d22a25ded40cf07a711fb34b6de6053c874cf962055fa72c5ecc9a9accaea1bb690a0f8a5ec9619fa1cb505b0b416dd98637496d11d0b9af06cb040067edbb42097c9506a09845bc739bdcd819e36420a191986b4b8b7c4459b7187383e472c8fd3013861b3f2a9343f84909bbe4f037d2fab7d52f52adf1fcdf0f8442339ba5fb81f4b55f78faf268fb0f3ae4cde2af618dba6f09ea7bd0bc78f349bb823856e4d217ea7a121e7bce0fadcb73a28c3980eb0fed3a1f0f9474f237be929e86b78a80f1127a3555109658238ec2cfd9c942b5cbb225187f2096b168fed54b27a8124b03b5971f6a80bc26c896b07c3d2b022f4cc4a8b5ee646fc0a0c90d46a7b6d695793b26d83175f5d777609c4e3ff935934caa4100b3b01e0bc495f2a9024cfea0aa733be587d26dfed4d1739b23014702d7dde14d72c0b230a8c76cdab06b7f466d9c0108a75557d4bf428ac4ad02ec948cac8314faac0bcf88ecbc6dbd651075085707e84e2a3ecf95abffffa633856e1b76ee77cc0b173d5b862e244731c229e6ddc3d7af8ec50db0c741972a03bbb65f69823a16b4d31a643fd1c1464a90b2167dd1e654d7148135297f6f06bc3ac71ba673e529b92d4feb44275edb62388e47f382a65df648718a21a212b4592c1202e0eb4ba9efbcc716bf87a757e9260edbd8096ba5f272fda76e279b3f1f8c5110a795aa7b448390f7f04e4ceef046d661a90384df5698aa34c789d97f00f33dd20d8388b4440b73379eedbfe10a86a1dfc8d6b783e8b5c90ffa2c46fd73ae880ce10cca5fd0dfad2ea28f829b7bc3bb882e82fd6c15f341aebd1e8ac127400833a47e6ac9d4a9629b694eaf15cce58558437679ca33376ce1507829d70b9996b9d06b4d17c7f2ad28a1f680f1d62c7bad2c1cd62d583061962b985d60e303f32963cf030368f4075620f4f0ca7d1b306d5a661cb25337e24db0d98beb599453a7cf1e70618e0797c29581d25dd3120091a366cde2413940eacf3e98e7730d00fab345a385d542258a60d508bad478f38ef7fbb0c23022bfb2c41ebb71e297cfc879075138413ea9bb08a7570bbe5c550d4e31938fd5cd7333b15fb258dd8727e150970dd5037e7ea4b1a484fc2029a989702f41f19c04e325d47c01f9913e1a8fd58822df781adc547fa35450c27c1c59a085b7595de8bdbe92487b8f650a229c4ff3f3db9114b1cbde112860e92607e5935360f7d5ac0f4cb1c9be1deb4a3e601f59c6e05d6d9d5ed22d85473991d6fb5f418b317bb7d0bad3f92d6a987f5ac423195ce89e566489bbaabc81c8515301a62fd6ae5e9dba35684cabe0c600215e28a7c43eae72870fde7c1622801d243bb9cf45add9b9d14191509a3b8287f9e0d7c5aefafc50f144db3359bee1fbe217935d63f6640338b0c0696852f19bcedf9af97d0434a9c6c0ec085e87f8153274535560f36a16b2de1dbbf6b170658f362daf22322bb7a28805df402609dcfe7b9341f28631e331065420ac5e1d62f197d502c85280a8f2c3e26cc3df366bb36932c248a917ef00f5c1d3543b7a6ca8629d0e02241825722e1015d32f4e68ebcc45734fec2bf062ce00ca3f87a41a56c7fb2b24ee3524b1a2d64fefcf4ebe2248e9ecd87e82054c7d8adbb4a7b33592725fa3c722ee2ebdfc5becca9a1de95ee0faaf754a064f01775535d3a6534a338d8ae9403a60ded7551e927a828dc0fe5d3114cfb7f2fb481ca58795677ecdd938c585d64852b12e038afacb649f563b95f56089710df430c171869dab3022ff73b9874f31b6a9b605aa9021b9f3f1321955154e83c6f95ad9db5c58d23dbd6450908525088ebad775f0b03afbe7af2a44abbc19eca12b5b398cf7fbd2b7b2a106b63db0b5a900e89d56228332e1142bbacff9373bc3184ec5de0e1b9c259a49c99bf7b80366435c1b20507419a2c50945cc5c797ec75b75717e13f526b885b403774cadef7392f57bbfb0de49710279815e9426413a2dd903c08bc78db1e3a2f9aaee5b8c27539bd474627daa7dfea2e91b1bcc11a2f158b9afe0bea458d612a8d285a982172ce5f5eed985f9f638891368cb25fafa97a4d983a5a8effb9970162f92b27f13d1da3471ebe3739881873b7c9990a0350cee6cee06beba9db98452351288bdaadc0ead7c9ac134099bd15134ef2588f938f7f23d61e8e628ae98ff00620daff0108f6160cfe3b9607901c6797e1628d32398419ec2a7a7845a6c6e1ab7461985e8d19ecc84954cf7bbbc1a1addde216c3385e257f78bcf7ae038019b0dfec5d52560edd75c0860f05fcbe652fdba362bec5541d104e9825296980137980b6c24bdf13b7a267698c9d35ff41095ec2836dd55f2925660294d43b11e98a72d923cf9f12dad565fc37fd8fe710872cce5753a4f76dda9a5583334f70ccd42e8018f0710267441bdb09d79a59eccf75a64a42b984f4f9864f14167d405a0b0a01d1d13e85a79ccb03c6f78c32d9f243dcbbe7ed2a277cfc0cdf699c01043986a54b32db2319e68573dbd5c1528184c9d7659443a80ee328acd7f111c3a9bcf562f1dfc37ec5803f310f19f467fafdf4467dfe1411460e950ed0e1005ae0bb457c20b71e369f0e296e37ee51cc02351b45837ace2d2f6b703d2b9b960e739e66dfcc0a181c92fda11f35bf7ce5210ad1d1f2c3d68724d9c5cf16cff0425c4c3b984ef2d2ff33d68732a353ff9a39f27f7c42da2aed0fc8040762785f1ca872dfbe311d8eff3383baaf06be42c8d7a065a4ee97983973342c6d67ec1ec65fb067ac179e4d0857be468f35cc17904ed196cc2e9bc27a8536949424789c2ccd3e5e734b368245667a49306639218474c50aa99f18af7bbe019da5bfbbbf69953e76b8818f8307fc6e581590936eeb3d2d675b07ea7a1159f3e176f8e06efdbc7d65277aa1206dc341a48eb0eaa1cce367bcd02f326b8157e56d7689d918356608978d55d3ca127bd5556611b98adb6fc5f7250123a10284181437e8ef7db182bc7a6c2eb3e8575632df5b69697251c6f90f509562cdda0c520fb1e5530ce93399660e9f6193275ffabecbf79140c379a98b6e506947151c1ce4c40dc0ea773c5f18d2470386b222376f5aa7716ec3fa82927522e5a152509bf5cb9646cda0c1836c74a6721fac64441cc296db35894dacc4a89dea51dc68d52ce148c2b8d968a8d51a51645a72e8e4758cfd58ff0b4e81ed068ec1f3096378bf5b89b8cc929f1dc76aa84a803b849253823c0f4ec8d9a3bee6067ef65f6c9a939e662e2faf19152e867c3dafdee2d2abc1e282dce6a1c5c26488cf7fd6e255fa8b11f26c9e9d82c332caa461c5631f12933be88ad651edaa00722b5e7a50e6d3e5f90574ba3b7e7e0fc51a6c1dae4eb1e3de5784ed90de2e5c19a28a24ae464f94efa05f6871999a621ade65a58e30c1f6e86f32e169f5d840fe7607b701824fef3a69100c24469454785088d118801358b7615b1f33aaf9bd55f24545ea285765c238f0d6766e7270e411061bd84bc3eda2a06321ba3253d1bfe8af8e6801b24ff1bdd5adde51a3f969c8c107aeb96fec4129d4c1d1d37fb859ac3ebc5bf13ada664d820269450918d13937d57eb5f6bd8241e719a33d5aba32799567d4ffca85c6ce0a5d871374ac4a456b023aa62f415cb54d78c081b0e94dd998e20efc83cebbd424c1ae19d16b221c293e8ea3559cd6ee5980f6f10fd95a5765afc044b0cdf1910c37c64826ff8d6e222c3d06eb93707b67fd894962830c2dd873fb07f00be9a88d3f72b9ebf1fae57aede3566e3dc3bf9fa77a6a654f4ff078f5b6247fd98c2c13ff354f3e8b8aa936d1c79591567a79fcf8cb314deb1dcb3a4b4f4345c3bfa147bb0cef7badf2a81488e4b8c84b97a51ff860e7e420bcced7cc535766ad8eabe0096eaff2134d3757ff2806c4b3f33cb269ad03acc363f4910695ee00037d7dccb3943bc2a53cc163d909cec833f18a25ad710fe4a9e6dd50ade177b6f1d95a892e5c02cd4a126f662810a786b4de25b80adb4fe2d1c4788ef38635f7203d7aeaff87f1f88478572b972d9cbe5de1b514260c48af0e6cef63b36b1ae5754c11f4cfbe8527301a060fbf50a58c5e36b334335478277851d686255dbb1944bc47e25383fea7565dda0f71b66ee9d466ca8810e54a94d1fae193da34cdb55b404f92c26cc1dc31f5c5549a005712801913a4737874de2e7b513c0877122cbd0bb4c9896e9d5fcc2fe4ddcb0bac49db15f2e1f8da5b397cd010e11f856fba0b9bf127d27158ed9876f46bfb9d4fe76579c00ef8a0b394d8fc3a228180c9e0b88fb2b5c82a0d5841f0f9ec7e5b1b7ab03073da70f09d49eeda592efb2baf5d543d8a381388f03c9f5b23e898980400f0924e4d68331a04c3cb8888dd642e0b26446fd9c72b778785ad4330499e3d8db25779b4c29517af6f9f66bd2627450f6b073a430d0fd17373281910e4f824ae917598f9820b04096880d567b155f7af5eb087234b7f6bf672a832755e48c325527aa452d470792ba071eab3a394ee28361873d0940128e0cbfc7a750c76dab57c7bf2e78d77eeb3e55c25d1e940368524da4e33c054ad386486ec83137935415bdaa02d8c382b71b183490da04472f906f5515a7658910574463af3ef9cc24e5548dd13577644e89f91c6dab424c326af9eb803ef7c4dca3e440da1aef2f46068311643fcbeda7f196ae218e493ecd8987ca4535c8267f1ec90dea83e17eb2696a2fe029f4155637867af3c7ae9d7187728740e2321ea15403eaa55a648318a7c5a181d37e3f93badd523eaa5129e530303b0207dca2d9073b99f3dd9562efbb516c2a871c6cf76c132c300a71429ff78af70cb4a0216b6a5547151b0af12b6177d76eb3827485244f3721e647ea2f24d54430d638fdc0251737885022f6041e0e23c671d95be70b66755fcf206f32adbdcd4af7baf0ff58c1167479a292321679ff5575def609ab83d434205f4bae7bb6117aace641dfd8b4a2111e2e5fccd68159290172341318109512dd224b3d76766dc2c65ad47493a8753c800990767d60aa6610ad34d597c99ccbc6a9082c550d8cd4b78528b5a316dbe508109db5ab29ae8c30f4dcc912232b3ca9a44b1d5f303e9c845a533475be7cd351bcb8d2378f0b99f06af5fd8532b8e04195ebeea1c20ee22325058e41b94e79af5255b391c8110f5c2bdc1034a621010fdd0c95f35aa26ecb328f21397832bb29ec2310e1315638431e5d06b49378d84faa1928955b6b140b4315936976536d46f8b0b9f344c10511b03df45f8186b5e35916d040430a530525d556f8c1fd1501ecc036158211227a9bbb663edcc711a0a91ca4edb848c3fbc3aeee82621251032991a80e95731b79992092e470614f1e34b2b7234f0b7132649040e979f4786d3457d18c5119f1b172966631a7c3179ce9f2122f1885c4da89086a19dd3e5e1c3d6466ee7b0b9254e67887f62022a61e86326068c556bdb0cce0eea15c8a78a652a409bb957b91862413e3b16542f1ac10a61e0f07a1a9ace12a6dc84c179b0d5504997389d104975ea5ff3f3c9c1a0c3e005096ea7e75573a39f963162e069dc5568526cf1cf665a287b2131f9c21486eddb47484ae650dcd4017298e5a47430058698657c2e9a3e3c70b3e6279a53780e24a3bcaf4d7f3dacc48378c3ac69a5b153e4e42161dbe899fed238f5e0260243d2717f61af77b622b2dd3431c96852803101089a494928e50a5cba07682ecd471f494dc7f5d8da43682aa521f74a2985df605f19036916456a05638a12bf9c7663faa04ec4e21b36970f02a9350667bf5cd81a42f918904048bc9c5f5b3f90519659ea361ddea7c4f266621938c7f99545581ff7b34e55d98031132fc2242571307a9435844b5feec08296d2f80d9be3ed4a03b061ea953a95f48a810d21a5b945891dc0f48a8340474a093c704508a12ba9effbe2f062ea2b42e1819266eb6c98144404d028ef869ac28c2ef3e15cb7c35802f5e5a1ee0a3a58f13dd03968f81090d8e0e393b41b7885b9258f5f4a930dcb19b881c17b332222c063ff29e5566a7f24b23e9dec18512ba92c94fb4eb734692f53fbd3451599c6cf456b72d2289f7bb2afae479ec4d7e1af6dfa8b24f94b4d03379b8c9302664e9b9c7d6fc4b42d82dae56f0c8e468ada40943c22a7cc3f64a852519f739da2e37d6b9c58be9d8b0ea519b09e8df834001226c74ded1c78ff3bc93ecaff34a8e7f16c8c513da84e416a3fcb1cb615bf6bb423fec7be9322904bdbbdab405f2d0ebb17679fc5a38d06cc139a4497e7d2eba5dd82035640f505c3f784b86e0c7293b2d06b6142a08f508c55449b8396901d3a5fd63ca582710adf3d970faa257cd805b761c088247affb72bd13b6f3867151be7a332057113a8f17e87e54b84089e614ef784684d7de9dd1f11da2466721f495dd8a03a73f464ce5059c121d1f2828830f06779da1f9b85ea95887d8133c700c0f3ef26362652b440ed414702d6e1c10d686f18f5db7015139cf0789856a7c34d264e556e52cb1c46e3894b86d6dfe7c25f41e34262058b3fcc47f420733f0b56e22a94aa743f98fbe7e7eac8a30a4457ba92a51cc056c79a1a9dc7a15c5acd592f741285545a2ef8ec76a94d7073aed524f7d38e86a941c979fb4c9ed1643a2d6ee2e413f8596b66531a79f1b4a60c84604c440fec9905b85758dc7a6df8603d8f75f8b52e2090fcc57a662634920b4eedc3739a45b4231b74a47686912feec7b1f4a4fb94919b4c071429885ab541eef659ae1c6840d8ae44c9d8319ee73f24827ee92a7be9a7453da877e227078b30228ad2841ac0b67cd6cdb1cdbeb5e7c8ef3cf3ddbb3b8571b4f33567b40bb3ad86b3b3d6a8eca2a5ac5f4d80e67be753c837e040e978377ad98f3aabf6cc49508f91dec09866997f264f5ec82a63b8ab799a39f802cfe4e359c2d5512add5d6351655e0d6790e542ad0d5c087071dd93183ff85720522b0287c091f76cea40942b98d46cfca4abdacb2b5db7b9f315d54aa7741387b7b4debc1ec8d326a9e4e504b38756de2e17e18a5893169886b39d28a637617043b07d3711f20c039a4345b161d575af889aa935cf4b1163e99d8c11403d67a5a4ada7722fde70ee0f7ebe044421b3a3be69abbda06b698cc4d396ff44d85373dad5f429a4a8940e139c64efcc7b0b8bdc25cd029f27a21a1a521949fa116af9598f4fbb4228e9e0edbeafcfca5414c9aa794756eea7eed0b35a9f40fadc76ba7006fa4c4801d34d5a8f2b56a2a76267590a10fa8dc9166b256acdf20ba05a7d0a53a510569263f791e5f7fa0f42e6d45a6e848c1dd764edc6ce948a124b2844cd17875d29de8a4e3cb96e8a854cdb14863edd85191688374f57bdd4861bec92c1c57c9b95e123ec7d954cadb10a17f82573210a62e77fa6b8b598aefe9c8438298ae44757f1351d3f7880f3a453b661960b3c9cadf1b05a3754f0f750955e55629e3977cb1b92d885f6cd35b298502f1368e8fb3a51c5ac7292420be46036b9ea566e73c0b8c8ee06462ac44ee8437be745bd79087d0663ce5900cc4780ec54922c01f817e2428e741a69e8c9a29ec0582925d4f72a3cc581eded230177d1a8e4c790ff26f68f9db9861d0ce750566e52546da83e6966f9d52906c582153c9b8ddc1c4dff470df9fd66216a219fde2f599a3f4eb9eba2a6a0130da757076fba8d1c98945847d6e71bb2962989befefa25c796c762ce746f68c1df8bbc84d461d570a60152878541d3af4a90a59610ffe8a690352c8fd1a9903b9dbd859aa3682a58e2dccab44ba123ae22d417de0d5027f70d02aec5d38854abc03b536dc383bac12d4505c5e7908fc4a423852ea9103d0ad17d3df9f407d3cc7b29587ddf1315cf3b8cb174f38ca31cf2e2005662693e74c0d81336d668e075d97fc35339808e399c5adc3395d36ffbcf7c63aaf3a405c2e9abc17b1e66e21ba913450717189de0d13874bd4c221f3489524ddedddd275d28eaacb182b56390c0dc601ccbf671a7aedfba61ab625d5d2b978d44a36b95baf5d8eb92d9b5d4251eeca91a76acc3565acde0a77f62b1d9ac04d6646e67e885ed0b9d674b02c5493664fd810371d99ad86efca53fc5f99d48597859214608d8680a911dfa68fc8ce6afdf543ce292ab3d6f4be991561715b35abe991cc9b46bc0451a94f9d6d83eb34220967cc5567ede82a699fdd0ac120a567985eaefe1c716070a4c395f1c9673ed18f32da7ad8b295d7cdb29e8048911f5ed54d82205da3fef1680db335ed0612ae38f741e35e87b3af0a4e84a8f05bdb4775570d73dfc6bb09869d44e1ab7446dfd15e2fdcc7a177748f330c99655e2dcccbe6cee9784ff672a2c6c71318b2c747cf2058c37308d07a8e352275c05b48f27b7c10c8096eeefdbe952221faa8644a5648677abae036fc564d18736495dd2cddc42d1d9fd5bcb3262c7fd43cc84939f3c9acf5465c7ace5f9c49a6444d939234a1c5d87c145c10411d9a8dd6e1b0c854fddfdeca367acd1a27d69c7942a5f9ac014c87b02061e5328d9643d14ee217f14f8d6ea630867e865722d6f065f0254c116c3b3427ee658254ef2965595082c4916530572a79cf4c69e8785fd57639a96313d1ce071ee2a3f4544cabdac6dc6caa046d060571c5a8345f08aeaf3b60451bebdc68b985729ad593cc90afc909fc3adda7c91ac1c027f54badde0e8d67a181844e4d74ab68fc9d89da42159206f872360a681486d9b88437a48e8fbaad65fa24aaf7bf11605daebc058b88961bbb74c483798a33854fe0812949ffc0d102c0a66fcf2fb70aa459637897e87489005721f74494fc28ceeffd677393d1c74748f9e11888e162962c448ec87eb5c172af938fbce5f8bdf0e13676080ad8c0fdf5d8a20bb163317e619b8f4028a9be4d35b3ea39d54e3b5d5845ece661348ace97657ef1d3f69346ff0898a8688eebfd82994446d117527e9e9b492e1d4095cc673d8d06c4bc7a6a836d3ee88ff68192245d49b9ab158193ed9c2418b26ff6808632a38dce7ffd33f9e23126ab9c1c9902bc6ea5c95ca47e8da33892f4c4294f4cc4af76ac7eacca1bf3df1609bedaf20831d48f6e921545b69e5c0df0d376e1397f7568f4db651511504f1749c644d993233ae26f7834509375f9fb06c000f64171295c99b21ac15f49e91bff3e41108b0a5527fae848ca151a1dcba38e9b52fd07bdb461e144f5aa53220b69ff3c788a5f80f06630ac9ffcb3421531f015880a16d68c154c375428ce80061d8893ce7e460097cc665b2ec06d434440e97218f22363be2f5ce64d1efa26419fdbf9d9c2cfd1cc0d5b55a57d06ab561a392ec354f59dc471e68ee0e1a71b980ac182018011d7e0803484e2960707acdaa67bd68420e7d4770483a849d7d74671b040e80993c65c0d4017a3a395a2da8bdbf58741a215153a81f15b05a87b93e8b484fcadd2dcac4f451bf5488836960692699832e2da270fad2529ee9495600b5020edbb58d4ea73d6d38bec7d5f51ea8e8e85e41d34b98ae141cfbb317562910cc10a8360356f8a61f3b992365e268341016a015afc3d6775ec9d062267551374e09d5aee79759846ae3911839957e3318e5ca9aa748d4c7797d25d55256cd71e1a85f096ac3b937aeae2dd81b89f7c5bc48ce15ad3718468f32457b070fb3b6d1689f8e7da673a522deabdfe8cfdfa2715897f08a50508d1c4f54fc9766d2386bf9b0e79e0cf976c431165d81b11817b999de6def89ce6af2511f75e34cd36aa703bcfc8aa76e0cc3fff013e28aa10b839a53494d939a555b58268f1756ce29a0c5d908ad12ddc3620efaa330229dd1119ce537cda757922b6260a11cbc87d53c5f957ae88229f781b29d46b737dbaf0b64ac3f3135a2970ed24e0b0e2f8215067ff1bc0cd95a40aaa7201e4400b335552968220a8450a0355120e0f0178edb6cb4d19d06178d30a5576c500217e4c2f6b903099007f39894c673185c945da9d3568fb82bb9e64fe9146264565eb5632c130a871d056c27dcd2b4e4c5004c4efe8462e50181951c08c88cd197d0b45922ce4fdb73830fc6fcfd05dbe447056fd5090df663fda66ff9ff61722351b6e3f9264fb59663eeb8dec00d67bb5153de9ca784114ae243c2ca243c2fb483214385ce914721d42bbad89e70d2b58b8bad873d7df691433ea1cacb411d20879afe6c595afdb8d3ed9fdf55217a8f86bba43e56829eb53dc4f62df3edeb7e15bbb779a088ec6b1ba883abb54adc7690d658c1a98c7c5e68862f1bbfbf4b1d69a88a024e0e22c04f264aa2452cec0f9ce56f69450a9dc66d730722fd92a5ff195193fd841eb30bd8b276b41209c1b0c981e558ed1f439ca9c307055f4d18e61fb17e07276eadf1fde88d30dbe55383a12ec0bdab4aa9571d5e521d431f8da91fbbfec1d15e9589aebaf0cb8d7ae7dc48c69e3b84d231cc6b223ed075f0ea2e67a557c45e4d6f2bec5252226152cf1c63ba42ecab3ecadf9a5d3c237fd1797dc5a15404678e7257138511a51bab8da6eb43d13e307b61ca1aff0d9c174e180725d0c2be8ef5ea706826293ef354c46743e8b564c2b66883873ab46423d67d7a49f938f153e737f9efa392d563b57a8b67859bfeda791e90ba568731af2fd01b3014304ae04d6792600479d5523ac437052d621ec1dc312778b270491af88ca59988fb9d87b8702e08f747e431a94743d3d482fa3d47cd484bcc52727a26a396dd832712ab807dcd2d6c0bbf10ae375ffe79b72a03ce9e43897b5919c63828b2285afcfd25a298f9489d40e66fa421dbf4cf6f45e841535f80857ae219fedfd6afca0d7a13568a4a5f4ae86a88448ec5f7eb918416d93007f551b3868fe71b4dbb543dae9109425f066217eadc08c540986da2e092ce4c02ecc400d9a8136ee525bb4e436f61adf9267811d69e287502bc95269053aeed360bc0852009ccf59f2dd5a1d43155270f2f64ed2b9d1f63a325f1bccb85ed8fcf21e8c893a73962f89df42aecfe7c1b271d30cef8989c287be38c683d49e1c3921f040f802439a8dcf533669265250daa9db8a41b695e629aea3614c81a3d94018c75ecba78eeeb25f5eff5e0e6760ac4748f2a3f44dce6dbe35421db8371fd537ab73af7ef4144e7361bd079e5f449976fd69663877d69e68ccc901b4ad5cb53dba5dfc384d8c157b0ff5e9a67d92fab80e02eef6bd1e71fcb84b211435ab5ce4746200a91ef0eba859d76dd39f89d11e22ddc1328d2b46957fb248292ed74b473d169ae93458554151af397fc6c301493fe31a41c691f5d3a977ad270bdb89e892d121d4a9bf4fd5e6ec9a45128e591e41729e53301f2af608e65ee78ef34f5d7dc7e69f045455389deddb788c17f9d087cf8c7fe19821df2bf3758ec4ed6215cd6977f81097ed6fcbee0fd24ed3792c8f8fabf71d19647d8a3eb0675ac813ce0d437a5d608236cec4f2dcc2db33bb170c1329a652315ae657a6ce791a292407bb6dab6391e1b9ac58e2ba40aee085b88992a55a4f09247d4a2345ba758cff9488fc56034063bf67944a207b1711f90a42e85efc48c5fcc94d0234276581db4c5c884f021210e5750d863330277ed268e13821da9171bb93baa7e7245b022edf1eaba5c8c8f502bee326e233dad0204e095934403b11c1573146d853f855f3eaafe18ab048136107b0fb1c472bdfbfbe0113428ffd5e38263deeadb5bfe79184b3815cad6630e97f7f02250d772851fee0728cbbc9d1ffbc7d9d5b6900be71f5a04027d483818be73ea158b2061306eb0396ff95e4bd00191f5791b84250f2a2f221e4909e14525874d20fecfaf75f276d429ef79206306a290ade6905e4123d804d7cdc2264ef431671998d02a23303fdc45dcb999f4c0ccc3b86508339aec9e427d422138dc7d56bdbcc9566e3d9a73fc9f5085ed14fcff3eec2bb39272b238f581a1707eb21388595e6921d2b9491c1c94290b3a1474ff46bcb39fa679432059968c5851eed8c4aed84b1c700549f3a9d3710b2deead0055f34769c97bc4f3e9a002394a23517970810f0b8943dba3debce50fafc26bdcd1a2f950973922c7000843ce535d8b31f5e9952131e30176c402abd55209ff692db551a8b207be7c5632a4ccf1c62c8f8052c08d0c1fff8a209cbad795ee678bb81f99bc665cb1ea0130d741f916f232c93724ca1554735104ccc0117915d238c661a91641e9fad815ee3dd82def309039900e6d607e005688b40f27009f251ad43a4d1688cf8bebd9cf8e628f3f78cb825af97f9e244323e020344d80af1fa725f4f7b7fac1971ac415d9d8de135ee9e8e4aa283ed8b3077833d5933deaeb0d90b701bb631fe8f013b49d1b8a2e088fbe49317440af1cf8e124c5ed232d98faed81410246a4b5ea59a5502ccd689f25ae3f136d38e3d990aef26c90324e494663ebf7abd48d4ef6cea882dd23036e303a6a1ffee53072892898f03769a6aa73503c46ddd7f3054cef3f43783f873e0598960ad4f7dd2e344373ce08de0e7e6fc1bf7e75c776355af680075c4475bff0091b51b5ac394996f35d51c4fc81b598bbfda66d9d8d084c055ff4d7ce62c18ae4ff467b01a96a66d247c4a0ff773ba35fa59b828d8fd4d4c4d344d6dd612a5460098e300308ae6c0dfd0614c1289c1a5ff06bea61f11bc683198185f218debb1ca9d69783f856467b092d269ce8c137b36e56619a09170fb7742e0bbe20aec3d365a627bc63a6cb8bb1c4936a6f89b1337d10eafbf0690a7b4ef3002cab64a1c3cfde2f0332866612a0fb6ca32e0dc6da97f26d9f05174251970dcec61c5c56c8be6f54e2cd6c14c5bf7bc783571932111bb39772ec2896d77072a563167bf1785aa35f50019e7f6eccecf61d97b2ecda49a7bbd12450c5b3c3f99d0f333ff61767019e38b61a648a7fcbc8a04b8881cc723e9ad4b0ca6fab5a0dcb3064abcf26e434af2b9e18cdd623085271a416a29fa15ca37132bee13f9c055f799eee94af07cb3cb8c6f4dd27468e1e859b6d6ebd2d394729e3c484f4e65df914a6a6aa7e88309c6ea34d332838a7de86a3df9da8fc41e12a8364514c83af4f80fcaabc0a1bf9f270e75fd36ac07f1496ffe5df10133aead0b6652236b33eee58ececf9bdf53023a6f09f62a749449f4ff4e3580884fb6dee15e676515b279390765f552dcc8779d616db8768711de08dd0b046ff1bd06c3a4281ea4b6f1e297988727fe16c18a3b1c41afbc39233a347b1730f37c821041b3739da87d34e3f648f45a5a1fa4f4b519256f42841546c27c997e4c7e518e6509611a55bbf9a6011ee195ba323b0c2ed6da6dd1cdef912c07f3f93f72c7ed5d44a4b3cb3e58cfce6dc69c84b4bfc1466f174d30ef2a8f10da908b86609a4ce88611958b105e539e1eb39c86f59672562c6dd8b999ca82f946d77ffb4a04774472426d1e88323d0505e8e12c342d467a49b514871b99b35ae63fbdbfd0e32cbae5e81295d29a97d222d9ec10fd1e6e9b46affb7cf8b3a6fe5e539c2ef6335e20c36d42deae7d7509db919af22eab9532cdcdf7b748f68d4feaa47ae84ee893b28703eaeb51821ef741c7629db5d32acd2a93d11da74bb842741d38e712e8773ee3cd466360c9c42d5ac2d10d9d0fa23d79d1a8c044191ddc04d5195909a018c444cb4555412933635ba89d4c8f92eeeb7c38852e66a86fd4afa626d648fde7f02df07df8273244b017d9442ff723a2b4d8e91c1ab275db9517158c0d3eed80ce2bb79f09a9407dcc9ef1d30fba6fc046f82d9dd6dbf0c7cb2aec7539246e3ddc6d3e1f734ba80076c6c3052b2a2d4c5b3d17543ad2ffdc4ca2e0a3e258472206989f55899753d8f68a03460a4e491fe32652175511daeab752a543ae9e4d941f23b2db1c949351273997e497978f40b4c23d644f905d3f02a743b9a08352703be08076c213d0e370da7df345fc238777c4075f8b69996f2a158c38a9d5eccb056aea7f1bd11dbb7550565cd05c9bf290b1844179e67c2a865a36722b854060cfb6b5a7b8af5361a9342cc6091a83094b333dace0b8c5bd77d06838afd407671a957f343acb7a542026d75199aa6037fa1ff58122071541896221ccccf4c6cf2d9324a1936ed5efc09cb25268c2625e423d2b865b17be9f2666eeafea683897a1d3277ef8952fdbdfc2eb0e7fa8307be7eb206276858e533092bf2272ab84265625ef980f506d0289bd02b65c00b5e07a169d0e3571d9ae222f12cc4b6b514d7781e607aaba2638f11ee1442d61bdfec5afecb53849324a837f432ad5a1d35030ca70009dd1cbcc7bd4f2dbdb971ae89429cd559321faf533a8d14cded02b03d123d276ddc0a4901cd955f4d6646ed0b8b86d3fc46ea05a6e23a3de9c40625349d76242b59101bde527bcdb29268adc927fac79b871a13cdd912912057bbf24146d7245c5162cb4253427b2aed9b3ae1677a48e895a4515eb78f67893379ee97dd82f7fb022ffa5ca3c8d044f92c787ea06bfc2a876a1c477f848139279b9524cd7b481eaa41608ba360e6846a5295c740afcefb6a2f06545edc6dcdd3268367668b5f2b0cb5a9e1566ce276263292a5154e380722f204f9ecd94346795835a27ec4ece8c548d02d7c0b8bac89a14ac61beebd23e55d2f6f5a37144cb0773be57f105abf1ab7cc7d368f49b58b225fa924f5baf1d61217a6d84cb1669a750668983a654267d892c5f82ef2d0a323938828e982d9c06402dcf0bab9851e78855e1f25dc7f5a235cdaa1bfa911796c5eff7ad8e5e05988d8f8525cfe649f410caa0c2c9a1850df9ea447ecc3fbad76a5ffd93bc96853cb692912fa1f694011d9957e8aa162b73d4a5fc1b0a7f986c24917cd00a9b0972f011946b811f77fc452070a2b229976a65c94522243e243dad08ba44387198c0b1240c97e7f44f16abec1e9d19fbbe1c4b92cdfb88d2f6325e6c6f52db4a51dd32294384a0163356b18de2f7d558f8ad810546133d91628cd05609124c33e44998b55397a58646cfd80ea6c0ba9e143127db8fd6a30a165ab33c1a9ed8872bacbb464d9a7726dd73b58e17baa6c8d737bdc99a2cd95bd1f5b95f90e0d04496c163d6f0abb5110e45d41c7e0041f73095834bc318ec8b8c38054bef164359459e7ff9397e13bc103969c61a4a1757d2679a767d7df07f51343eaebaee07daabc29ab1ef8ca0a3aef465d22b2a6a47ea017ca32d67130214857be54fdf9b2cdf4df93c82e8af3c365fa92d99ba25a16f7d9b1b7c85484133cf79b5ea3ba4274f8dacae2ec9c23770daa0ec1c9cdc53fbc42b0dbc7bf31fd51c44aba77b3c1f993eca0fa8aea4c3e78f15622f6749db6f5c605dd7706ed27bc91253c62c159bd082afbadac85b70433dfb4b4193b5f9c7fbddb2c95c8b520904bdcb6ef04d636ca34ac1b95197928103461a61a87085c1c4db58fdf7695be400ba7a7c4a9401fa0afd0648a6255eb6a9c31b40d7f119031927a1b465a38cc01ff14f5c85217acaa825445670cce30e57446cc1cfb68bd73f60cbecf3962f95cb967d5dbd4657555dbb32dea81086c4c3048dd49c68e30ae3f8589d4f29b264d06e187fd843963e7bbab60398db6e4572640bec5249b81ac2cd8fe49cc567abcb62a87b74ef112fef8d0cdfe4abfa5b811f0e3ff1e124187a8691639a5977f184aef157ed294b9ddd41d1c766fd3f51c5ce56973722b4cf923793f247e767e4647e7d70c90c98dd56c1f1dadb6eb01aeffdaf93d787734f40f4f67e30a8879529360e67d5c9f34037684ec3f4c59d18e97f4e40f5daed5a88fac7866b61b36f63f45b863d725e1f0ad6c3a19aac58b216dd279a1a25574cd362bdf39abed0eaf095727f190d015ed4c8a6b89825faa63e6cd04a69debcb2dc82ceaa598103e2782a90baacbae4120db82d505ac80b103711d2faf750209a1f1582ca0742b92d34eaa0885c1db42523cc0427ba4f96353c15af47081c8d9a5459924cb6995577e4e6478fa1ccabf115f4668b75fe3a1ad76b8ac9a4d458165ca5e2b152419c4b318f3ca458317399ba25048379b56b155c96c750aae1bb19fe174841fc4a1b5846225e53c976cfc036b3d9015093d775f642d244b5cc9d6ff32e52c58b921b9cfb675a003e380e32e11ca36d3c74ae1cd3ad7452b2c02ce3dcd6c189e9e1797c5b25f908889b9346784f76d484971edc649ba6bea8ef1a0302166018f01bf8c3f32f0e866cb87d4215b31c3fa37c0786ab4589d1c8ad13926615dac88bb7c0fcc93f7a993241d0273a55a2b866a7729ffebf801caaff3f48eff589c0e4145e6752b70f891764ca6c466b7ef745cd1220ed77905bf653ed314079821747c4b42b5ba764432f7f3ddd335b38182bd871cae44916f11dd3db8bc9cb7addee728bbab84e66de525cc092fbd75a01d4dda5499c19137f6412e5bc056ad7eb31bed6bf4aadd42fcab68ab6b2edb01147374668d328099d4b596e305dbcdf1db6f989faa442ee24bff07d873b437cb9e6fafb3ce51d87146d9dff04a05c6691f658c9b1d081213d666c1185f2eb937c651f8c4aa762ba8397f2725c58d1062a8427fb940b30bc9acfc9cfcc1403594f071ab16b356310b433bb0871aeec690fd5198324e39a34f11bd7f239a5332d20cab1772f5fa77011ca1e8e0ff47c21a23de9259e370f33bbabd235d2e85e53ea6d7dc906141cf267aaeb1b3c5f99a34c41a1b5ddae2e69dfb3076855b7fd59687935bc53a8284782a0f39e6a3d73a75b3eb482a8e01b8304de661915ca95f0350fa0cf9d04a74c9afb71df53ea932502a3c8faf7b7b3c18bf76dc6a3076ce12112e35f29acc6a5593b0a915134c8b822abb82e7ffac182b25da569e798bf5dd0c972830a43ab1077ebad81d37d28cf83e66572f38610fe77c7998d0b5d2ec51cf1960df8df118e5acd3231dcb0144a72d048469799f610c4bbd349b7fe5ae23b20fc642c6793afa2ed14021d3fdc249e7e6fd9013f71ca2da7479f209463155c4dac20753b645935ba4769ff91648c01d85e780ff1dc29dc1edbd2df2966a6dea1f693f641987a4ce0f35fc8f297411a2c20cb83d5383d672d6eeba9f213ce676892fd6faff5cd4ad20049cb408f43be0265941ea77b6ccca2730ca94a6f77fbf0a8d12169c24dc93d31fd64968779560b237440be79b5fdbd68971dca9b3fcc962f4b732b2a249a7ee6dc101a8a3bc4e9bc501b320f0dc3ef3e415370928c57ad6c48816cdc3396f57c7241d26b8be22f22bb04ffee4ee114525b1953e348a08e44c770d9f1268da4783f80eb2f04a2da04efb4a7ad03435acd9b0b7e30479f2bb924fb7a031ca3b9b3b249e4a07662ee9d013794267cd66eeaae38096da3b4c20b7e9a2a078605e1cca1c432f761d820f3b408b1097430f377bbde96e5ac2a17e45ada30a5784b0f022212bf65d0bc22aaac251c823625e20eba069ec95f72afebac896cf22fad7286b048fe6612846298338481dd0b1f23435441132dd086d539b75bfa035ba6ab626ff0c7945b56398925fc497f016385f08e86c16e7b0a5f01beeb45dbe4fed85bf579f0cb168f4ef8c632a6efb043ab67775c3cbbbd74ffe972b8273adba07176679e917b3f20b2ea514263023e42a666c86898f0e127a21cac8b104309e0521d6c5ce8f7074ccc8007a1fcea57958a3dae120239799e0fd01353e7da2c7590889c7d137d3993e0e756ec69bb3699c036a3f30accdb0aed12e675c122f14eaa0c0296a20fdca7468b42ac5062a6f559ad5ef0082a8e516ed55f398149b7af9a5cd6e596568dec95290626dedeac5194c4d6bc5d69d683a63d6c69e662e2a9551f725c68c2a0321e6c4942e8f0889e790ce6a4db4f0510e541215b660b8b474bf8c235c7cdcc1a26924646cbc09cc6895a8f0e91da326cbeec15c62a1280bfb13f5c093795f7613ddf3703745e193a28a77472f564e530c1047e7f8c9bf377657a6b95963935205ea5d72d878de3bad5f9c2a80772ece82a9fe7b8b180e5998848e29a8327a9dfa60e39776a7337db9c34183270c57715b280958a943967524955ea417da26174cc6ca270edfe235e8ea7eace137ccf8370852b6ba7463951ba7b3ba3a54f966ef06b19167dd3d6268d61757f48ffcbe6a229fa9cfbba05a2636537670782a87c8411e4bd166fbad36565e4364b0e9446a69bb5d523fe5e5a3b91730b3f4946931ef8953ea50170dae25939e5965139dd13f300112f9ecbc8390b4c3f4a2a5d4ebd112578b43fabb9a8b9c29d10c55910e4374418ad1e1f8bd01a19d8be3e77bae2ac568f15227db8e41e841e00fd6ab46d7564a03fa1ba4a02001531446b694187b387a8c094eb7590d3da9445328968893f47e10b399fc61f75c7bb4502e205a3172f12398dd6e098662b866ef3da851e8aa836a61f364c6c3f9628e20746e5fc378ff9e3c86b06702d08a8d330528017fb45be627128cf07c59747b2d46ff0a85106fd48ea98776622c9e19b017dfbd0ee48a6fa2f907ac10f36408b80c5c8db0ce6637edd8da420b1d6da3817324427318846c252ae391e97133dea5202e0ffe804384301f7b3addba5d990802b8a06b55b585d68885868a8281873d8cf8bd79b1383a0ddaf13e08e7bf0ff81ba4ef2c5a6295b520ff377042a7c0fd396cbd478b5cd9739c637fc5de46384d6be2a83ffb7df46a0eeac01152b69395f76dcda5936e58975800b35143677ccbaf9a266d96379f8460eee5e59b7454531e9848a4bfabc82b5ccba4d235c4bc2d18fa91fac309d55ac669bd273773dfb430f46ba92318f0339e3033f7eb09b790130a52f6c38da74a91a93e800e9e1fb2a0cba927ffe3b6811ea6ab0cf6be633a8d7869de45e2441427e20d810eac30e4492c258bb0ec902e9ba7b454b6e955da71d245b182ed3c55543aaf02db096cd106d2e5d0f9992572d0d538e5b2d3e083366a18c229cdd8b65de630db7e3f677eaf7fe6af0d592236dc1dd0c4bbe62a4d76c32fa93b0ca3d03cd64e8d64940a1c1d2bb3b05dbdb26b5106f35d444c5ab697ff513716c8d8fbc4806aec68de7c56e6a4f855360039ff826ae045cf80627735c9195a0054bb3111c5e2ff95ab5a9059920a0de38adb56d3c2b9837df29e0a8ba26989cc064ee59a8f55014efb156df2b8861dd6159e3d7027d0507daecc582f034443739647e1dca35d3e661d73686628998b2412663c00fcb4414ff5a331a91c00d51662338eed17d724d82359a7a636bfaa8a821dcb0ea8bc4551157eb0bf6df0902c6fe63f4948e4c2b6727796b85fab1ebb51b0996376719da4e8e54817ef36449fde21d40ac2e167939b917f6d0d0e2dbdd182fb7aeea7686d13688455a976393a26d9fb4af75ab34870066b8833bcf9d2088370aafcfdacf40637e04a476b29b7097ee827fc18d7d20b5ce84f25c370b5225a2ff1a5fbeb5d6f28e81e34639500995b6b5d7ec154b589663d02c416930d636881e9936b397c8f5f551c0445c4aad452d0c4e9e81dc04363e99688c108dcf0da20d7dff9194a4b31085e5356daa99bb90b61047108d67aa0efec4e4c576a8a3a0f0dacfa0e7ad572ff050021fddc49e28382dbb5ab2418f3deadffc22a479023edd8ed284ac63ec2abd8cbc05eefc652bc9b9a0b0f0d8169bf99b172a089342ee14a1d3cb581f717ecc1e62c93f6a2dc5afb4e15aadb087eb2553dc1193a2aa13c48f505bfa0996fd5239731a508625275b4237cfcb4c1abdd3199d8a0c2d13546a20d83d19e3b466c96c51d2323055d7cd8f7bedb96de42caa9149fb9831e82d7d3204b4831ff6804d9073d06dcf5529d8d4de7ee66900da9d2c2caa4101b91ed5f7caf898a4feafac380b26ee10e68450bcb4b08b10b1e89b82e62b93254e25515c1dbacbca9e876554df83f8830858b3795b4a1542abad98444d60a4a6dd9875e027318094a19c31864ad51926f760cf78b07561c39a257a440fef574dc67c009a9c23038e412ad43a4d10542783e13a5364b1a3b73065ab503c6ab2c22a1337e13dfcc05d175c41742bc7bb163851fe34a002329fc3b81dc7c40d7346e23add1d63ae2565f7c586078917022ec84d7cd5b1c2b1b4f78a73a182fa02ae7fa09cfec1aa42441d52d2919f44ba4a04da333f3ff6b2e8065363c11fdcf068ea5866cec27e545607154320e5a824584e0d8ad02c4fbfc4c6ed0dd234ca3d720526d424868166663e0ec977b06292d73e9bc0dc27140a75d71dc19648c553824cb4dc772380ee0281ae7ac094a79abcaccfc89d6bac08464a9777f5e212b09eed017c9d635f3b13fc3bfa362b9667a578f2f73e3ecf80e87ae1df596d217928fdccec3c6cf761a510d1030a2035acf2008f893cc73a3d004d422e947314d9431f22180d677a736fb3f45716ab8d2c357d403975c422e4043275cf7505fcd1dd7f3b94ed3137fcc50793a56d8e123adb53e2228fcf51b666dec4ad4adcb8e02a0643fe0eb4d3e04f37b3adb549b28a9c926a7dea6587b17668021f4bc5e702a80da2faa24ed38d169b7d1a842eac069410bd82750141b6c33ebf88e0bcf550c08dfd9a30bff7c3df1ef0e3257d4a469ddde3a9593bc29fb511fc5f89e0dfdb2806e5cb1f8b140c068ef84c2adc53f663c84f833f63c49b53dd5bb0038908d41e7ac82bff51a826ca266f942ff71ff5fa96aa0f3cbb543772e89660d51ccaee123c4524522361fd60739ee5a4670376fdd0ff01b4a7bb9fcc68d570185e5bd79cb0eb15a8e60682ee11a35f215c1a50d718c5af0638cc93f0cf22f5715139a0e816b829c6e65574f09b6c4c4e445576d9f74235ac348ff0459e4086403f49316244b09b20fc0ff3f020da0ec119e1f2866853e4d25f2545bf38f9e949f4797c78d3b997f4457b01952088d5a42f31deef006767be0b17a2b60e1bebcbf6a916267a2715333d6a6eb42de73ff188035a7bf56a9e3ff68b00498ff3d48eeb88da2d85a91cdeb4492a9910fd8f2fbe4c87565a4433e08aee38a140d497a3f753c4873313aa1eeea0bce05647c34e051cd4c9dd5d3b6ab6e72272524aae21d8417e42472cc1f55316109ef19b7324b93d544e180780f616e8a7e5f432d4907896ec434a0ad05813091090872b8cce6e1fb9b80daf09b1c3c2d11b19cb32e02d5115d1451f24dfd30d990002158e4a4f163090ce08bd6e4df2c911c0ea2f56af98268163fe0433f6449c01cdc76cae616db0be7c6de8e38f7f57c5a268a9a019982cac5d34a9dc160591eb8448c02263ee95851d703dec2ceb712acfb7c0b09e33095537409f5b4f9f341e8c912bc9c945a8d6b2903f84a0a5173422451bad1181ff401e832422a5e00816e947cf0b3ed0313233b9579058c904f7b5f70b9e5a4f18ab05a3ee06e57c8b23725f365e14042b512aa3dadb141d7ff7aafdb4e9380ca8ec55b74827258b2ee5e3ee678fc7d4cbd95e879fd2198be902fcde195382e4ff05d03c0d8befa38f149a4e7d807308d129e8857be54c71a4ee4c5f5ba2fdc0c1281d82eb4cee49846fb8488a984fe61b0334cc2a4665a2c180837b30d15924e7fa29bf7e407b83c57e24d9a8f9788501803c74d9c5dac47ecfc6fc59728f8b43c7beeb529343fb93abf2ad1be6fb911ff99212b47f4bc25cd0126f3e1bfa4d1f5b56b53e7ede895eb571ad39cf59fb03bb86fc83e3abf8318cab1286c9c18406752b1de8823e24c0a99d83afb29eb926221601c24db3db22018d7ee46bc8e5fa86f374c8c26f86962cfa419bb6dd0fbc7c7c673d2e34f94c22df6faff5074fe006a2df6e7a39d18f39d8cb6a5855cde905c8a64039a922248d5e32c89f165d524751cfeb6e4eb68192de1999adb0d127694320295b9ee509089f42f2c5ba09e5027a40532942a1d437f8741d285a9ef77d1c1a39bf58ae6a2242568f7292afddddec637053ddd68b0c74b49743c8558634c9896a8d0f5d854715f0499dad504b1cb70077551e0d919cd04fbed68f4b048978e8a305115713567d039d90bdb4bbe579ae7f3468a18d1c232cf806996f05d919b3ea245e563486ecff98ed566f5f462e9662f323a5b7937b1a4dfb6bdb730a333ef346a7e0e571fd3f4feaf68bebb5df644d44c40e362f037e586f711d69664a6da0641dbad32d57bf6f18ecef5fd36642809c4178a5ba6b37df4cfff9d2743aa8e6accc6615c2aeb0e94658ad9aea9b4b2f5dc785f8b29532ed44345b879c81a3f2fc2e04892c77c4f988019dc7abd47fe8f94f7160d5c4829ac915a03c416b2c62f56d0d713d51428459dc6863a6c87e6e56c0b0e5af7e02769ec15226337d1b92309d162d87f591cfa9245654f75577fee1204e4d112a437cf501000ae1a9c0ad8997c400e983b1f315c6d51d47c5091ccf4d1c521611d14324532935c71f665285eed154d7864e3c9ef4754964bf263e5d0d6f61bb3a188d08ac6341fc7dee2f3c2ec7886850079d9a6ddc68452d776431c9d7cc14170871fd12a080f241999e10e78108dcfa5090ab7e4e994e9a4cd7292b22eec5850c121b22c0c300c55449ea5d1284a8ad9e98eb181010c42342b78f5e539bb207256b006a27895f576d9763d044d7b72cec6bd51bcb39ed3d9ea08630593b1b972759a178c00d4e47c9f4a4aec2680b2119f48cc7a61ccb093674b1933e7f5a750d64f76a4270db731f2e7925116917eb0ca85173fbbb13ae46cc8de05c3785d39d30b5cb99c23bdef2ee59ae2f9f323b23fdd4f1d151f6a853a6ecf545571b2b0841dfc4bae2943382d9eda07fbfb7f28bc2126758d5470f7710d2fb5fc09472ca5edb3c4317276eefc7c178a0cdb2ede6c52e652b8e686c7b19910928a6f7ae425a95295813eb146d5bf0851cf7fbb4ef7f777c4d33632c575d1c81b47a108ae3d2fa3313255d032ee9910d954235800ca4e6f24f4043c37dc0c521a5332cab5bd48ce830e8527f1555525a4a2b7f9eab2750acafa905299553887f58c2269080f4fa6f1f6a85035e9197be170a91233f9ca4b4f604a032477539889a21061e505d6fb4fa602d7a5c703d55f193259c62090579f386ba83c1cf7f2230f970174e72f86bc81a1f8a83816914f24ba3be06ec4bedccfd0340fbf6d7f9f8a3ef6b74898b3c5dcb0f6f98f162eeef9e73af74e42f6feb2b95a04267e97b030f9145eedd7bc93766f689ff40538ce08c995ac1adcd21e80e78652778ed5e283fe5bb46249c78c0843cf749c6996ebd11b0a9bdc0f77bd1444fcf4ea5de91e7692e56b130a26ece7b1a9cd4796e75534d038e7f07f998d8d9c1928afda5281c4db79900bed445324b7049bd215fde0b3b96bc779046aab68681bc55f0f7d1bfcefe8800e8a438d312ba119c104ba138735f092e8a1bd36aa28425e0fd20f41177fd5e4fa2dab299a9a4faea34f6884e7f847fd4c639b6719c662fc5867ecc85e4f8442b4243edb37e1c619d7aa20574332c8808528bfd35f495e16ede32e702a3a8a5affcc8ea41ce981784212c1971d0285adc57f04802f1214c0c55c5ed2e99deae3806b4391b1d0425f1528222b3cff60e115d0899426dfb5825dc52d89cbaed09f5ced13fa4b58e7ca2c8c305f28600d654c0df58c3d8402c8d121a5ca0f6949534622484e3499057f27f9bf5202406fac8fca7232ab1272f858d3bc19b8524829947808131624da3045845705916ea5346ce576fef32c3fb202afaf8daee68c8cd7e2215b0b9e62a2856b87bfab343ab6a249ba4c5a95c49b5328164a42ce29a0113b294ceb5e925ce2ebd9aca3c59df44aa503f463441ca00c8a21f503f7cef29f009cb2991d80e8fc53fd98ef90f8fa198464fb47374b34431866e427abea23eb9f477a39ca8abcda6463cbdecdb6752fcd9e664dabd7783d9aac40c8b4fe1fa7f56428c623e692b6a0b039410c6c75edcbd763e58ed471f9e81b0b206b9a884f92efa6f81ca8b70f22d576a8eb10a8ccecdc882ffe2b159fa4f167cbfd624424bc1ff672a015a238fbada6b4e976f2d104fd4f7e6da8e2ee1049eb6366b2e1f469d8abd9f8b529a567b58b48f367fb1baf8733855a859dd77fb9be49a7b3ecf1c52a1142841b2ae0aaec7d36b3fac28ad1710afd561947688a3a6fa5ad0d5204f9c1d055537dc30cb2bbaf9bbd8b7e723c8de67d2531213b066c5c2d74b9d2c197e2661ea5220e0a8917769730fef2900d3c12f24b17d18b7ae539ef52ad458c33d982d45239659dcc3d6850083ea14160e176f18b78f10044ea0c500789b928ffa21d323ab793f5c54cef897c84e7f8cdb2a611ea8e0d06742a718b59c98d25db1e128728e8418c15e676116c1507b41cbed67d1a384d493652b33d981ed883593551583f223e398a2826e685e8f023018f5f40c0bd47e9c7dd77f8536937a4f200fa1a00a9346d55eca02ef36dcf9a4dbd2d584e49f69b64724d6596fbb177c6a117acc501136171a8679e8587a8b22b509f7e64b3c92a76199cbd3c9d9fe5541cc7b76e4fcb79481c35405349cdab13465b37b0cfcff7e06962d426ec101881d0cdd891129a4d075a5e54db1f98aee786112150fb7c983975370d94e234641a4b926efc8da573d0411494f9757bfc0a8a2c713b1fd6f063526f2d523948dfb4c26b8f45b58a8429bae30257e1b10e64a7a86afaf5b1f35c5e282826e2300e1f1ff8edb46bddc27edd2589f12f54fa7a6afb9a82d3324a9cbb6019d80f006fadf76f10e65a65c3eb5ca86ddc22e06bee4b8c61a6fa2c10add84648af7093c6b3195ea584cf744648d9baf1920b199a1aa187a05a8a5323284a12734a9a7837fc4e3ba882bef598e5b701e371769ce443b239f8a25d53518e0f0bc6b6a81baf79ea37d55d9400393deb4b578aaee03738bdf779ed6f3598a291ebb618a7cb2b3886acf13bcf057ff2a4d0b10ad3d964949312142374dfddcfa8de49b3d6d10508911f4ba1b80a107e7a7d0db92c6dca04b2822247f968b3fa79d383299a85affa2a548ae2470ed09dd8254389539c7b3a715bfec9325bd07f3b95b7e181b4438cba50c25fcc60cb37aa784e7cdad5c6dfd405302163cb826fab5a7f6977e87a1a765fd7b66002771485058c4dc6d627b0b43bd0f52c052a5453f07f809fe1941b6ec4f74f027f80d680f370f9c6b0bed817540fc539a4039214b688c596d9b0b11ba4df83a8d2dc77fedb0e0680922321d05a39b5574205f36bd67efbfda82301c9ffdf9392e9b7856839108c558b5f96f87bd5756020f111ef0fb424f710fdffc61f155175c55f637c4db26de93b868d8a2b1666b6802c66049dafe3424b0fac70c055760dfc51793f3efc30082989b1a02ba5fac94004b5a1faeaa2881135ab63bb9a769ad6966002bce69600338b01ae49baa3ddb26b8595176a11da01a37d83eabd2870dcf1ae097c20fd3513a3a6cbffad8d8e2bfba45ade5f7e9837fa15f2413350e153fc0496631a2c5d595e976334c5d0c685829d6bac1fa856bd8aa8a067548d6b07466af2aa865347a6cdfe98c19056d660054e4ec56b9af5844d8e66ed0f04527a26af46ed6809faa73461ceb8bd1de6fc8ec9c25e1c32d8c8f3523185e558582b1f68fd3c348df75fdcf3e69d01e0c372106e0c4c232410cebe856b25b27668dc934a0a994a81f3574571e7b1b53254ac2912eb54d895ead6515753672188fc6ad59a1dd81c48fa13e8fa2d5505dbb8ae85325ed69128c0200bf02c042b91c4189f34b0687fef4b76a7db53ea749f2966fbc9771f501b8d1df9341c4eeeff627c751967f37d1173fcbfdfa9a1e652b65a517bab5f3e915cf1dd99c4ed7e914eb682c8fecdd1e2499e341e38e23ba34cbb952150211314dfa3e357357a45c2c7a9cb5fa847d9eea5098adde0f3fa1f1066e5a75ea8541d45bcf304d7ca0e6015ccd711647c0f549ac0b35509b5108012d6217ed4039cc9de337490df1339eeb91a171803a422d7fd12b3d46cc30655df5371f5c2090f18320f2760c947fd220ba5cc55f9ac004a9df258c54010c3a553ca997c5f89ad167b87c6baa0393aa0f96062b9668caa522022ce45356f440003c28e805e30f16caa4d405eeb63e471e67dafe0bc4846649f94e97c870e6dc5395733e4256a2c7e8900f7bae0af3e1055c333a1f7a125fbfa0f998fc584d22c7431f47d772008b583292c715a87a27d795b40dbb22975760e728715c64d254223adfc074e95b8c40663a7059464f4a4ddb684eb1ab6ae1576720ea8b9a142810ae6d948d213ecd3451773205a93925fbcd07b67fd0cc7f48905a5ac7fb9353c66a2540b4cfed6544a72ec8ec8e20e50030ea8840aabd8766a3a52bb3667fffebcec13d80323e402a5c8ee49855d64580160801868022f79bffff3235c22db97d3cdac6a700570adf7bca3749ec523f91e79ced81cf63691b600289f95946e4df2d33f2181a0d937498983d3357e9a85f19e48f4dfd9da4f7c728dacc3ad57f9a6fda2732f929659b9f442feee99fe6a6be27eba44dc6d396ffb656b87d7750f873eb66abe946a8a911a382179bdd4f9fad7b3ef3c6ec9304623598c894619b4267314fb44b0d4b9c14b489ea040f1bd16e941580b6ec12123934f78a705cbbdc9198beba410c75f2a9ecb97c4a3ae16e7ab8c2e52e957715ddcf831d7fb5f3078592c37758ba49b1cd99742bbf95079520c527c601ae750f5a79dc23ecc92b0238a916f4ca2d38cafd9a38e9bd2fa3587fd30aa613e6d0b7c751a267390e6bb86c0b288b45d7831bedb295c092aae127b0b6046da428c19275b2161ec5ed7c5af9d2a0b94497ea773c839e48a5273e12d9919e1e5c16c4ffa6aadfc3bc6f4de75022e332e38a18d7c8e146191575152b6167713692d5ecf44a5d2fd73a0d3482c1e2b6b5f9006f9499b851a8e2ecc427dea34ebe887de865ebe55cc6e0cd349f25264e65c8ad818c4740a4e84d61d305c06889448753192347795748eecd703f5a73cd3764e236420611cca70bc11be6bca1faf6725788aa6774d8f001a373d27254d6fafdd4b5b2e75b0ea831479fd461f61659b8bd7806944453c3daf3784c36c453639ec52b2bd88b2eefce83d6e95b52e8d5e59bdbe480c2c60ee973ce2f9d520ee5e529110d741fa518d10561ffe0a9c41712ae8168e691cee1388445486f9fce40d45424205401a1080d8327125313d6da061bca8d573a9da0c4626ccf4d3b6019efa1d93a238e2c744857812eaf8cef5758c6120ff29eafa425cc781ed281da67209a9f3fc9ce839c6d18d9fd566c61ff856016cdc816dd050783dbfd2f8b2da465c624c4dbdc79bc25f356a98f8245392ac854dcf0c607310231434a914d498a367c5fe8ae5c087833af55bef6c0daaa34d37e835a7e2cf638a3fae3704b26fe34803b47b24af1d3dd12a058b36d466d3a40eac28aa272b6a588c3de21156ca689ef1920dad4b2d27038ea2c091f3c43436c2bff71103bd7e955a69c23544b31c317ba3d75bc1c218dff824479b44ec96da003d4a9af7568bd994d2260a108424591c6480498e06591911224bf78e71c2ffdeb6a3b712b18ff3fe6ceb78b1277612b42f8f6d58ef28830160f36f8a537b36ed4408ec1431e053e40438fa2d180f0e56957b28d99a554b0ba3775c15ebcbfe18ec9a5ffa22aefb05554db22e24910b915fe75d36ce3c11f12b27b5476ca79a16f97a10c41c768c9036f47c30e2f430338b2b1c9f0dc7599c0f8c660ebfb51d3fb110da2ef892fbcb7ff59bb52d7d920e123ac4ff5b0150acf53774ee6b78501c9144e04dea2074fb54f29dbf606f59c0525b0dce4c008d1087125fab2502bb5133c7360543bf74169cb1f5cf59b0fb7a9bc67fb74b09ffdd779b7a8787982ff20fbdc09d78ff5c8777c7d9598a69d49245c726477a1c88776fd467a0311492aa9cdf6c18bda1dbb3663c72be3bbb369ce602f899312802564b1a9a5bb9a94ab0605c60af61f6cf0f286e048465fcc4dd1e4db34d43e0e2de24ccecf98e5c0a958ee9496fb58b1e77ca3aed2fa2161dcb4e959e74f68d2a82b06b8bfdcb9bd0712b41573cc720d3b13ff4de1b04bd505091e42da2d1467a220fb98276ad27d04b593c9eab10d11b0de696150f102fb1ffaaee0827e53acd73d98b00baf399dd8724f1735e4459dec19f1f77a1adee9b0a2fb1e1c276712ac1d4af8ce5b899b7273b4225d9fe3fc012123ce31b0bf6a1f15ad21ad21540a013374a569ff395e5a2aeafe1610fa183cf50eaf24b7edec3f8084a1cbb5a05b3951c9eb5b2191f89e211551b8d4f563eb9c4bd522d26f093b834e679a368595b1974cb6f0902527955ffcb0d827b41a90c9db1501da8ae315a37b236e1e13c0559b0b038f7ae2f1ec7ef0eabbbc4537f4f7304db69eb6bd951d0d46591e02836a6eaaa97c5dadeabef094cecc7f6d15405391d128feb520e23a77d08013649b7a976f20f96151e09b6717495b13a9e732997ea31194ce0b454b29764512cfe27a4290184879705e765c56391ebad2a92665ca0c9fd2f279169f7de79d480ffb115cf07f037e57b20e04274fe406d42f76cec029c1dcd799f78df3d72bdf493fdd35c978fcc8d1a66bbb05df6cab195ad6e782fbcb4e910e5055c69718062bea5e31fc387cdae906509533072af893a07e7ee3ce78101a77624b7e14bc54f4a4fb0d70beb3e0bedab7f61ea27594baa37c6cc8d50544738106faafe95d213eb0c842c3448f587db6b1467de04a641d14ff3839cc9fd80b9ec6debd7bd6cb3007f2bbab6c87e8da8d8ad5c7ba5d6c7aa29a75dfab539480574c1cac4ba0bbd43ce557899cc415f0699c21240206471b95688f1ada2526ecdd03a405db78e1a95967d7e294beb63032e82c2cebd8d3607ac0685584033982a3ff22fdbb8118ad057bb9880fbbd983b8dd1e25ac41ee7266aafe7e12c5e6ecc163c45970db5bd85b718459a20fe41f1a9828d8e74b7f98d4b08e9e3815ed24afa54ce9adb032306a886655d5d1b4f4fa307ac40935069ba96e6da1a21b3e5e2689d5ce472feefc48ffb3cd25bb73b6577abacaf99fc6471137c09373f42768e72fbdd865591f680e4ac07def7f354822f36f18bd85be23b5ea42eb7e92b5d5bc7c9a8e4bb4a3cc425bbc138ef2b89472513f91c4acf20af9ef6cbb839fc470a4d4448cc14c2ddb6210f1db23be0b4b2d6aeb4071f7e816001c6857e900478671ff053447c136d59a7429bc804703292c047071e36ad29aa9a04480b344f3312d913926ab3da4e03ecd53567ddba37efca64449a4d452b440061578a58fd34ad05be1d3734ba913c9c3002a901595a63cb03402bec2bd3cfa0a2d9457796a9b61576e03128e2f7ce72631a1244177e3c74bf4230715b95d8705d79f2787bdb807910aa6081e29ae89b5c1e4e6af990bb3ed3fa8352670d8e0f1b61aac14b18c948314331632d180527d938de01574e5a35c33e22aff1fc7d4c381586609eb2a71ebef92197770a907bf2ae1b70c022692bcca59fb58a20c475f19d7dbde5f50dbacf8042f642687c0bce6a72329368d1baa975b9d5a8782c12ccd17836c395d0b127edbe7461e56ed48bc0390b494e5f6cd18758774ee13f9a7d40535598aa955085238e8af</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-xray">      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">您好, 这里需要密码.</span>      </label>      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>      </svg>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Zookeeper </tag>
            
            <tag> 源码 </tag>
            
            <tag> CAP </tag>
            
            <tag> Paxos </tag>
            
            <tag> Zab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Interview-Flume</title>
      <link href="/2021/01/03/Interview-Flume/"/>
      <url>/2021/01/03/Interview-Flume/</url>
      
        <content type="html"><![CDATA[<h1 id="组成"><a href="#组成" class="headerlink" title="组成"></a>组成</h1><div class="hide-toggle" style="border: 1px solid #FF7242"><div class="hide-button toggle-title" style="background-color: #FF7242;color: #fff"><i class="fas fa-caret-right fa-fw"></i><span><b>查看答案</b></span></div>    <div class="hide-content"></div></div><h2 id="taildir-source"><a href="#taildir-source" class="headerlink" title="taildir source"></a>taildir source</h2><div class="hide-toggle" style="border: 1px solid #FF7242"><div class="hide-button toggle-title" style="background-color: #FF7242;color: #fff"><i class="fas fa-caret-right fa-fw"></i><span><b>查看答案</b></span></div>    <div class="hide-content"><ol><li>断点续传, 多目录</li><li>apache 1.7, cdh 1.6</li><li>自定义source</li><li>不会丢数据, 有可能会重复</li><li>(自己处理)事务, 影响效率, 在企业中几乎不用</li><li>(找兄弟)下一级处理, dwd, redis, spark, flink, groupby ,开窗取第一条</li></ol></div></div><h2 id="channel"><a href="#channel" class="headerlink" title="channel"></a>channel</h2><div class="hide-toggle" style="border: 1px solid #FF7242"><div class="hide-button toggle-title" style="background-color: #FF7242;color: #fff"><i class="fas fa-caret-right fa-fw"></i><span><b>查看答案</b></span></div>    <div class="hide-content"><ul><li><p>memory channel</p><p>存储在内存中, 可靠性低, 效率高</p></li><li><p>file channel</p><p>磁盘, 可靠性高, 效率低</p></li><li><p>kafka channel</p><p>kafka磁盘, 可靠性高, 效率较高</p><blockquote><p>kafka channel &gt; memory channel + kafka sink</p><p>apache 1.6就有了, 但是又bug, 但是存在脏数据  event(header+body)</p></blockquote></li><li><p> 在生产环境中该怎么选?</p></li></ul><p>  如果下一级是kafka, 选择kafka channel</p><p>  如果不是kafka channel, 追求可靠性 file channel 和钱相关的</p><p>  追求效率 memory channel 普通日志</p></div></div><h2 id="hdfs-sink"><a href="#hdfs-sink" class="headerlink" title="hdfs sink"></a>hdfs sink</h2><div class="hide-toggle" style="border: 1px solid #FF7242"><div class="hide-button toggle-title" style="background-color: #FF7242;color: #fff"><i class="fas fa-caret-right fa-fw"></i><span><b>查看答案</b></span></div>    <div class="hide-content"><p>小文件的处理</p><p>大小设置为128m,  时间设置为30分钟, 控制event个数, 设置为0 , 禁止掉</p></div></div><h1 id="三个器"><a href="#三个器" class="headerlink" title="三个器"></a>三个器</h1><h2 id="拦截器"><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h2><ol><li><p>ETL拦截器做了什么事情?</p><p>判断json是否完整</p></li><li><p>ETL是否可以不用?</p><p>可以, 找兄弟, dwd, spark, flink….</p></li><li><p>时间戳拦截器解决了什么?</p><p>解决了零点漂移问题, 解析json数据中的时间, </p></li><li><p>时间戳拦截器是否可以不用?</p><p>最好使用, 不然很有可能有较大的误差</p></li><li><p>自定义拦截器步骤</p><ul><li>定义类, 实现interceptor接口, 重写四个方法, 但event, 多event, 开始, 关闭, builder方法</li><li>打包, 上传到flume.lib, 在配置文件中使用  全类名$builder</li></ul></li></ol><h2 id="选择器"><a href="#选择器" class="headerlink" title="选择器"></a>选择器</h2><div class="hide-toggle" style="border: 1px solid #FF7242"><div class="hide-button toggle-title" style="background-color: #FF7242;color: #fff"><i class="fas fa-caret-right fa-fw"></i><span><b>查看答案</b></span></div>    <div class="hide-content"><p>replicating:  默认的选择器, 将数据发送到下一级的所有通道</p><p>Multipexing: 可以有选择性的发向指定的通道</p></div></div><h2 id="监控器"><a href="#监控器" class="headerlink" title="监控器"></a>监控器</h2><div class="hide-toggle" style="border: 1px solid #FF7242"><div class="hide-button toggle-title" style="background-color: #FF7242;color: #fff"><i class="fas fa-caret-right fa-fw"></i><span><b>查看答案</b></span></div>    <div class="hide-content"><p>使用Canglia监控器, 监控Flume尝试提交的次数远远大于成功的次数, 说明Flume的运行较差</p><p>解决方法:</p><ol><li>flume自身默认内存为2000m, 增加flume内存, 在flume-env.sh配置文件设置flume的内存大小为4到6G</li><li>增加日志服务器, 日志采集服务器大概需要内存为2G, flume设置为6G, 所以说大小设置为8G, 有的企业会设置为16G</li></ol></div></div><h1 id="挂了以及优化"><a href="#挂了以及优化" class="headerlink" title="挂了以及优化"></a>挂了以及优化</h1><h2 id="挂了"><a href="#挂了" class="headerlink" title="挂了"></a>挂了</h2><p>memory channel  有可能丢失数据, 100个event</p><p>file channel  100万个event</p><p>taildir source 不丢, 可能有数据重复</p><h2 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h2><ol><li><p>file channel 能配置多目录</p></li><li><p>hdfs sink  小文件的处理</p><p>大小设置为128m,  时间设置为30分钟, 控制event个数, 设置为0 , 禁止掉</p></li><li><p>监控器使用Ganglia监控器, 当尝试提交的次数远远大于 提交成功的次数的时候, 说明存在异常. flume的默认内存大小为2000m, 设置为4-6G</p></li><li><p>增加日志服务器</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> Interview </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flume </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ClickHouse</title>
      <link href="/2010/12/12/ClickHouse/"/>
      <url>/2010/12/12/ClickHouse/</url>
      
        <content type="html"><![CDATA[<h1 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h1><p>Click House是俄罗斯的Yandex与2016年开源的列式存储数据库(DBMS), 使用c++语言编写</p><h1 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h1><h2 id="整型"><a href="#整型" class="headerlink" title="整型"></a>整型</h2><p>固定长度的整形, 包括有符号整型和无符号整型</p><p><strong>整型范围(-2<sup>n-1</sup> ~ 2<sup>n-1</sup>-1 )</strong></p><p>Int8                       [-128 : 127]</p><p>Int16                     [-32768 : 32767]</p><p>Int32                     [-2147483648 : 2147483647]</p><p>Int64                     [-9223372036854775808 : 9223372036854775807]</p><p><strong>无符号整型范围(0 ~ 2 <sup>n-1</sup>-1)</strong></p><p>UInt8                      [0 : 255]</p><p>UInt16                    [0 : 65535]</p><p>UInt32                    [0 : 4294967295]</p><p>UInt64                    [0 : 18446744073709551615]</p><h2 id="浮点型"><a href="#浮点型" class="headerlink" title="浮点型"></a>浮点型</h2><p>Float32                float</p><p>Float64                double</p><blockquote><p>尽可能的以整数的形式存储数据, 例如, 将固定精度的数字转换为整数型, 如用时的毫秒为单位表示, 因为浮点型进行计算时可能会引起四舍五入的误差</p></blockquote><h2 id="布尔型"><a href="#布尔型" class="headerlink" title="布尔型"></a>布尔型</h2><p>没有单独的类型来存储布尔值, 可以使用UInt8类型, 取值限制为0或者1</p><h2 id="Decimal型"><a href="#Decimal型" class="headerlink" title="Decimal型"></a>Decimal型</h2><p>有符号的浮点数, 可以在加减乘运算的时候保持精度, 对于除法, 最低有效数字会被丢弃.</p><p>有三种声明: </p><ul><li>Decimal32(s)，相当于Decimal(9-s,s)，有效位数为1~9</li><li>Decimal64(s)，相当于Decimal(18-s,s)，有效位数为1~18</li><li>Decimal128(s)，相当于Decimal(38-s,s)，有效位数为1~38</li></ul><p>s标识小数位</p><blockquote><p><strong>使用场景</strong></p><p>一般金额字段, 汇率, 利率等为了保证小数点精度, 使用Decimal进行存储</p></blockquote><h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><ul><li><p>String</p><p>字符串可以任意长度, 它可以包含任意的字符集, 包含空字节</p></li><li><p>FixedString(N)</p><p>固定长度N的字符串, N必须是严格的正自然数, 当服务端读取长度小于N的字符串的时候, 通过在字符串末尾添加空字节来达到N字节长度, 当服务端读取长度大于N的字符串的时候, 将会返回错误信息</p><p>与String相比, 极少会使用FixedString, 因为使用起来不是很方便</p></li></ul><blockquote><p>使用场景: 名称, 文字描述, 字符型编码, 固定长度的可以保存一些定长的内容, 不比如一些编码, 性别等, 但是考虑到一定的变化风险, 带来的收益不够明显, 所以定长字符串使用的意义有限</p></blockquote><h2 id="枚举类型"><a href="#枚举类型" class="headerlink" title="枚举类型"></a>枚举类型</h2><p>包括Enum8和Enum16类型, Enum保存’String’=integer的对应关系</p><p>Enum8 用 ‘String’ = Int8 对描述</p><p>Enum16 用 ‘String’ = Int16 对描述</p><p><strong>🌰用法演示:</strong> </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> t_enum</span><br><span class="line">(</span><br><span class="line">    x Enum8(<span class="string">&#x27;hello&#x27;</span> <span class="operator">=</span> <span class="number">1</span>, <span class="string">&#x27;world&#x27;</span> <span class="operator">=</span> <span class="number">2</span>)</span><br><span class="line">)</span><br><span class="line">ENGINE <span class="operator">=</span> TinyLog;</span><br></pre></td></tr></table></figure><ul><li><p>这个x列只能存储类型中定义中列出的值: ‘hello’或者’world’</p></li><li><p>如果尝试保存其他的任何值, clickhouse会抛出异常</p></li><li><p>如果需要看到对应行的数值, 则必须将Enum值转换为整数类型</p></li></ul><blockquote><p><strong>使用场景</strong></p><p>对于一些状态, 类型的字段算是一种空间优化, 也算是一种数据的约束. 但是实际使用中往往因为数据内容的变化ua增加一定的维护成本, 甚至是数据丢失的问题, 所以谨慎使用.</p></blockquote><h2 id="时间类型"><a href="#时间类型" class="headerlink" title="时间类型"></a>时间类型</h2><p>目前ClickHouse有三种时间类型</p><ul><li>Date接受<code>年-月-日</code>的字符串, 比如 ‘1999-09-09’</li><li>Datetime接受<code> 年-月-日 时-分-秒</code>的字符串, 比如 ‘1999-09-09 09:09:09’</li><li>Datetime64 接受<code> 年-月-日 时-分-秒.亚秒</code>的字符串吗, 比如 ‘1999-09-09 09:09:09.99’</li></ul><p>日期类型, 用两个字节存储, 表示从1970-01-01到当前的日期值</p><p>还有很多的数据结构, 可以参考官方文档</p><p><a href="https://clickhouse.yandex/docs/zh/data_types/">官方文档</a></p><h2 id="数组类型"><a href="#数组类型" class="headerlink" title="数组类型"></a>数组类型</h2><p>&emsp;Array(T): 由T类型元素组成的数组</p><p>&emsp;Ｔ可以时任意类型, 包括数组类型, 但是不推荐使用多维数组 ,ClickHouse对多维数组的支持有限, 例如, 不能再MergeTree表中存储多维数组.</p><p>创建数组的方式1, 使用array函数</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">array</span>(<span class="number">1</span>, <span class="number">2</span>) <span class="keyword">AS</span> x, toTypeName(x) ;</span><br></pre></td></tr></table></figure><p>创建数组的方式2, 使用方括号</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> [<span class="number">1</span>, <span class="number">2</span>] <span class="keyword">AS</span> x, toTypeName(x);</span><br></pre></td></tr></table></figure><h1 id="表引擎"><a href="#表引擎" class="headerlink" title="表引擎"></a>表引擎</h1><h2 id="表引擎的使用"><a href="#表引擎的使用" class="headerlink" title="表引擎的使用"></a>表引擎的使用</h2><p>表引擎时ClickHouse的一大特色, 可以说, 表引擎决定了如何存储表的数据. 包括: </p><ul><li>数据的存储方式和位置, 写到哪里以及从哪里读取数据</li><li>支持那些查询以及如何支持</li><li>并发数据访问</li><li>索引的使用(如果存在)</li><li>是否可以执行多线程请求</li><li>数据复制参数</li></ul><p>表引擎的使用方式就是必须显示的在创建表时定义该表使用的引擎, 以及引擎使用的相关参数</p><blockquote><p>引擎的名称大小写敏感</p></blockquote><h2 id="TinyLog"><a href="#TinyLog" class="headerlink" title="TinyLog"></a>TinyLog</h2><p>&emsp;以列文件的形式保存在磁盘上, 不支持索引, 没有并发控制. 一般保存少量数据的小表, 生产环境上作用有限, 可以用于平时练习测试的时候使用</p><p>如: </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_tinylog ( id String, name String) engine<span class="operator">=</span>TinyLog;</span><br></pre></td></tr></table></figure><h2 id="Memory"><a href="#Memory" class="headerlink" title="Memory"></a>Memory</h2><p>&emsp;内存引擎, 数据以未压缩的原始形式直接保存在内存之中, 服务器重启数据就会消失. 读写操作不会相互阻塞, 不支持索引, 简单查询下有非常非常高的性能表现(超过10G/s)</p><p>&emsp;一般用到它的地方不多, 除了用来测试, 就是在需要非常高的性能, 同时数据量又不大的情况下, 上限大概1亿行的场景</p><h2 id="MergeTree"><a href="#MergeTree" class="headerlink" title="MergeTree"></a>MergeTree</h2><p>&emsp;ClickHouse中最强大的表引擎当属MergeTree(合并树)引擎以及该系列(*MergeTree)中的其他引擎, 支持索引和分区, 地位可以相当与innodb之与Mysql, 而基于MergeTree, 还衍生除了很多小弟, 也是非常有特色的引擎.</p><ul><li><p>建表语句</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_order_mt(</span><br><span class="line">    id UInt32,</span><br><span class="line">    sku_id String,</span><br><span class="line">    total_amount <span class="type">Decimal</span>(<span class="number">16</span>,<span class="number">2</span>),</span><br><span class="line">    create_time  Datetime</span><br><span class="line"> ) engine <span class="operator">=</span>MergeTree</span><br><span class="line">   <span class="keyword">partition</span> <span class="keyword">by</span> toYYYYMMDD(create_time)</span><br><span class="line">   <span class="keyword">primary</span> key (id)</span><br><span class="line">   <span class="keyword">order</span> <span class="keyword">by</span> (id,sku_id);</span><br></pre></td></tr></table></figure></li><li><p>插入数据</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span>  t_order_mt <span class="keyword">values</span></span><br><span class="line">(<span class="number">101</span>,<span class="string">&#x27;sku_001&#x27;</span>,<span class="number">1000.00</span>,<span class="string">&#x27;2020-06-01 12:00:00&#x27;</span>) ,</span><br><span class="line">(<span class="number">102</span>,<span class="string">&#x27;sku_002&#x27;</span>,<span class="number">2000.00</span>,<span class="string">&#x27;2020-06-01 11:00:00&#x27;</span>),</span><br><span class="line">(<span class="number">102</span>,<span class="string">&#x27;sku_004&#x27;</span>,<span class="number">2500.00</span>,<span class="string">&#x27;2020-06-01 12:00:00&#x27;</span>),</span><br><span class="line">(<span class="number">102</span>,<span class="string">&#x27;sku_002&#x27;</span>,<span class="number">2000.00</span>,<span class="string">&#x27;2020-06-01 13:00:00&#x27;</span>),</span><br><span class="line">(<span class="number">102</span>,<span class="string">&#x27;sku_002&#x27;</span>,<span class="number">12000.00</span>,<span class="string">&#x27;2020-06-01 13:00:00&#x27;</span>),</span><br><span class="line">(<span class="number">102</span>,<span class="string">&#x27;sku_002&#x27;</span>,<span class="number">600.00</span>,<span class="string">&#x27;2020-06-02 12:00:00&#x27;</span>);</span><br></pre></td></tr></table></figure></li></ul><p>&emsp;MergeTree其实还有很多的参数, 绝大多数可以使用默认值即可, 但是三个参数是更加重要的, 也涉及了关于MergeTree的很多概念</p>]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ClickHouse </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ElasticSearch</title>
      <link href="/2010/12/12/ElasticSearch/"/>
      <url>/2010/12/12/ElasticSearch/</url>
      
        <content type="html"><![CDATA[<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>​    ElasticSearch 是一个基于Lucene的搜索服务器. 它提供了一个分布式多用户能力的全文搜索引擎, 基于Restful web接口. ElasticSearch是用Java开发的, 并作为Apache许可条款下的开放源码发布, 是当前流行的企业级搜索引擎.</p><h2 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h2><ul><li>为用户提供按关键字查询的全文搜索的功能</li><li>实现企业海量数据的处理分析的解决方案. 大数据领域的重要的一份子, 如著名的ELK框架</li><li>作为OLAP数据库, 对数据进行统计分析</li></ul><h2 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h2><h3 id="天然的分布式数据库"><a href="#天然的分布式数据库" class="headerlink" title="天然的分布式数据库"></a>天然的分布式数据库</h3><p>​    es将数据划分成为多个shard, 下面的图中P0-P2, 多个shard, 可以组成一组完整的数据, 这些shard可以分布在集群中的各个机器的节点中. 随着数据的不断增加, 集群可以增加多个分片, 将多个分片放在多个机子上, 达到负载均衡和横向扩展.</p><p><img src="https://cdn.jsdelivr.net/gh/quietCC/imageBed/img/image-20211030141411975.png"></p><h3 id="天然索引之倒排索引"><a href="#天然索引之倒排索引" class="headerlink" title="天然索引之倒排索引"></a>天然索引之倒排索引</h3><p>​    es的所有的数据都是默认进行索引的, 这点和mysql正好相反, mysql是默认不加索引的, 要添加索引必须特别说明, es只有不添加索引的时候才需要进行说明.</p><p>​    而且es使用的是倒排索引, 和mysql的B+Tree索引是不同的</p><p><strong>传统关系型数据库</strong></p><p><img src="https://cdn.jsdelivr.net/gh/quietCC/imageBed/img/image-20211030142414194.png"></p><blockquote><p>弊端:</p><ol><li>传统的关系型数据库对于关键词的查询, 只能逐字逐行的进行匹配, 性能非常差</li><li>匹配的方式不合理, 如果用like进行匹配, 根本匹配不到. 但是考虑到使用者的用户体验的话, 除了完全匹配的记录, 还应该显示一部分近似匹配的记录, 至少应该匹配到”手机”</li></ol></blockquote><p><strong>倒排索引是怎么处理的</strong></p><p>全文搜索引擎目前主流的索引技术就是倒排索引的方式</p><p>传统的保存数据的方式都是</p><p>记录 -&gt; 单词</p><p>倒排索引的保存数据的方式是</p><p>单词 -&gt; 记录</p><p>比如搜索”红海行动”</p><p>但是数据库中保存的数据如图</p><p><img src="https://cdn.jsdelivr.net/gh/quietCC/imageBed/img/image-20211030143011898.png"></p><p>那么搜索引擎是如何能将两者匹配上的呢?</p><p>基于分词技术构建倒排索引:</p><p>首先每个记录保存数据的时候, 都不会直接存入数据库, 系统会先对数据进行分词, 然后以倒排索引结构进行保存, 如下:</p><p><img src="https://cdn.jsdelivr.net/gh/quietCC/imageBed/img/image-20211030143834809.png"></p><p>​    之后当用户进行搜素的时候, 会将搜索的关键词也进行分词, 将”红海行动”分割成为”红海”和”行动”两个单词. </p><p>​    这样的话, 会先使用”红海”进行匹配, 得到id = 1和id = 2的记录编号, 然后再用”行动”匹配可以迅速的定位id为1和3的记录.</p><p>​    全文索引通常还会根据匹配程度进行打分, 显然1号记录能匹配的次数更多. 所以显示的时候以评分进行排序, 1号记录会排到最前面, 而2,3号记录也可以匹配到</p><p><strong>索引结构对比</strong></p><p>B+Tree</p><p><img src="https://cdn.jsdelivr.net/gh/quietCC/imageBed/img/image-20211030145330037.png"></p><p>Lucene倒排索引结构</p><p><img src="https://cdn.jsdelivr.net/gh/quietCC/imageBed/img/image-20211030145352628.png"></p><p>可以看到lucene为倒排索引部分又增加了一层Term Index结构, 用于快速定位, 而这个Term Index是缓存在内存中的, 但是mysql的B+Tree并不在内存中, 所以整体来看ES的速度更加快, 但是同时也更加消耗资源</p><blockquote><p>Term Index =&gt; Term Dictonary =&gt; posting list</p></blockquote><h3 id="天然索引之Doc-Value列式存储"><a href="#天然索引之Doc-Value列式存储" class="headerlink" title="天然索引之Doc Value列式存储"></a>天然索引之Doc Value列式存储</h3><p>​    倒排索引在搜索包含指定的词条和文档时候非常的高效, 但是在相反的操作时表现很差, 这个相反的操作指的是: 查询一个文档中包含哪些词条.</p><p>​    具体来说, 倒排索引在搜索的时候最为高效, 但是在排序, 聚合等与指定字段相关的操作时效率是低下的, 这个时候就需要用doc_values.</p><p>​    在ElasticSearch中, Doc Values就是一种列式存储结构, 默认的情况下每个字段的DocValues都是激活的. </p><p>​    索引中某个字段的存储结构如下:</p><p><img src="https://cdn.jsdelivr.net/gh/quietCC/imageBed/img/image-20211030150221406.png"></p><p>​    列式存储结构非常适合排序, 聚合以及字段相关的脚本操作, 而且这种存储方式便于压缩, 尤其是数字类型. 压缩之后能够大大的减小磁盘的存储空间, 提升访问速度</p><h2 id="Lucene与elasticsearch的关系"><a href="#Lucene与elasticsearch的关系" class="headerlink" title="Lucene与elasticsearch的关系"></a>Lucene与elasticsearch的关系</h2><p>​    待补充</p><h1 id="elasticsearch的基本概念"><a href="#elasticsearch的基本概念" class="headerlink" title="elasticsearch的基本概念"></a>elasticsearch的基本概念</h1><h2 id="对象名词解释"><a href="#对象名词解释" class="headerlink" title="对象名词解释"></a>对象名词解释</h2><table><thead><tr><th>对象名词</th><th>解释</th></tr></thead><tbody><tr><td>cluster</td><td>整个elasticsearch默认就是集群状态的, 整个集群是一份完整, 互相备份的数据</td></tr><tr><td>node</td><td>集群中的一个阶段, 一般指一个进程就是一个node</td></tr><tr><td>shard</td><td>分片, 即使一个节点中的护具也会通过hash算法, 分成多个分片存放, 7.x默认是1片, 后续的版本默认是5片</td></tr><tr><td>index</td><td>index相当与table</td></tr><tr><td>type</td><td>一种逻辑分区, 7.x版本已经废除, 用固定的_doc占位代替</td></tr><tr><td>document</td><td>类似于rdbms的row, 面向对象里面的object</td></tr><tr><td>field</td><td>相当于字段, 属性</td></tr></tbody></table><h2 id="服务状态查询"><a href="#服务状态查询" class="headerlink" title="服务状态查询"></a>服务状态查询</h2><ul><li><p>GET /_cat/indices?v 查询各个索引的状态</p><blockquote><p>indices  index的复数</p></blockquote><p><strong>表头的含义</strong></p><ul><li>health 索引的健康状态</li><li>index 索引名</li><li>pri 索引主分片数量</li><li>req 索引复制分片数量</li><li>store.size 索引主分片, 复制分片, 总占用存储空间</li><li>pri.store.size 索引总暂用空间, 不计算复制分片的占用空&gt;</li></ul></li><li><p>GET /_cat/health?v 服务整体状态查询</p><ul><li>cluster 集群名称</li><li>status 集群状态, green代表是健康( 健康指的是所有主分片都正常而且每个主分片都至少有一个副本, 集群状态 ), yellow代表分配了所有主分片, 但是至少缺少一个副本, 此时集群的数据仍然是完整的, 主副本都在单点, red代表部分主分片不可用, 可能已经丢失了数据</li><li>node.total 代表在线的节点的总数量</li><li>node.data 代表在线的数据节点的数量</li><li>shard active_shards 存活的分片的数量</li><li>pri  active_primary_shards 存活的主分片的数量</li><li>relo relocating_shards 迁移中的分片数量, 正常情况下数量是为0的</li><li>init initializing_shards 初始化中的分片数量, 正常情况下数量为0</li><li>unassign unassigned_shards 未分配的分片, 正常情况下为0</li><li>pending_tasks 准备中的任务, 任务指的是迁移分片等 , 正常情况下为0</li><li>max_task_wait_time 任务最长等待时间</li><li>active_shards_percent 正常分片百分比, 正常情况为0</li></ul></li><li><p>GET /_cat/nodes?v 查询各个节点的状态</p><ul><li>heap.percent 堆内存占用百分比</li><li>ram.percent 内存占用百分比</li><li>cpu cpu占用百分比</li><li>master 其中*表示集群中的主节点</li><li>name 表示节点名字</li></ul></li><li><p>GET /_cat/shards/xxx 查询某个索引的分片情况</p><ul><li>index 索引名称</li><li>shard 分片序号</li><li>pri req p表示的是该分片的主分片, r表示的是该分片的复制分片</li><li>store 表示该分片占用的存储空间</li><li>node 所属节点和节点名称</li><li>docs 分片存放的文档数量</li></ul></li></ul><h1 id="elasticsearch-restful-api-DSL"><a href="#elasticsearch-restful-api-DSL" class="headerlink" title="elasticsearch restful api(DSL)"></a>elasticsearch restful api(DSL)</h1><p>DSL全称为 Domain Specific Language, 即特定领域专用语言</p><h2 id="es中保存的数据"><a href="#es中保存的数据" class="headerlink" title="es中保存的数据"></a>es中保存的数据</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span>  <span class="title">Movie</span> </span>&#123;</span><br><span class="line"> String id;</span><br><span class="line">     String name;</span><br><span class="line">     Double doubanScore;</span><br><span class="line">     List&lt;Actor&gt; actorList;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Actor</span></span>&#123;</span><br><span class="line">String id;</span><br><span class="line">String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>​    这两个对象如果放在关系型数据库保存, 会被拆成两张表, 但是elasticsearch使用一个json表示一个document.</p><p>​    所以它保存到es中应该是:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;id&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line"><span class="attr">&quot;name&quot;</span>: <span class="string">&quot;operation red sea&quot;</span>,</span><br><span class="line"><span class="attr">&quot;doubanScore&quot;</span>: <span class="string">&quot;8.5&quot;</span>,</span><br><span class="line"><span class="attr">&quot;actorList&quot;</span>: [</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;id&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line"><span class="attr">&quot;name&quot;</span>: <span class="string">&quot;zhangyi&quot;</span></span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;id&quot;</span>: <span class="string">&quot;2&quot;</span>,</span><br><span class="line"><span class="attr">&quot;name&quot;</span>: <span class="string">&quot;haiqing&quot;</span></span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;id&quot;</span>: <span class="string">&quot;3&quot;</span>,</span><br><span class="line"><span class="attr">&quot;name&quot;</span>: <span class="string">&quot;zhanghanyu&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="对数据的操作"><a href="#对数据的操作" class="headerlink" title="对数据的操作"></a>对数据的操作</h2><ul><li><p>增加一个索引</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PUT /movie_index</span><br></pre></td></tr></table></figure></li><li><p>删除一个索引</p><p>es是不删除也不会修改任何数据的, 而是增加了版本号</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETE /movie_index</span><br></pre></td></tr></table></figure></li><li><p>新增文档</p><p>格式PUT /movie_index/type/id</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">PUT /movie_index/_doc/<span class="number">1</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;id&quot;</span>: <span class="number">1</span>,</span><br><span class="line"><span class="attr">&quot;name&quot;</span>: <span class="string">&quot;operation red sea&quot;</span>,</span><br><span class="line"><span class="attr">&quot;doubanScore&quot;</span>: <span class="number">8.5</span>,</span><br><span class="line"><span class="attr">&quot;actorList&quot;</span>: [</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;id&quot;</span>: <span class="number">1</span>,</span><br><span class="line"><span class="attr">&quot;name&quot;</span>: <span class="string">&quot;zhang yi&quot;</span></span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;id&quot;</span>: <span class="number">2</span>,</span><br><span class="line"><span class="attr">&quot;name&quot;</span>: <span class="string">&quot;hai qing&quot;</span></span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;id&quot;</span>: <span class="number">3</span>,</span><br><span class="line"><span class="attr">&quot;name&quot;</span>: <span class="string">&quot;zhang han yu&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">PUT /movie_index/_doc/<span class="number">2</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;id&quot;</span>: <span class="number">2</span>,</span><br><span class="line"><span class="attr">&quot;name&quot;</span>: <span class="string">&quot;operation meigong river&quot;</span>,</span><br><span class="line"><span class="attr">&quot;doubanScore&quot;</span>: <span class="number">8.0</span>,</span><br><span class="line"><span class="attr">&quot;actorList&quot;</span>: [</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;id&quot;</span>: <span class="number">3</span>,</span><br><span class="line"><span class="attr">&quot;name&quot;</span>: <span class="string">&quot;zhang han yu&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">PUT /movie_index/_doc/<span class="number">3</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;id&quot;</span>: <span class="number">3</span>,</span><br><span class="line"><span class="attr">&quot;name&quot;</span>: <span class="string">&quot;incident red sea&quot;</span>,</span><br><span class="line"><span class="attr">&quot;doubanScore&quot;</span>: <span class="number">5.0</span>,</span><br><span class="line"><span class="attr">&quot;actorList&quot;</span>: [</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;id&quot;</span>: <span class="number">4</span>,</span><br><span class="line"><span class="attr">&quot;name&quot;</span>: <span class="string">&quot;zhang chen&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>如果之前没有创建过index或则和type, es会进行自动创建</p></blockquote></li><li><p>新增文档(非幂等操作)</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">POST /movie_index/_doc</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;id&quot;</span>: <span class="number">3</span>,</span><br><span class="line"><span class="attr">&quot;name&quot;</span>: <span class="string">&quot;incident red sea&quot;</span>,</span><br><span class="line"><span class="attr">&quot;doubanScore&quot;</span>: <span class="number">5.0</span>,</span><br><span class="line"><span class="attr">&quot;actorList&quot;</span>: [</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;id&quot;</span>: <span class="number">4</span>,</span><br><span class="line"><span class="attr">&quot;name&quot;</span>: <span class="string">&quot;zhang chen&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p> 重复执行会新增重复的数据, _id会随机生成</p></blockquote></li><li><p>修改 - 整体替换 (PUT)</p><p>和新增没有区别, 要求是必须包括全部的字段</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">PUT /movie_index/_doc/<span class="number">3</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;id&quot;</span>: <span class="string">&quot;3&quot;</span>,</span><br><span class="line"><span class="attr">&quot;name&quot;</span>: <span class="string">&quot;incident red sea&quot;</span>,</span><br><span class="line"><span class="attr">&quot;doubanScore&quot;</span>: <span class="number">5.0</span>,</span><br><span class="line"><span class="attr">&quot;actorList&quot;</span>: [</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;id&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line"><span class="attr">&quot;name&quot;</span>: <span class="string">&quot;zhang chen&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>修改- 某一个字段 (POST)</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">POST movie_index/_update/<span class="number">3</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;doc&quot;</span>: &#123;</span><br><span class="line"><span class="attr">&quot;doubanScore&quot;</span>: <span class="number">7.0</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>删除一个document</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETE movie_index/_doc/<span class="number">3</span></span><br></pre></td></tr></table></figure></li><li><p>直接用id查找</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET movie_index/_doc/<span class="number">1</span></span><br></pre></td></tr></table></figure></li><li><p>搜索type的全部数据, 也就是搜索doc里面的全部数据</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET movie_index/_search</span><br></pre></td></tr></table></figure></li><li><p>按照条件进行查询</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">GET movie_index/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;query&quot;</span>:&#123;</span><br><span class="line">    <span class="attr">&quot;match_all&quot;</span>: &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>match_all  全部匹配</p></blockquote></li><li><p>按照分词进行查询</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">GET movie_index/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;query&quot;</span>:&#123;</span><br><span class="line">    <span class="attr">&quot;match&quot;</span>: &#123;<span class="attr">&quot;name&quot;</span>:<span class="string">&quot;red&quot;</span>&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>根据匹配的成都, 会影像数据的相关度评分, 而相关度评分会影响默认排名.</p></blockquote><p>评分公式:</p><p><img src="https://cdn.jsdelivr.net/gh/quietCC/imageBed/img/image-20211105142315586.png"></p><p>正面因素: 命中次数, 命中长度比例</p><p>负面因素: 关键词在该字段的其他词条中出现的次数</p></li><li><p>按照分词的子属性进行查询</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">GET movie_index/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;query&quot;</span>:&#123;</span><br><span class="line">    <span class="attr">&quot;match&quot;</span>: &#123;<span class="attr">&quot;actorList.name&quot;</span>:<span class="string">&quot;zhang&quot;</span>&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>按照短语进行查询 match_phrase</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">GET movie_index/_search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;query&quot;</span>:&#123;</span><br><span class="line">      <span class="attr">&quot;match_phrase&quot;</span>: &#123;<span class="attr">&quot;name&quot;</span>:<span class="string">&quot;operation red&quot;</span>&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>按照短语进行查询, 不再利用分词技术, 直接用短语在原始数据中进行匹配</p></blockquote></li><li><p>过滤- 符合查询</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">GET movie_index/_search</span><br><span class="line">&#123; </span><br><span class="line">    <span class="attr">&quot;query&quot;</span>:&#123;</span><br><span class="line">        <span class="attr">&quot;bool&quot;</span>:&#123;</span><br><span class="line">          <span class="attr">&quot;filter&quot;</span>:[ &#123;<span class="attr">&quot;term&quot;</span>: &#123;  <span class="attr">&quot;actorList.id&quot;</span>: <span class="string">&quot;3&quot;</span>  &#125;&#125; </span><br><span class="line">           ], </span><br><span class="line">           <span class="attr">&quot;must&quot;</span>:&#123;<span class="attr">&quot;match&quot;</span>:&#123;<span class="attr">&quot;name&quot;</span>:<span class="string">&quot;red&quot;</span>&#125;&#125;</span><br><span class="line">         &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>must和should的区别: must是必须有, should是在其他条件命中的情况下, shoule命中给分并显示, 如果should未命中则只显示不给分</p></blockquote></li><li><p>过滤 - 按照范围进行过滤</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">GET movie_index/_search</span><br><span class="line">&#123;</span><br><span class="line">   <span class="attr">&quot;query&quot;</span>: &#123;</span><br><span class="line">     <span class="attr">&quot;bool&quot;</span>: &#123;</span><br><span class="line">       <span class="attr">&quot;filter&quot;</span>: &#123;</span><br><span class="line">         <span class="attr">&quot;range&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;doubanScore&quot;</span>: &#123;<span class="attr">&quot;gte&quot;</span>: <span class="number">8</span>&#125;</span><br><span class="line">         &#125;</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>关于操作符的范围</p><table><thead><tr><th>操作符</th><th>解释</th></tr></thead><tbody><tr><td>gt</td><td>大于</td></tr><tr><td>lt</td><td>小于</td></tr><tr><td>gte</td><td>大于等于 great than or equals</td></tr><tr><td>lte</td><td>小于等于 less than or equals</td></tr></tbody></table></li><li><p>根据查询条件进行删除和修改</p><p><strong>_delete_by_query</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">POST movie_index/_doc/_delete_by_query </span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;query&quot;</span>:&#123;</span><br><span class="line">    <span class="attr">&quot;term&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;actorList.name.keyword&quot;</span>: <span class="string">&quot;zhang chen&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>_update_by_query</strong></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">POST movie_index/_doc/_update_by_query</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;script&quot;</span>:<span class="string">&quot;ctx._source[&#x27;actorList &#x27;][0][ &#x27;name&#x27;]=&#x27;zhang san feng&#x27;&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;query&quot;</span>:&#123;</span><br><span class="line">    <span class="attr">&quot;term&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;actorList.name.keyword&quot;</span>: <span class="string">&quot;zhang chen&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>排序 sort</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">GET movie_index/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;query&quot;</span>:&#123;</span><br><span class="line">    <span class="attr">&quot;match&quot;</span>: &#123;<span class="attr">&quot;name&quot;</span>:<span class="string">&quot;red sea&quot;</span>&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  , <span class="attr">&quot;sort&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;doubanScore&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;order&quot;</span>: <span class="string">&quot;desc&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>分页查询</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">GET movie_index/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;query&quot;</span>: &#123; <span class="attr">&quot;match_all&quot;</span>: &#123;&#125; &#125;,</span><br><span class="line">  <span class="attr">&quot;from&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">&quot;size&quot;</span>: <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>高亮显示</p><p>用于网页中通用的特殊标签来高亮显示结果中的关键字</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">GET movie_index/_search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;query&quot;</span>:&#123;</span><br><span class="line">      <span class="attr">&quot;match&quot;</span>: &#123;<span class="attr">&quot;name&quot;</span>:<span class="string">&quot;red sea&quot;</span>&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;highlight&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;fields&quot;</span>: &#123;<span class="attr">&quot;name&quot;</span>:&#123;&#125; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>也可以自定义高亮标签</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">GET movie_index/_search</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;query&quot;</span>:&#123;</span><br><span class="line">      <span class="attr">&quot;match&quot;</span>: &#123;<span class="attr">&quot;name&quot;</span>:<span class="string">&quot;red sea&quot;</span>&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;highlight&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;fields&quot;</span>: &#123;<span class="attr">&quot;name&quot;</span>:&#123;<span class="attr">&quot;pre_tags&quot;</span>: <span class="string">&quot;&lt;span color=&#x27;red&#x27;&gt;&quot;</span>,<span class="attr">&quot;post_tags&quot;</span>:<span class="string">&quot;&lt;/span&gt;&quot;</span>&#125;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>聚合 aggs</p><p>取出每个演员共参演了多少部电影</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">GET movie_index/_search</span><br><span class="line">&#123; </span><br><span class="line">  <span class="attr">&quot;aggs&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;groupby_actor&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;terms&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;field&quot;</span>: <span class="string">&quot;actorList.name.keyword&quot;</span>  </span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>每个演员参演电影的平均分是多少分, 并按照评分进行排序</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">GET movie_index/_search</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;aggs&quot;</span>: &#123;</span><br><span class="line"><span class="attr">&quot;groupby_actor_id&quot;</span>: &#123;</span><br><span class="line"><span class="attr">&quot;terms&quot;</span>: &#123;</span><br><span class="line"><span class="attr">&quot;field&quot;</span>: <span class="string">&quot;actorList.name.keyword&quot;</span>,</span><br><span class="line"><span class="attr">&quot;order&quot;</span>: &#123;</span><br><span class="line"><span class="attr">&quot;avg_score&quot;</span>: <span class="string">&quot;desc&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">&quot;aggs&quot;</span>: &#123;</span><br><span class="line"><span class="attr">&quot;avg_score&quot;</span>: &#123;</span><br><span class="line"><span class="attr">&quot;avg&quot;</span>: &#123;</span><br><span class="line"><span class="attr">&quot;field&quot;</span>: <span class="string">&quot;doubanScore&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>聚合的时候为何要加上.keyword后缀呢?</p><p>​    .keyword是某个字符串字段, 专门存储不分词格式的副本, 在某些场景中只允许用不分词的格式, 比如过滤filter, 比如聚合aggs, 所以字段要加上.keyword的后缀</p></li></ul><h2 id="SQL的使用"><a href="#SQL的使用" class="headerlink" title="SQL的使用"></a>SQL的使用</h2><p>elasticsearch sql是6.3版本以后的功能, 可以支持一些最基本的sql查询语句.</p><p>当前情况: </p><ul><li><p>只支持select操作, insert , update, delete一律不支持</p></li><li><p>6.3以前的版本不支持</p></li><li><p>sql比dsl更丰富的函数. 参考: <a href="https://www.elastic.co/guide/en/elasticsearch/reference/6.6/sql-functions.html">elastic文档</a></p></li><li><p>不支持窗口函数</p></li><li><p>sql少一些特的功能, 比如高亮, 分页</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">GET  /_sql?format=txt</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;query&quot;</span>:<span class="string">&quot;select actorList.name.keyword, avg(doubanScore) from movie_index  where match(name,&#x27;red&#x27;) group by actorList.name.keyword limit 1 &quot;</span> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="中文分词"><a href="#中文分词" class="headerlink" title="中文分词"></a>中文分词</h2><p>elasticsearch本身自带的中文分词, 就是单纯的把中文一个字一个字的分开, 根本没有词汇的盖面, 但是在实际的应用中, 用户都是以词汇为条件, 进行查询和匹配的, 如果能够把文章以词汇为单位分来的话, 那么与用户的查询条件能够更加贴切的匹配上, 查询的速度也更加的快速</p><p><a href="https://github.com/medcl/elasticsearch-analysis-ik">分词器下载地址</a></p><p>不同的分词器, 分词有着明显的区别, 所以以后定义一个type不能再使用默认的mapping了, 要手工创建mapping, 因为需要选择分词器</p><h2 id="关于mapping"><a href="#关于mapping" class="headerlink" title="关于mapping"></a>关于mapping</h2><p>之前说type可以理解为table, 那么每个字段的数据类型是如何定义的呢</p><ul><li><p>查看mapping</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET movie_index/_mapping/xxx</span><br></pre></td></tr></table></figure><p>实际上每个type中的字段是什么数据类型, 是由mapping定义的. </p><p>但是如果没有设定mapping, 系统会自动的根据一条数据的格式来推断出应该的数据格式</p><ul><li>true/false  boolean</li><li>1020  long</li><li>20.1 float</li><li>“2018-02-21”  date</li><li>“hello world”  text + keyword</li></ul><p>默认的情况下只有text会进行分词, keyworld是不会分词的字符串</p><p>mapping除了自动定义, 还可以手动定义, 但是只能对新家的, 没有数据的字段进行定义. 一旦有了数据就无法再次进行修改</p><blockquote><p>注意: 虽然每个field的数据放在不同的type下, 但是同一个名字的field在一个index下只能有一种mapping定义</p></blockquote></li><li><p>基于中文分词搭建索引</p><ol><li><p>建立mapping</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">PUT movie_chn</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;settings&quot;</span>: &#123;</span><br><span class="line"><span class="attr">&quot;number_of_shards&quot;</span>: <span class="number">1</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">&quot;mappings&quot;</span>: &#123;</span><br><span class="line"><span class="attr">&quot;properties&quot;</span>: &#123;</span><br><span class="line"><span class="attr">&quot;id&quot;</span>: &#123;</span><br><span class="line"><span class="attr">&quot;type&quot;</span>: <span class="string">&quot;long&quot;</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">&quot;name&quot;</span>: &#123;</span><br><span class="line"><span class="attr">&quot;type&quot;</span>: <span class="string">&quot;text&quot;</span>,</span><br><span class="line"><span class="attr">&quot;analyzer&quot;</span>: <span class="string">&quot;ik_smart&quot;</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">&quot;doubanScore&quot;</span>: &#123;</span><br><span class="line"><span class="attr">&quot;type&quot;</span>: <span class="string">&quot;double&quot;</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">&quot;actorList&quot;</span>: &#123;</span><br><span class="line"><span class="attr">&quot;properties&quot;</span>: &#123;</span><br><span class="line"><span class="attr">&quot;id&quot;</span>: &#123;</span><br><span class="line"><span class="attr">&quot;type&quot;</span>: <span class="string">&quot;long&quot;</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">&quot;name&quot;</span>: &#123;</span><br><span class="line"><span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>插入数据</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">PUT /movie_chn/_doc/<span class="number">1</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;id&quot;</span>: <span class="number">1</span>,</span><br><span class="line"><span class="attr">&quot;name&quot;</span>: <span class="string">&quot;红海行动&quot;</span>,</span><br><span class="line"><span class="attr">&quot;doubanScore&quot;</span>: <span class="number">8.5</span>,</span><br><span class="line"><span class="attr">&quot;actorList&quot;</span>: [</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;id&quot;</span>: <span class="number">1</span>,</span><br><span class="line"><span class="attr">&quot;name&quot;</span>: <span class="string">&quot;张译&quot;</span></span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;id&quot;</span>: <span class="number">2</span>,</span><br><span class="line"><span class="attr">&quot;name&quot;</span>: <span class="string">&quot;海清&quot;</span></span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;id&quot;</span>: <span class="number">3</span>,</span><br><span class="line"><span class="attr">&quot;name&quot;</span>: <span class="string">&quot;张涵予&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">PUT /movie_chn/_doc/<span class="number">2</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;id&quot;</span>: <span class="number">2</span>,</span><br><span class="line"><span class="attr">&quot;name&quot;</span>: <span class="string">&quot;湄公河行动&quot;</span>,</span><br><span class="line"><span class="attr">&quot;doubanScore&quot;</span>: <span class="number">8.0</span>,</span><br><span class="line"><span class="attr">&quot;actorList&quot;</span>: [</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;id&quot;</span>: <span class="number">3</span>,</span><br><span class="line"><span class="attr">&quot;name&quot;</span>: <span class="string">&quot;张涵予&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">PUT /movie_chn/_doc/<span class="number">3</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;id&quot;</span>: <span class="number">3</span>,</span><br><span class="line"><span class="attr">&quot;name&quot;</span>: <span class="string">&quot;红海事件&quot;</span>,</span><br><span class="line"><span class="attr">&quot;doubanScore&quot;</span>: <span class="number">5.0</span>,</span><br><span class="line"><span class="attr">&quot;actorList&quot;</span>: [</span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">&quot;id&quot;</span>: <span class="number">4</span>,</span><br><span class="line"><span class="attr">&quot;name&quot;</span>: <span class="string">&quot;张晨&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>查询数据</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">GET /movie_chn/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;query&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;match&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;红海战役&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">GET /movie_chn/_search</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;query&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;term&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;actorList.name&quot;</span>: <span class="string">&quot;张译&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol></li></ul><h2 id="分割索引"><a href="#分割索引" class="headerlink" title="分割索引"></a>分割索引</h2><p>分割索引就是根据时间间隔将一个业务数据的索引切分成为多个索引</p><p>比如将order_info 变成order_info_20200101, order_info_20200102</p><p><strong>这样做是有两个好处的</strong></p><ol><li>查询范围优化: 因为一般情况下并不会查询全部时间周期数据, 那么通过切分索引, 物理上减少了扫描数据的范围, 也是对性能的优化</li><li>结构变化的灵活性: 因为elasticsearch不允许对数据进行修改, 但是实际使用中索引的结构和配置那么只要对下一个时间间隔的索引进行修改, 原来的索引位置保存原状, 这样就保证了一定的灵活性</li></ol><h2 id="索引别名-aliases"><a href="#索引别名-aliases" class="headerlink" title="索引别名 _aliases"></a>索引别名 _aliases</h2><p>索引别名就像一个快捷方式或者软连接, 可以指向一个或者多个索引, 也可以给任何一个需要索引名称的api来使用, 别名带给我们极大的灵活性, 允许我们做下面的操作</p><ol><li>给多个索引分组(例如, last_three_months)</li><li>给索引的一个子集创建视图</li><li>在运行的集群中可以无缝的从一个索引切换到另一个索引</li></ol><ul><li><p>创建索引别名</p><p>在创建表的时候直接声明</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">PUT movie_chn_2020</span><br><span class="line">&#123;  <span class="attr">&quot;aliases&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;movie_chn_2020-query&quot;</span>: &#123;&#125;</span><br><span class="line">  &#125;, </span><br><span class="line">  <span class="attr">&quot;mappings&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;movie&quot;</span>:&#123;</span><br><span class="line">      <span class="attr">&quot;properties&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>:&#123;</span><br><span class="line">          <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;long&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;name&quot;</span>:&#123;</span><br><span class="line">          <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;text&quot;</span></span><br><span class="line">          , <span class="attr">&quot;analyzer&quot;</span>: <span class="string">&quot;ik_smart&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;doubanScore&quot;</span>:&#123;</span><br><span class="line">          <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;double&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;actorList&quot;</span>:&#123;</span><br><span class="line">          <span class="attr">&quot;properties&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;id&quot;</span>:&#123;</span><br><span class="line">              <span class="attr">&quot;type&quot;</span>:<span class="string">&quot;long&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">&quot;name&quot;</span>:&#123;</span><br><span class="line">              <span class="attr">&quot;type&quot;</span>:<span class="string">&quot;keyword&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>为已经存在的索引增加别名</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">POST  _aliases</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;actions&quot;</span>: [</span><br><span class="line">        &#123; <span class="attr">&quot;add&quot;</span>:    &#123; <span class="attr">&quot;index&quot;</span>: <span class="string">&quot;movie_chn_xxxx&quot;</span>, <span class="attr">&quot;alias&quot;</span>: <span class="string">&quot;movie_chn_2020-query&quot;</span> &#125;&#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>也可以通过增加过滤条件缩小查询范围, 建立一个子集的视图</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">POST  _aliases</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;actions&quot;</span>: [</span><br><span class="line">        &#123; <span class="attr">&quot;add&quot;</span>:    </span><br><span class="line">&#123; <span class="attr">&quot;index&quot;</span>: <span class="string">&quot;movie_chn_xxxx&quot;</span>, </span><br><span class="line"><span class="attr">&quot;alias&quot;</span>: <span class="string">&quot;movie_chn0919-query-zhhy&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;filter&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;term&quot;</span>: &#123;  <span class="attr">&quot;actorList.id&quot;</span>: <span class="string">&quot;3&quot;</span></span><br><span class="line">                 &#125;</span><br><span class="line">               &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>查询别名</p><p>和普通的索引没什么区别</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET movie_chn_2020-query/_search</span><br></pre></td></tr></table></figure></li><li><p>删除某个索引的别名</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">POST  _aliases</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;actions&quot;</span>: [</span><br><span class="line">        &#123; <span class="attr">&quot;remove&quot;</span>:    &#123; <span class="attr">&quot;index&quot;</span>: <span class="string">&quot;movie_chn_xxxx&quot;</span>, <span class="attr">&quot;alias&quot;</span>: <span class="string">&quot;movie_chn_2020-query&quot;</span> &#125;&#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>为某个别名进行无缝的切换</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">POST /_aliases</span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;actions&quot;</span>: [</span><br><span class="line">        &#123; <span class="attr">&quot;remove&quot;</span>: &#123; <span class="attr">&quot;index&quot;</span>: <span class="string">&quot;movie_chn_xxxx&quot;</span>, <span class="attr">&quot;alias&quot;</span>: <span class="string">&quot;movie_chn_2020-query&quot;</span> &#125;&#125;,</span><br><span class="line">        &#123; <span class="attr">&quot;add&quot;</span>:    &#123; <span class="attr">&quot;index&quot;</span>: <span class="string">&quot;movie_chn_yyyy&quot;</span>, <span class="attr">&quot;alias&quot;</span>: <span class="string">&quot;movie_chn_2020-query&quot;</span> &#125;&#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>查询别名的列表</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET  _cat/aliases?v</span><br></pre></td></tr></table></figure></li></ul><h2 id="索引模板"><a href="#索引模板" class="headerlink" title="索引模板"></a>索引模板</h2><p>index Template 索引模板, 顾名思义, 就是创建索引的磨具, 其中可以定义一系列的规则来帮助我们构建符合特定业务的需求的索引 mappings和settings, 通过使用index Template可以让我们的索引具备可预知的一致性</p><ul><li><p>创建模板</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">PUT _template/template_movie2020</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;index_patterns&quot;</span>: [<span class="string">&quot;movie_test*&quot;</span>],                  </span><br><span class="line">  <span class="attr">&quot;settings&quot;</span>: &#123;                                               </span><br><span class="line">    <span class="attr">&quot;number_of_shards&quot;</span>: <span class="number">1</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;aliases&quot;</span> : &#123; </span><br><span class="line">    <span class="attr">&quot;&#123;index&#125;-query&quot;</span>: &#123;&#125;,</span><br><span class="line">    <span class="attr">&quot;movie_test-query&quot;</span>:&#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;mappings&quot;</span>: &#123;                                          </span><br><span class="line"><span class="attr">&quot;_doc&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;properties&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: &#123;</span><br><span class="line">          <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;keyword&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">&quot;movie_name&quot;</span>: &#123;</span><br><span class="line">          <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;text&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;analyzer&quot;</span>: <span class="string">&quot;ik_smart&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>其中”index_pattern”:[“movie_test*”]的含义就是凡是往movie_test开头的索引写入数据的时候, 如果索引不存在, 那么es会根据此模板自动创建索引</p><p>在”aliases”中用{index}表示, 获得真正的创建的所以名称</p><p><strong>测试</strong>：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">POST movie_test_2020xxxx/_doc</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;id&quot;</span>:<span class="string">&quot;333&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;zhang3&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>查看系统中已有的模板清单</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET  _cat/templates</span><br></pre></td></tr></table></figure></li><li><p>查看某个模板清单</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GET  _template/template_movie2020</span><br><span class="line">或者</span><br><span class="line">GET  _template/template_movie*</span><br></pre></td></tr></table></figure></li></ul><h1 id="分布式读写原理"><a href="#分布式读写原理" class="headerlink" title="分布式读写原理"></a>分布式读写原理</h1><h2 id="写流程"><a href="#写流程" class="headerlink" title="写流程"></a>写流程</h2><p>新建索引和删除请求都是写操作, 必须在主分片上面完成之后才能被复制到相关的副本切片</p><p><img src="https://cdn.jsdelivr.net/gh/quietCC/imageBed/img/image-20211110085454992.png"></p><p>新建, 索引和删除文档所需要的步骤</p><ol><li>客户端向node1发送新建, 索引或者删除的请求</li><li>节点使用文档的_id确定文档属于分片0, 请求会被转发到node3上, 因为分片0的主分片目前被分配在node3上</li><li>node3在主分片上面执行请求, 如果成功之后, 他将请求并行转发到node1和node2上的副本分片上, 一旦所有的副本分片都报告成功之后, node3将向协调节点报告成功, 协调节点向客户端报告成功</li></ol><blockquote><p>协调节点: 接受客户端请求的节点</p></blockquote><p>如何根据_id计算应该转发到哪个分片?</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shard =  hash(routing)  % number_of_primary_shards</span><br></pre></td></tr></table></figure><p>routing 是一个可变值，默认是文档的 _id ，也可以设置成一个自定义的值。 routing 通过 hash 函数生成一个数字，然后这个数字再除以 number_of_primary_shards （主分片的数量）后得到余数 。这个分布在 0 到 number_of_primary_shards-1 之间的余数，就是我们所寻求的文档所在分片的位置。</p><p>那么如果shard的数量变化, 是不是数据就要重新rehash呢, 不会, 因为一个index 的shards数量是不能改变的.</p><h2 id="读流程-有语义疑问"><a href="#读流程-有语义疑问" class="headerlink" title="读流程(有语义疑问)"></a>读流程(有语义疑问)</h2><p>我们可以冲主分片或则和其他副本任意的副本分片检索文档</p><p><img src="https://cdn.jsdelivr.net/gh/quietCC/imageBed/img/image-20211110090517450.png"></p><p>从主分片或者副本分片检索文档的步骤顺序:</p><ol><li>客户端向node1发送获取请求</li><li>节点使用文档的_id来学顶文档数据分片0, 分片0的副本分片存储在所有的三个节点上, 在这种情况下, 它将请求转发到node2上</li><li>node2将文档返回给node1, 然后将文档返回给客户端</li></ol><blockquote><p>在处理读取请求时, 协调节点在每次请求的时候都会通过轮询所有副本分片来达到负载均衡, 在文档被检索的时候, 已经被索引的文档可能已经存在于主分片上, 但是还没有复制到副本分片上. 在这种情况下, 副本分片可能会报告文档不存在, 但是主分片可能会成功返回文档. 一旦索引请求成功返回给客户端, 文档在主分片和副本分片都是可用的</p></blockquote><h2 id="搜索流程"><a href="#搜索流程" class="headerlink" title="搜索流程"></a>搜索流程</h2><p><img src="https://cdn.jsdelivr.net/gh/quietCC/imageBed/img/image-20211110091212193.png"></p><ul><li><p>搜索被执行成为一个二阶段, 我们成为 Query Then Fetch</p></li><li><p>在初始查询阶段, 查询会广播导索引中每一个分片拷贝(主分片或者副本分片), 每个分片在本地执行搜索并构建一个匹配文档的大小为 from + size的优先队列</p><blockquote><p>ps: 在搜索的时候是会查询FileSystem Cache的, 但是有部分数据还在Memory Buffer, 所以搜索是近实时的</p></blockquote></li><li><p>每个分片返回各自有限队列中所有文档的id和排序值给协调节点, 它合并这些值到自己的优先队列中来产生一个全局排序后的结果列表</p></li><li><p>接下来就是取回阶段, 协调节点判别出那些文档需要被取回并向相关的分片提交多个get请求, 每个分片加载并丰富文档, 如果有需要的话, 接着返回文档给协调节点, 一旦所有的文档都被取回了, 协调节点返回结果给客户端</p></li><li><p>Query Then Fetch的搜索类型在文档相关性打分的时候参考的是本分片的数据, 这样在文档的数量比较少的时候可能不会准确, DFS Query Then Fetch增加了一个预查询的处理, 询问Term和Document frequency, 这个评分会更加的准确, 但是性能可能会变差</p></li></ul><h2 id="文档的修改和并发控制"><a href="#文档的修改和并发控制" class="headerlink" title="文档的修改和并发控制"></a>文档的修改和并发控制</h2><p>elasticsearch中的全部文档数据都是不可变的, 数据不可以被修改, 只能通过版本号的放是不断增加, 这样做的主要目的是解决更新过程中的并发冲突问题</p><p><img src="https://cdn.jsdelivr.net/gh/quietCC/imageBed/img/image-20211110092515040.png"></p><ul><li><p>悲观并发控制</p><p>这种方法被关系型数据库广泛使用, 它假定有变更冲突可能发生, 因此阻塞访问资源以防止冲突, 一个典型的例子就是读取一行数据之前先将其锁住, 确保只有防止锁的线程能够对这行数据进行修改.</p></li><li><p>乐观并发控制</p><p>elasticsearch中使用的这种方法假定冲突是不可能发生的, 并且不会阻塞正在尝试的操作, 然而, 如果元数据在读写当中被修改, 更新将会失败, 程序在接下来将决定应该如何解决冲突. 例如可以重新给嗯行, 使用新的数据, 或者将相关的情况报告给客户</p></li></ul><h2 id="删除方式"><a href="#删除方式" class="headerlink" title="删除方式"></a>删除方式</h2><p>如果该文档被删除, 也不会直接物理删除, 而是通过给文档打上删除的标记, 进行逻辑删除, 直到该索引触发合并的时候, 才会进行物理删除, 释放存储空间</p><h2 id="关于shard与段的划分"><a href="#关于shard与段的划分" class="headerlink" title="关于shard与段的划分"></a>关于shard与段的划分</h2><p>由于索引是以天为单位进行建立的, 如果业务线很多, 每个索引又不注意控制分片, 如积月累下来一个集群几万到几十万个分片也是不难见到的.</p><h2 id="shard太多带来的危害"><a href="#shard太多带来的危害" class="headerlink" title="shard太多带来的危害"></a>shard太多带来的危害</h2><p> 每个分片都有lucene索引, 这些索引都会消耗cpu和内存, 同样的数据, 分片越多, 额外消耗的cpu和内存就会越多, 会出现1+1&gt;2的情况</p><p>shard的目的是为了负载均衡让每个觉点的硬件充分发挥, 但是如果分片多的情况下, 在单个几点上的多个shard同时接受请求, 并对本节点的资源形成了竞争, 实际上反而造成了内存的消耗.</p>]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Flink-CEP</title>
      <link href="/2010/12/12/Flink-CEP/"/>
      <url>/2010/12/12/Flink-CEP/</url>
      
        <content type="html"><![CDATA[<h1 id="什么是Flink-CEP"><a href="#什么是Flink-CEP" class="headerlink" title="什么是Flink CEP"></a>什么是Flink CEP</h1><p>Flink CEP是一个基于FLink 的复杂时间处理库, 可以从多个数据流中发现复杂的事件, 识别有意义的事件(例如机会或者威胁), 并尽快做出响应, 而不是需要等待几天或者相当长的事件才发现问题.</p><h1 id="Flink-CEP-API"><a href="#Flink-CEP-API" class="headerlink" title="Flink CEP API"></a>Flink CEP API</h1><p>CEP API的核心是Pattern的API, 它允许你快速定义复杂的事件模式. 每个模式包含多个阶段(stage), 或者我们可以称之为状态, 从一个状态切换到另一个状态, 用户可以指定条件, 这些条件可以作用在临近的事件或者独立的事件上.</p>]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flink </tag>
            
            <tag> CEP </tag>
            
            <tag> pattern </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flink-DataStream流处理算子</title>
      <link href="/2010/12/12/Flink-DataStream%E6%B5%81%E5%A4%84%E7%90%86%E7%AE%97%E5%AD%90/"/>
      <url>/2010/12/12/Flink-DataStream%E6%B5%81%E5%A4%84%E7%90%86%E7%AE%97%E5%AD%90/</url>
      
        <content type="html"><![CDATA[<p>参考引用链接: </p><ul><li><a href="https://github.com/legendtkl/paper_reading/blob/main/realtime-compute/Chandy-Lamport.md">分布式快照算法: Chandy-Lamport</a></li><li>五分钟学大数据微信公众号</li><li>尚硅谷大数据学习文档</li><li>Flink1.13官方文档</li></ul><p>程序执行流程图</p><pre class="mermaid">graph LR    environment --> source --> transform --> sink</pre><h1 id="Environment"><a href="#Environment" class="headerlink" title="Environment"></a>Environment</h1><h2 id="getExecutionEnvironment"><a href="#getExecutionEnvironment" class="headerlink" title="getExecutionEnvironment"></a>getExecutionEnvironment</h2><p>​    创建一个执行环境, 表示当前执行程序的萨湖给你下文, 如果程序是独立调用的, 则此方法返回本地执行环境; 如果从命令行客户端提交到集群, 则此方法返回的是集群的客户端环境</p><p>​    getExecutionEnvironment会根据查询运行的方式返回什么样的运行环境, 是最常用的一种创建执行环境</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ExecutionEnvironment env = ExecutionEnvironment.getExecutionment();</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();</span><br></pre></td></tr></table></figure><p>​    当没有设置并行度的时候, 以<code>fink-conf.yaml</code>中的配置为准, 默认的并行度是1</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">parallelism.default:</span> <span class="number">1</span></span><br></pre></td></tr></table></figure><h2 id="createLocalEnvironment"><a href="#createLocalEnvironment" class="headerlink" title="createLocalEnvironment"></a>createLocalEnvironment</h2><p>​    返回本地执行环境, 需要在调用的时候指定默认的并行度</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LocalStreamEnvironment env = StreamExecutionEnvironment.createLocalEnvironment(<span class="number">1</span>);</span><br></pre></td></tr></table></figure><h2 id="createRemoteEnvironment"><a href="#createRemoteEnvironment" class="headerlink" title="createRemoteEnvironment"></a>createRemoteEnvironment</h2><p>​    返回集群执行环境, 将Jar提交到远程服务器中, 需要在调用的时候指定JobManager的IP和端口号, 并执行要在集群中运行的jar包</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">StreamExecutionEnvionment env = StreamEnvironmentExecution.createRemoteEnvironment(<span class="string">&quot;jobManagerHostName&quot;</span>,<span class="number">6123</span>,<span class="string">&quot;YOURPATH//WordCount.jar&quot;</span>)</span><br></pre></td></tr></table></figure><h1 id="Source"><a href="#Source" class="headerlink" title="Source"></a>Source</h1><p>​    Flink可以使用<code>StreamExecutionEnvironment.addSource(source)</code>来为我们的程序添加数据来源</p><p>​    Flink提供了很多实现好的SourceFunction, 当然我们也可以<strong>通过SourceFunction来定义非并行的Source或者实现.</strong></p><p>​    ParallelSourceFunction接口或者扩展RichParallelSourceFunction来定义并行的Source</p><p>​    FLink在流处理上大概分为四类</p><ul><li>基于本地文件的source</li><li>基于文件的source</li><li>基于网络套接字的source</li><li>自定义的source</li></ul><h1 id="Transform"><a href="#Transform" class="headerlink" title="Transform"></a>Transform</h1><p>用户通过算子能够将一个或者多个DataStream抓换成为新的DataStream, 在应用程序中可以将多个数据转换算子并合并成为一个复杂的数据流拓扑</p><h2 id="数据流转换"><a href="#数据流转换" class="headerlink" title="数据流转换"></a>数据流转换</h2><h3 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h3><p><strong>DataStream</strong> ➡​ <strong>DataStream</strong></p><pre class="mermaid">graph LR    A[DataStream] --> DataStream</pre><p>Takes one element and products one element, A map function that doubles the values of the stream:</p><blockquote><p>取一个元素并产生一个元素, 下面是map函数将输入流的值进行加倍输出的例子</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();</span><br><span class="line">        <span class="comment">// 设置并行度</span></span><br><span class="line">        env.setParallelism(<span class="number">1</span>);</span><br><span class="line">        env.fromElements(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">                <span class="comment">// 泛型分别对应着输入类型和输出类型</span></span><br><span class="line">                .map(<span class="keyword">new</span> MapFunction&lt;Integer, Integer&gt;() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> Integer <span class="title">map</span><span class="params">(Integer value)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                        <span class="keyword">return</span> value * <span class="number">2</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">                .print();</span><br><span class="line">        env.execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Flatmap"><a href="#Flatmap" class="headerlink" title="Flatmap"></a>Flatmap</h3><p><strong>DataStream</strong> ​➡​ <strong>DataStream</strong></p><pre class="mermaid">graph LR    A[DataStream] --> DataStream</pre><p>Takes one element and products zero, one , or more elements. A flatmap function that splits sentences to words:</p><blockquote><p>取一个元素并产生0个, 1个或者多个元素,  下面是一个flatmap算子将句子拆分为单词的栗子</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();</span><br><span class="line">        <span class="comment">// 设置并行度</span></span><br><span class="line">        env.setParallelism(<span class="number">1</span>);</span><br><span class="line">        env.fromElements(<span class="string">&quot;hello world&quot;</span>, <span class="string">&quot;java python scala&quot;</span>, <span class="string">&quot;hello&quot;</span>, <span class="string">&quot;hello java hello&quot;</span>)</span><br><span class="line">                .flatMap(<span class="keyword">new</span> FlatMapFunction&lt;String, String&gt;() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">flatMap</span><span class="params">(String value, Collector&lt;String&gt; out)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                        String[] strings = value.split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">                        <span class="keyword">for</span> (String string : strings) &#123;</span><br><span class="line">                            out.collect(string);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">                .print();</span><br><span class="line">        env.execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Filter"><a href="#Filter" class="headerlink" title="Filter"></a>Filter</h3><p><strong>DataStream</strong> ​➡​ <strong>DataStream</strong></p><pre class="mermaid">graph LR    A[DataStream] --> DataStream</pre><p>Evaluates a boolean function for each element and retains those for which the function returns true . A filter that filters out zero values:</p><blockquote><p>为每个元素计算一个布尔函数, 保留返回值为true的元素, 下面的filter将值为0的数据进行过滤</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();</span><br><span class="line">        <span class="comment">// 设置并行度</span></span><br><span class="line">        env.setParallelism(<span class="number">1</span>);</span><br><span class="line">        env.fromElements(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">0</span>, <span class="number">56</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">24</span>, <span class="number">0</span>)</span><br><span class="line">                .filter(<span class="keyword">new</span> FilterFunction&lt;Integer&gt;() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">filter</span><span class="params">(Integer value)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                        <span class="keyword">if</span> (value != <span class="number">0</span>) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">                        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">                .print();</span><br><span class="line">        env.execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="KeyBy"><a href="#KeyBy" class="headerlink" title="KeyBy"></a>KeyBy</h3><p><strong>DataStream</strong> ​➡​ <strong>KeyedStream</strong></p><pre class="mermaid">graph LR    A[DataStream] -->|k1| B[KeyedStream]    A -->|k2| C[KeyedStream]    A -->|k3| D[KeyedStream]    A -->|kn| E[.....]</pre><p>logically partitions a stream into disjoint partitions. All records with the same key are assigned to the same partition. Internally , keyBy() is implemented with hash partitioning. There are different ways to specify keys.</p><blockquote><p>在逻辑上将一个流划分为不相交的分区, 所有具有相同的键的记录都会被分配到同一个分区. 在内部, keyBy()是通过hash值实现的, 指定键的方法有很多种</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();</span><br><span class="line">        <span class="comment">// 设置并行度</span></span><br><span class="line">        env.setParallelism(<span class="number">2</span>);</span><br><span class="line">        env.fromElements(<span class="string">&quot;hello world&quot;</span>, <span class="string">&quot;java python scala&quot;</span>, <span class="string">&quot;hello&quot;</span>, <span class="string">&quot;hello java hello&quot;</span>)</span><br><span class="line">                .keyBy(<span class="keyword">new</span> KeySelector&lt;String, Character&gt;() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> Character <span class="title">getKey</span><span class="params">(String value)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                        <span class="keyword">return</span> value.charAt(<span class="number">0</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">                .print();</span><br><span class="line">        env.execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>A type cannot be a key if:</p><ol><li>it is a pojo type but does not override the hashCode() method and relies on the Object.hashCode() implementation.</li><li>it is an array of any type.</li></ol><blockquote><p>在以下的情况下, 类型不能是键: </p><ol><li>它是一种POJO类型, 但是没有覆盖hashCode[]方法并且依赖于Object.hashCode()实现. </li><li>它是任何类型的数组.</li></ol></blockquote><h3 id="Reduce"><a href="#Reduce" class="headerlink" title="Reduce"></a>Reduce</h3><p><strong>KeyedStream</strong> ➡ <strong>DataStream</strong></p><pre class="mermaid">graph LR    KeyedStream --> DataStream</pre><p>A “rolling” reduce on a  keyed data stream. Combines the current element with the last reduced value and emits the new value.</p><p>A reduce fuction that creates a stream of partial sums.</p><blockquote><p>键控数据流上的数据进行”滚动”减少. 将当前元素与最后减少的值组合并发出新的值</p><p>下面的reduce函数创建部分的流, 单词统计示例</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();</span><br><span class="line">        <span class="comment">// 设置并行度</span></span><br><span class="line">        env.setParallelism(<span class="number">1</span>);</span><br><span class="line">        env.fromElements(<span class="string">&quot;hello world&quot;</span>, <span class="string">&quot;java python scala&quot;</span>, <span class="string">&quot;hello&quot;</span>, <span class="string">&quot;hello java hello&quot;</span>)</span><br><span class="line">                <span class="comment">// 当使用lambda表达式的时候要注意发生泛型擦除的问题, 所以我们对时候lambda的函数后面</span></span><br><span class="line">                <span class="comment">// 追加returns方法指定输出的结果类型</span></span><br><span class="line">                .flatMap(</span><br><span class="line">                        (String in, Collector&lt;Tuple2&lt;String, Integer&gt;&gt; out) -&gt; &#123;</span><br><span class="line">                            String[] strings = in.split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">                            <span class="keyword">for</span> (String string : strings) out.collect(Tuple2.of(string, <span class="number">1</span>));</span><br><span class="line">                        &#125;</span><br><span class="line">                ).returns(Types.TUPLE(Types.STRING, Types.INT))</span><br><span class="line">                <span class="comment">// 以二元组的第一个元素为key</span></span><br><span class="line">                .keyBy(r -&gt; r.f0)</span><br><span class="line">                <span class="comment">// 使用reduce对相同key的每条数据保留一份状态值</span></span><br><span class="line">                .reduce(<span class="keyword">new</span> ReduceFunction&lt;Tuple2&lt;String, Integer&gt;&gt;() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> Tuple2&lt;String, Integer&gt; <span class="title">reduce</span><span class="params">(Tuple2&lt;String, Integer&gt; value1, Tuple2&lt;String, Integer&gt; value2)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                        <span class="keyword">return</span> Tuple2.of(</span><br><span class="line">                                value1.f0,</span><br><span class="line">                                value1.f1 + value2.f1</span><br><span class="line">                        );</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">                .print();</span><br><span class="line">        env.execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>:chestnut:<strong>数字流保存最大值和最小值示例</strong></p><p>自定义source</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IntegerSource</span> <span class="keyword">implements</span> <span class="title">SourceFunction</span>&lt;<span class="title">Integer</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> running = <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">private</span> Random random = <span class="keyword">new</span> Random();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(SourceContext&lt;Integer&gt; ctx)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (running) &#123;</span><br><span class="line">            ctx.collect(random.nextInt(<span class="number">1000</span>));</span><br><span class="line">            Thread.sleep(<span class="number">1000L</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cancel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        running = <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Flink Demo</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();</span><br><span class="line">        env.setParallelism(<span class="number">1</span>);</span><br><span class="line">        env.addSource(<span class="keyword">new</span> IntegerSource())</span><br><span class="line">                <span class="comment">// 创建tuple, 用于存储最大值和最小值</span></span><br><span class="line">                .map(ele -&gt; Tuple2.of(ele, ele))</span><br><span class="line">                <span class="comment">// 因为存在泛型擦除问题, 所以这里要声明向下游传递的数据类型</span></span><br><span class="line">                .returns(Types.TUPLE(Types.INT, Types.INT))</span><br><span class="line">                <span class="comment">// 放到一个逻辑分区之内进行判断</span></span><br><span class="line">                .keyBy(ele -&gt; <span class="number">1</span>)</span><br><span class="line">                .reduce(<span class="keyword">new</span> ReduceFunction&lt;Tuple2&lt;Integer, Integer&gt;&gt;() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> Tuple2&lt;Integer, Integer&gt; <span class="title">reduce</span><span class="params">(Tuple2&lt;Integer, Integer&gt; value1, Tuple2&lt;Integer, Integer&gt; value2)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                        <span class="comment">//value1 代表当前元素, value2 代表上游输出的元素, 是状态保存的一种体现</span></span><br><span class="line">                        <span class="keyword">return</span> Tuple2.of(</span><br><span class="line">                                <span class="comment">//保存最大值</span></span><br><span class="line">                                value1.f0 &gt; value2.f0 ? value1.f0 : value2.f0,</span><br><span class="line">                                <span class="comment">// 保存最小值</span></span><br><span class="line">                                value1.f1 &lt; value2.f1 ? value1.f1 : value2.f1</span><br><span class="line">                        );</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">                .print();</span><br><span class="line">        env.execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Sink"><a href="#Sink" class="headerlink" title="Sink"></a>Sink</h1><h1 id="RichFunction"><a href="#RichFunction" class="headerlink" title="RichFunction"></a>RichFunction</h1><p>每一个并行子任务都有自己的声明周期</p><ul><li>open(): 在算子的计算逻辑前执行一次, 适合做初始化的工作, 比如打开链接</li><li>close(): 在算子的计算逻辑执行完毕之后执行一次, 比如关闭链接</li><li>getRuntimeContext(): 用来获取当前算子的上下文信息, 比如当前算子所处的并i性子任务的索引等等</li></ul><p>MapFunction ➡ RichMapFunction</p><p>FilterFunction ➡ RichFilterFunction</p><p>FlatMapFunction ➡ RichFlatMapFunction</p><p>SourceFunction ➡ RichSourceFunction</p><p>SinkFunction ➡ RichSInkFunction</p><h2 id="RichMapFunction"><a href="#RichMapFunction" class="headerlink" title="RichMapFunction"></a>RichMapFunction</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();</span><br><span class="line">        env.setParallelism(<span class="number">1</span>);</span><br><span class="line">        env.fromElements(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">                .map(<span class="keyword">new</span> RichMapFunction&lt;Integer, Integer&gt;() &#123;</span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">open</span><span class="params">(Configuration parameters)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                        <span class="keyword">super</span>.open(parameters);</span><br><span class="line">                        System.out.println(<span class="string">&quot;梦开始的地方&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                        <span class="keyword">super</span>.close();</span><br><span class="line">                        System.out.println(<span class="string">&quot;梦结束了&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="function"><span class="keyword">public</span> Integer <span class="title">map</span><span class="params">(Integer value)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                        <span class="keyword">return</span> value * value;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">                .print();</span><br><span class="line"></span><br><span class="line">        env.execute();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>🍕<strong>result</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">梦开始的地方</span><br><span class="line">1</span><br><span class="line">4</span><br><span class="line">9</span><br><span class="line">16</span><br><span class="line">梦结束了</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flink </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flink-Watermark</title>
      <link href="/2010/12/12/Flink-Watermark/"/>
      <url>/2010/12/12/Flink-Watermark/</url>
      
        <content type="html"><![CDATA[<p><strong>参考引用链接:</strong> </p><ul><li>基于Apache Flink的流式计算 (崔星灿译)</li></ul><h1 id="事件时间与水位线概述"><a href="#事件时间与水位线概述" class="headerlink" title="事件时间与水位线概述"></a>事件时间与水位线概述</h1><h2 id="事件时间"><a href="#事件时间" class="headerlink" title="事件时间"></a>事件时间</h2><p>&emsp;事件时间是数据流中事件实际发生的事件, 它以附加在数据流中事件的时间戳为依据. 这些时间戳通常在事件数据进入流处理管道之前就存在, 比如事件的生成时间.  如图所示, 即使事件有延迟, 事件时间窗口也能准确地将事件分配到窗口中, 从而反应出真是发生的情况</p><p><img src="https://cdn.jsdelivr.net/gh/quietCC/imageBed/img/image-20211211194513675.png"></p><p>&emsp;事件时间将处理速度和结果内容彻底解耦. 基于事件时间的操作是可以预测的, 其结果具有确定性. 无论数据流的处理速度如何, 事件到达算子的顺序怎样, 基于事件时间的窗口会生成同样的结果.</p><p>​    &emsp;使用事件时间要克服的挑战之一是如何处理延迟事件, 普遍存在的无序问题也可以得到解决. 假设有一名名叫鲍勃的玩家和爱丽丝玩的同一款在线手游, 但是因为网络供应商不同, 爱丽丝的手机在隧道中没有信号了, 但是鲍勃的手机依旧联网向游戏后端发送数据</p><p>&emsp;<strong>依据事件时间, 我们可以保证在数据乱顺序的情况下结果依然正确, 而且结合可重放的数据流, 时间戳带来的确定性允许你对历史数据进行”快进”. 这意味着你可以通过重放数据流来分析历史数据, 就如同它们是实时产生的一样.</strong> 此外, 你可以把计算”快进”到现在, 这样一旦你的程序赶上了当前事件产生的进度, 它能够以完全相同的程序逻辑作为实时应用继续运行.</p><h2 id="水位线"><a href="#水位线" class="headerlink" title="水位线"></a>水位线</h2><p>&emsp;我们要怎么决定<strong>事件时间的触发时机</strong>呢? 或者说, 我们需要等待多久才能确定已经收到了所有发生在某个特定时间点之前的事件? 换而言之, 我们需要多久才能确定已经收到了所有发生在某个特定时间点之前的事件? 此外, 我们如何<strong>得知数据会产生延迟</strong>? 因为分布式系统实现的不确定性以及外部组件可能引发任意延迟, 这两个答案都是没有完美的答案的. 我们可以使用水位线来设定事件时间窗口的行为</p><p>&emsp;水位线是一个<strong>全局进度指标,</strong> 表示<strong>我们不确信不会再有延迟事件来到的某个时间点.</strong>  本质上, 水位线提供了一个逻辑时钟, 用来通知系统当前的事件时间. 当一个算子接收到时间为T的水位线, 就可以认为不会再收到任何时间戳小于或等于T的事件了.  水位线无论对于事件时间窗口还是处理乱序事件的算子都很关键. 算子一旦收到某个水位线, 就相当于收到了信号: 某个特定时间区间的时间戳已经到齐了, 可以触发窗口计算或者对接受的数据进行排序了. </p><p>&emsp;<strong>水位线允许我们在结果的准确性和延迟之间做出取舍.</strong>  激进的水位线策略保证了低延迟, 但随之而来的是低可信度. 该情况下, 延迟事件可能会在水位线之后到来, 我们必须额外加一些代码来处理它们. 反之, 如果水位线过于保守, 虽然可信度得到了保证, 但可能会无所谓地增加处理延时.</p><p>&emsp;无论水位线是由用户定义还是自动生成的, 只要存在”拖后腿”的任务, 追踪分布式系统中的全局进度就可能出现问题, 因此简单地依赖水位线并不是总可以高枕无忧. 而流处理系统很关键的一点是能够提供某些机制来处理那些可能晚于水位线的吃到时间. 根据应用需求的不同, 你可能会直接忽略这些事件, 将他们写入日志或者利用它们去修正之前的结果. </p><h1 id="简单架构描述"><a href="#简单架构描述" class="headerlink" title="简单架构描述"></a>简单架构描述</h1><h2 id="事件时间处理"><a href="#事件时间处理" class="headerlink" title="事件时间处理"></a>事件时间处理</h2><p>&emsp;虽然处理时间世居于处理机器的本地事件, 相对容易理解, 但是它会产生一些较为随意, 不一致且无法重现的结果. 相反, 事件时间语义会生成可重现且一致性的结果, 这也是很多流处理用例的刚需, 但和基于处理时间语义的应用相比, 基于事件时间的应用需要一些额外的配置, 此外, 相比纯粹使用处理时间的引擎, 支持事件时间的流处理引擎内部要更加的复杂.</p><p>&emsp;Flink不仅针对常见的事件时间提供了直观易用的原语, 还支持一些表达能力很强的API, 允许使用者以自定义算子的方式时间更高级的事件时间处理应用. 在面对这些高级应用的时候, 充分理解Flink内部事件处理机制通常会有所帮助. 有时候更是必要的, Flink在处理时间语义时所采用的两个概念分别时: 记录时间戳和水位线. 接下老会介绍Flink内部如何实现和处理时间戳以及水位线以支持事件时间语义的流式应用</p><h2 id="时间戳"><a href="#时间戳" class="headerlink" title="时间戳"></a>时间戳</h2><p>&emsp;在事件时间模式下, Flink流式应用处理的所有记录都必须包含时间戳, 时间戳将记录和特定的时间点进行关联, 这些时间点通常时记录所对应事件发生的时间. 但实际上应用可以自由选择时间戳的含义, 只要保证流记录的时间戳会随着数据流的前进大致递增即可, 正如”时间语义”中所述, 基本上所有现实应用场景都会出现一定程度的时间戳乱序. </p><p>&emsp;当Flink以事件时间模式处理数据的时候, 会根据记录的时间戳触发事件相关算子的计算, 例如, 时间窗口算子会根据记录关联的时间戳将其分配到窗口中. **Flink内部采用8字节的Long值对时间戳进行编码, 并将它们以元数据(metadata)的形式附加在记录上. ** 内置算子会将这个Long值解析为毫秒精度的Unix. 但是自定义算子可以有自己的时间戳解析机制, 如将精度调整为微秒.</p><h2 id="水位线-1"><a href="#水位线-1" class="headerlink" title="水位线"></a>水位线</h2><p>&emsp;除了记录的时间戳, Flink基于事件时间的应用还必须提供水位线(watermark). 水位线用于在事件时间应用中推断每个任务当前的事件时间. 基于时间的算子会使用这个时间来触发计算并推动进度前进, 例如: 基于时间窗口的任务会使其事件时间超过窗口结束边界时进行最终的窗口计算并发出结果.</p><p>&emsp;在Flink中, 水位线是利用一些包含Long值时间戳的特殊记录来实现的. 如图所示, 它们像带有额外时间戳的常规记录一样在数据中流动</p><p><img src="https://cdn.jsdelivr.net/gh/quietCC/imageBed/img/image-20211211204651727.png"></p><h3 id="水位线具有两个基本属性"><a href="#水位线具有两个基本属性" class="headerlink" title="水位线具有两个基本属性"></a>水位线具有两个基本属性</h3><ol><li>必须是单调递增的,这是为了确保任务中的事件时间时钟正确前进, 不会倒退</li><li>和记录的时间戳存在联系, 一个时间戳为T的水位线表示, 接下来所有记录的时间戳一定都大于T</li></ol><p>&emsp;<strong>第二个属性可用来处理数据流中时间戳乱序的记录, 例如上图中时间戳为3和5的记录可能会包含乱序的时间戳, 这些算子只有当自己的事件之中(由接受的水位线驱动)指示不必再等那些包含相关时间戳的记录的时候,  才会最终触发计算.</strong> 当任务收到一个违反水平线属性, 即时间戳小于或者前一个水位线的记录的时候, 该记录本应该参与的计算可能已经完成, 我们称此类记录为迟到数据(late record).  为了处理迟到的数据, Flink提供了不同的机制, 后面会接受对于迟到数据的处理</p><p>&emsp;水平线的意义之一在于它允许应用控制结果的完整性和延迟. 如果水位线和记录的时间戳非常接近, 那结果的处理延迟就会很低, 因为任务无需等待过多记录就可以触发最终的计算.  但是同时结果的完整性可能会受到影响, 因为可能有部分相关记录被视为是迟到的数据, 没能参与运算. 相反, 非常”保守”的水位线会增加处理的延迟,  但同时结果的完整性也会有所提升.</p><h2 id="水位线传播和事件时间"><a href="#水位线传播和事件时间" class="headerlink" title="水位线传播和事件时间"></a>水位线传播和事件时间</h2><p>Flink内部将水位线实现为特殊的记录,  它们可以通过算子任务进行接受和发送, 任务内部的时间服务 (time service)会维护一些计时器(timer),  它们依靠接收到水位线来激活. 这些计时器是由任务再时间服务内注册, 并在将来的某个时间点执行计算. 例如, 窗口算子会为每个活动窗口注册一个计时器, 它们会在事件时间超过窗口的结束时间时清理窗口状态.</p>]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flink </tag>
            
            <tag> Watermark </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flink-Windows函数</title>
      <link href="/2010/12/12/Flink-Windows%E5%87%BD%E6%95%B0/"/>
      <url>/2010/12/12/Flink-Windows%E5%87%BD%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<p>参考引用链接: </p><ul><li><a href="https://github.com/legendtkl/paper_reading/blob/main/realtime-compute/Chandy-Lamport.md">分布式快照算法: Chandy-Lamport</a></li><li>五分钟学大数据微信公众号</li><li>尚硅谷大数据学习文档</li><li>Flink1.13官方文档</li></ul><h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><p>windows are at the heart of processing infinite streams. Windows split the stream into “buckets” of finite size, over which we can apply computations. This document focuses on how windowing is performed in Flink and how the programmer can benefit to the maximum from its offered functitonality.</p><p>The general structure if w windowed Flink program is presented below, The first snippet refers to keyed streams, while the second to non-keyed ones. As one can see, the only difference is the keyBy(…) call for the keyed streams and the window(…) which becomes windowAll(…) for non-keyed streams, This is also going to serve as a roadmap for the rest of the page.</p><blockquote><p>windows是处理无界流的核心. windows将流分成有限大小的”桶”, 我们可以在这些桶上映用计算. 我们重点介绍如何在Flink中执行窗口化以及程序员如何从其提供的功能中获得最大的收益</p><p>窗口化的Flink的程序一般结构如下所示. 第一个片段是指监控流, 第二个指控的是非键控流, 如您所见, 唯一的区别是keyBy(…)对键控流的调用是window, 对于非键控流调用的是windowAll. 这也将作为页面其余部分的路线图</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">stream</span><br><span class="line">       .keyBy(...)               &lt;-  keyed versus non-keyed windows</span><br><span class="line">       .window(...)              &lt;-  required: <span class="string">&quot;assigner&quot;</span></span><br><span class="line">      [.trigger(...)]            &lt;-  optional: <span class="string">&quot;trigger&quot;</span> (<span class="keyword">else</span> <span class="keyword">default</span> trigger)</span><br><span class="line">      [.evictor(...)]            &lt;-  optional: <span class="string">&quot;evictor&quot;</span> (<span class="keyword">else</span> no evictor)</span><br><span class="line">      [.allowedLateness(...)]    &lt;-  optional: <span class="string">&quot;lateness&quot;</span> (<span class="keyword">else</span> zero)</span><br><span class="line">      [.sideOutputLateData(...)] &lt;-  optional: <span class="string">&quot;output tag&quot;</span> (<span class="keyword">else</span> no side output <span class="keyword">for</span> late data)</span><br><span class="line">       .reduce/aggregate/apply()      &lt;-  required: <span class="string">&quot;function&quot;</span></span><br><span class="line">      [.getSideOutput(...)]      &lt;-  optional: <span class="string">&quot;output tag&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">stream</span><br><span class="line">       .windowAll(...)           &lt;-  required: <span class="string">&quot;assigner&quot;</span></span><br><span class="line">      [.trigger(...)]            &lt;-  optional: <span class="string">&quot;trigger&quot;</span> (<span class="keyword">else</span> <span class="keyword">default</span> trigger)</span><br><span class="line">      [.evictor(...)]            &lt;-  optional: <span class="string">&quot;evictor&quot;</span> (<span class="keyword">else</span> no evictor)</span><br><span class="line">      [.allowedLateness(...)]    &lt;-  optional: <span class="string">&quot;lateness&quot;</span> (<span class="keyword">else</span> zero)</span><br><span class="line">      [.sideOutputLateData(...)] &lt;-  optional: <span class="string">&quot;output tag&quot;</span> (<span class="keyword">else</span> no side output <span class="keyword">for</span> late data)</span><br><span class="line">       .reduce/aggregate/apply()      &lt;-  required: <span class="string">&quot;function&quot;</span></span><br><span class="line">      [.getSideOutput(...)]      &lt;-  optional: <span class="string">&quot;output tag&quot;</span></span><br></pre></td></tr></table></figure><p>In the above, the commands in square brackets ([…]) are optional. This reveals that Flink allows you to customize your windowing logic in many different ways so that it best fits your needs.</p><blockquote><p>在上面, 方括号([…])中的命令是可选的, 这表明Flink允许您以多种不同的方式自定义窗口逻辑, 使其最适合您的需求.</p></blockquote><pre class="mermaid">graph LR    subgraph bound1        a[Event] --> b[Event] --> c[Event]    end    subgraph bound2        c --> d[Event] --> e[Event] --> f[Event]    end    f --> g[Event] --> h[Event] --> ...</pre><h1 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h1><p>in a nutshell , a window is created as soon as the first element that should belong to this window arrives, and the window is conpletely removed when the time (even or processing time) passes its end timestamp plus the user-specified allowed lastness(see <a href="https://nightlies.apache.org/flink/flink-docs-release-1.13/zh/docs/dev/datastream/operators/windows/#allowed-lateness">Allowed Lateness</a>). Flink guarantees removal only for time-based windows and not for other types, eg. global windows (see <a href="https://nightlies.apache.org/flink/flink-docs-release-1.13/zh/docs/dev/datastream/operators/windows/#window-assigners">Window Assigners</a>). For Exemple , with an event-time-based windowing strategy that creates non-overlapping(or tumbling) windwos every 5 minutes and has an allowed lateness of 1 min, Flink will create a new window for the interval between 12:00 and 12:05 when the first element with a timestamp that falls into this interval arrives, and it will remove it when the watermark passes the 12:06 timestamp.</p><blockquote><p>简而言之, 当地一个应该属于这个创建口的元素到达的时候, 就会创建一个窗口, 而当时间(事件事件或者处理时间)超过其结束时间戳加上用户指定的允许延迟时, 该窗口就会被完全删除. Flink只保证基于时间的窗口的溢出, 而不保证其他的类型, 例如全局窗口. 例如, 对于一个基于事件事件的窗口策略, 每五分钟吃u昂建一个不重叠(或者翻滚)的窗口, 并且允许分钟的延迟, 当地一个育有时间戳的元素到达这个区间的时候, Flink将为12:00和12:05之间的区间创建一个新的窗口, 并且当水印通过12:06的时间戳的时候, 将会删除</p></blockquote><p>in addition, each window will have a Trigger (see <a href="https://nightlies.apache.org/flink/flink-docs-release-1.13/zh/docs/dev/datastream/operators/windows/#triggers">Trigger</a>) and a function(ProcessWindowFunction, ReduceFunction, Or AggregateFunction)(see <a href="https://nightlies.apache.org/flink/flink-docs-release-1.13/zh/docs/dev/datastream/operators/windows/#window-functions">Window Functions</a>) attached to it, The function will contain the computation to be applied to the contents of the window , while the Trigger specifies the condition of the windwo , window is considered ready for the function to be applied. A triggering policy might be something like “when the number of elements in the window is more than 4”, or “when the watermark passes the end of the window”. A trigger can also decide to purge a window’s contents any time between its creation and removal , Purging in this case only refers to the elements in the window, and not the window metadata. This means that new data can still be added to that window.</p><blockquote><p>此外, 每一个窗口都会有一个触发器和一个函数(ProcessWindowFunction,ReduceFunction或则AggregateFunction)附加到它. 该函数将包含应用于窗口内容的计算, 而触发器则指定窗口被认为朱安备好应用该函数的条件. 触发策略可能是”当窗口中的元素数量超过4”或者”当水印通过窗口的末端的时候”. 触发器也可以决定窗口创建和删除之间的任何时间清除其中的内容. 在这种情况下, 清除只指窗口中的元素, 而不是窗口的元数据. 这意味着, 新的数据仍然可以被添加到该窗口.</p></blockquote><p>Apart from the above , you can specify an Evictor(see <a href="https://nightlies.apache.org/flink/flink-docs-release-1.13/zh/docs/dev/datastream/operators/windows/#evictors">Evictor</a>) which will be able to remove elements from the window after the trigger fires and before and/or after the function is applied.</p><p>In the following we go into more deetail for each of the components above. We start with the required parts in the above snippet(see <a href="https://nightlies.apache.org/flink/flink-docs-release-1.13/zh/docs/dev/datastream/operators/windows/#keyed-vs-non-keyed-windows">Keyed vs Non-Keyed Windows</a>, <a href="https://nightlies.apache.org/flink/flink-docs-release-1.13/zh/docs/dev/datastream/operators/windows/#window-assigner">Windwo Assigner</a>, and <a href="https://nightlies.apache.org/flink/flink-docs-release-1.13/zh/docs/dev/datastream/operators/windows/#window-function">Window Function</a>)before moving to the optional ones.</p><blockquote><p>除了上面的这些, 你还可以指定一个Evictor, 他将能够在触发器出发之后, 在函数应用之前和/或者之后从窗口中移除元素.</p><p>在下文中, 我们将会对上述的组件进行更加详细的讨论, 我们从上述片段中的必要部分开始, 然后再转到可选部分</p></blockquote><h1 id="窗口类型"><a href="#窗口类型" class="headerlink" title="窗口类型"></a>窗口类型</h1><ul><li><p>时间窗口</p><p>:one:滚动时间窗口</p><p>:two:滑动时间窗口</p><p>:three:会话窗口</p></li><li><p>计数窗口</p><p>:one:滚动计数窗口</p><p>:two:滑动技术窗口</p></li></ul><h1 id="滚动窗口"><a href="#滚动窗口" class="headerlink" title="滚动窗口"></a>滚动窗口</h1><p>A tumbing windows assigner assigns each element to a window of sprcified window size. Tubming windows have a fixed size and do not overlap. For example, if you specify a tumbling window with a size of 5 minutes, the current window will be evaluated and a new window will be  started every five minutes as illisrated by the following figure.</p><blockquote><p>滚动窗口分配器将每个元素分配到一个指定窗口大小的窗口. 滚动窗口有一个固定的尺寸, 并且不重叠. 例如, 如果你指定一个大小为5分钟的滚动窗口, 当前的窗口将会被评估, 并且每5分钟开始一个新的窗口. 如下图所示.</p></blockquote><p><strong>:red_circle:Flink窗口是左闭右开的, 例如0-5s最后一个时间戳是4999​</strong></p><p><img src="https://cdn.jsdelivr.net/gh/quietCC/imageBed/img/tumbling-windows.svg"></p><pre class="mermaid">graph LR    A[数据流]    subgraph "key1-window-[0~5]"        F[key2-event] --> G[key2-event]    end    subgraph "key1-window-[0~5]"        D[key1-event] --> E[key1-event]    end    A --> F    A --> D</pre><h1 id="滑动窗口"><a href="#滑动窗口" class="headerlink" title="滑动窗口"></a>滑动窗口</h1>]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flink </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flink-介绍与架构</title>
      <link href="/2010/12/12/Flink-%E4%BB%8B%E7%BB%8D%E4%B8%8E%E6%9E%B6%E6%9E%84/"/>
      <url>/2010/12/12/Flink-%E4%BB%8B%E7%BB%8D%E4%B8%8E%E6%9E%B6%E6%9E%84/</url>
      
        <content type="html"><![CDATA[<p>参考引用链接: </p><ul><li><a href="https://github.com/legendtkl/paper_reading/blob/main/realtime-compute/Chandy-Lamport.md">分布式快照算法: Chandy-Lamport</a></li><li>五分钟学大数据微信公众号</li><li>尚硅谷大数据学习文档</li><li>Flink1.13官方文档</li></ul><h1 id="Flink流式处理的简介"><a href="#Flink流式处理的简介" class="headerlink" title="Flink流式处理的简介"></a>Flink流式处理的简介</h1><h2 id="Flink是什么"><a href="#Flink是什么" class="headerlink" title="Flink是什么"></a>Flink是什么</h2><p>Apache Flink是一个框架和分布式处理引擎, 对于有界流和无界流进行状态计算.</p><h2 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h2><ol><li>支持高吞吐, 低延时, 高性能的处理</li><li>支持带有事件时间的窗口操作</li><li>支持有状态计算的Exactly-once语义</li><li>支持高度灵活的窗口操作, 支持基于time, count, session 以及 data-driven的操作</li><li>支持具有Backpressure功能的持续流模型</li><li>支持基于轻量级分布式快照 snapshot实现的容错</li><li>一个运行时同时支持batch on streaming处理和streaming处理</li><li>Flink支持在jvm内部实现了自己的内存管理</li><li>支持迭代计算</li><li>支持程序自动化: 避免特定情况下shuffle, 排序等昂贵操作, 中间结果有必要进行缓存</li></ol><h2 id="Flink基石"><a href="#Flink基石" class="headerlink" title="Flink基石"></a>Flink基石</h2><p>Flink之所以这么流畅, 离不开它最重要的四个基石 : CheckPoint, State, Time, Window</p><h3 id="CheckPoint"><a href="#CheckPoint" class="headerlink" title="CheckPoint"></a>CheckPoint</h3><p>CheckPoint机制, 这是Flink最重要的一个特性, Flink基于Chandy-Lamport算法实现了一个分布式的一致性快照, 从而提供了一致性的语义. <a href="https://github.com/legendtkl/paper_reading/blob/main/realtime-compute/Chandy-Lamport.md">Chandy-Lamport</a>算法是在1985年的时候被提出来了, 但是并没有被很广泛的应用, 而Flink则是将这个算法发扬光大了</p><blockquote><p>Chandy-Lamport</p><p> Spark 的 Structured Streaming 的 Continuous Processing Mode 的容错处理使用了分布式快照（Distributed Snapshot）算法 Chandy-Lamport 算法</p></blockquote><h3 id="State"><a href="#State" class="headerlink" title="State"></a>State</h3><p>提供了一致性的语义之后, 为了更加轻松的管理状态, 提供了一套简单明了的状态API, 里面提供了ValueState, ListState, MapState, BroadCastState等, 使得State API能够自动的享受一致性的语义</p><h3 id="Watermark"><a href="#Watermark" class="headerlink" title="Watermark"></a>Watermark</h3><p>能够支持基于时间的时间的处理, 或者说基于系统时间的处理, 能够容忍数据的延时, 容忍数据的迟到, 容忍乱序的数据</p><h3 id="Window"><a href="#Window" class="headerlink" title="Window"></a>Window</h3><p>Flink提供了开箱即用的各种窗口, 比如滑动窗口, 滚动窗口, 会话窗口以及非常灵活的自定义的窗口</p><h2 id="批处理和流处理"><a href="#批处理和流处理" class="headerlink" title="批处理和流处理"></a>批处理和流处理</h2><p>Flink分别提供了面向流式处理的接口(Data Stream API)和面向批处理的(DataSet API), 因此Flink既可以完成流式处理, 也可以完成批处理</p><h1 id="Flink运行架构"><a href="#Flink运行架构" class="headerlink" title="Flink运行架构"></a>Flink运行架构</h1><h2 id="架构对比"><a href="#架构对比" class="headerlink" title="架构对比"></a>架构对比</h2><h3 id="HDFS主从架构"><a href="#HDFS主从架构" class="headerlink" title="HDFS主从架构"></a>HDFS主从架构</h3><pre class="mermaid">graph LR    A[NameNode] --> B[DataNode]    A --> C[DataNode]    A --> D[DataNode]</pre><h3 id="Spark架构"><a href="#Spark架构" class="headerlink" title="Spark架构"></a>Spark架构</h3><pre class="mermaid">graph LR     A[Driver] --> B[Executer]    A --> C[Executer]    A --> D[Executer]</pre><h3 id="Flink架构"><a href="#Flink架构" class="headerlink" title="Flink架构"></a>Flink架构</h3><p>Flink运行时由两种类型组成, 一个JobManager(作业管理器, Master进程)和一个或者多个TaskManager组成(任务管理器, slave进程)</p><pre class="mermaid">graph LR    A[JobManager] --> B[TaskManager]    A --> C[TaskManager]    A --> D[TaskManager]</pre><h2 id="Flink程序结构"><a href="#Flink程序结构" class="headerlink" title="Flink程序结构"></a>Flink程序结构</h2><p>Flink程序的基本结构块是流和转换, 从概念上讲, 流是数据记录的流, 而转换是将一个或者多个流作为一份或对各流的操作, 输入, 并产生一个或者多个数据流</p><p><img src="https://cdn.jsdelivr.net/gh/quietCC/imageBed/img/image-20211112091257543.png"></p><h3 id="Source"><a href="#Source" class="headerlink" title="Source"></a>Source</h3><p>Source: 数据源, Flink在流处理和批处理的source大概有4类</p><blockquote><p>基于本地集合的Source</p><p>基于文件的Source</p><p>基于网络套接字的Source</p><p>自定义的Source</p></blockquote><p>自定义的Source常见的又Apache kafka, RabbitMQ等, 当然也可以定义自己的Source</p><h3 id="Transformation"><a href="#Transformation" class="headerlink" title="Transformation"></a>Transformation</h3><p>数据转化的各种操作, 又Map/FlatMap/Filter/KeyBy/Reduce/Fold/Aggregations/Window/WindowAll/Union/Window join/Split/Select等, 操作很多, 可以将数据转换计算成为你想要的数据</p><h3 id="Sink"><a href="#Sink" class="headerlink" title="Sink"></a>Sink</h3><p>接收器, Flink将转换计算后的数据发送的地点, 需要存储数据. Flink常见的Sink有如下几类: </p><ul><li>写入文件</li><li>控制台打印</li><li>写入socket</li><li>自定义sink</li></ul><p>自定义sink常见的有Apache kafka, RabbitMQ, MySQL,ElasticSearch, Apache Cassandra, HDFS等等, 我们也可以自定义属于自己的sink</p><h2 id="Flink并行数据流"><a href="#Flink并行数据流" class="headerlink" title="Flink并行数据流"></a>Flink并行数据流</h2><p>Flink程序在运行的时候, 会被映射成为一个StreamingDataflow, 一个Streaming Dataflow是一组Stream和Transformation Operator组成的. 在启动的时候从一个或者多个SourceOperator开始, 结束语一个或者多个Sink Operator.</p><h3 id="并行和分布式"><a href="#并行和分布式" class="headerlink" title="并行和分布式"></a>并行和分布式</h3><p><strong>Flink程序的本质上是并行的和分布式的,</strong> 在执行的过程中, 一个流(stream)包含一个或者多个流的分区, 而每一个operator包含一个或者多个operator子任务. 操作子任务之间是彼此独立的, 在不同的线程中执行, 甚至是在不同的机器或者不同的容器上. 而operator子任务的数量是这一特定Operator并行度. 相同程序中的不同operator有不同级别的并行度.</p><p><img src="https://cdn.jsdelivr.net/gh/quietCC/imageBed/img/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20211113141754.jpg"></p><p>一个Stream可以被分成多个Stream的分区, 也就是Stream Partition. 一个Operator也可以被分为多个Operator Subtask, 如图所示. Source被分成Source1和Source2, 它们分别是Source的Operator Subtask. <strong>每一个Operator Subtask都是在不同的线程当中独立运行的</strong>. 一个Operator的并行度, 就等于Operator Subtask的个数, 上图Source的并行度为2, 而一个Stream的并行度就等于它生成Operator的并行度</p><h3 id="One-to-One"><a href="#One-to-One" class="headerlink" title="One to One"></a>One to One</h3><p>两个operator用此模式传递的时候, 会保持数据的分区和数据的排序, 如上图的Source1到Map1, 它就会保留Source的分区特性, 以及分区元素处理的有序性.</p><h3 id="Redistributing"><a href="#Redistributing" class="headerlink" title="Redistributing"></a>Redistributing</h3><p>重新分配模式, 这种模式或改变数据的分区, 每一个operator subtask 会根据选择的transformation将数据发送到不同的目标subtasks, 比如keyBy()会通过hashcode重新分区, broadcast() 和 rebalance() 方法会随机重新分区.</p><h2 id="Task和-Operator-chain"><a href="#Task和-Operator-chain" class="headerlink" title="Task和 Operator chain"></a>Task和 Operator chain</h2><p>Flink的所有操作都称之为Operator, 客户端在提交任务的时候会对Operator进行优化操作, 能进行合并的Operator会被合并为一个Operator, <strong>合并后的Operator称为Operator chain, 实际上就是一个执行链, 每个执行链会在TaskManager上独立的线程中执行.</strong></p><p>对于分布式执行， Flink将算子的subtasks链接成为task。每个Task由一个线程执行， 将算子链接成为Task是个有用的优化：</p><blockquote><p>减少了线程间之间的切换， 缓冲的开销， 并且减少延迟的同时提升整体的吞吐量，链行为是可以配置的</p></blockquote><p>使用了5个SubTask执行， 因此存在5个<strong>并行</strong>的线程</p><p><img src="https://cdn.jsdelivr.net/gh/quietCC/imageBed/img/tasks_chains.svg"></p><h2 id="Flink任务调度与执行"><a href="#Flink任务调度与执行" class="headerlink" title="Flink任务调度与执行"></a>Flink任务调度与执行</h2><p><img src="https://cdn.jsdelivr.net/gh/quietCC/imageBed/img/processes.svg"></p><ol><li>Flink Program会将Program Dataflow通过Graph Builder构建Dataflow Graph</li><li>ActorSystem创建Actor将数据流图发送给JobManager中的Actor</li><li>JobManage会不断接受TaskManager的心跳信息, 从而可以获取到有效的TaskManager</li><li>JobManager通过调度器在TaskManager中调度执行Task(在Fllink中中最小的调度单元就是Task, 对应就是一个线程)</li><li>在程序运行的过程中, task与task之间是可以进行数据传输的</li></ol><blockquote><p>Client并不是运行时和程序执行的一部分， 而是用于准备数据流并将其发送给JobManager。 之后， 客户端可以断开链接（分离模式）， 或者保持链接来接受进程报告（附加模式）。</p><p>客户端可以作为出发执行Java/Scala程序的一部分运行， 亦可以在命令行进程<code>./bin/flink run ...</code>中运行</p><p>可以通过多种方式启动JobManager和TaskManager：</p><p>直接在机器上作为standalone集群启动， 在容器中启动， 或者通过yarn或者mesos等资源框架管理并启动， TaskManager连接到JobManager, 宣布自己可用， 并分配工作</p></blockquote><h3 id="JobClient"><a href="#JobClient" class="headerlink" title="JobClient"></a>JobClient</h3><ol><li>主要工作是提交任务, 提交之后可以结束进程, 也可以等待结果返回</li><li>JobClient不是Flink程序执行的内部部分, 但它是任务执行的起点</li><li>JobClient负责接受用户的程序代码, 然后创建数据流, 将数据流提交给JobManager以便进一步执行, 执行完毕之后, JobClient将结果返回给客户</li></ol><h3 id="JobManager"><a href="#JobManager" class="headerlink" title="JobManager"></a>JobManager</h3><p>作业管理器就是一个JVM进程, 其中包含三类线程</p><p>:chestnut:三类线程</p><ul><li>ResurceManager： Flink的资源管理器， 资源是任务插槽（Task Slot）</li><li>Dispatcher： 分发器，提供了Rest接口， 用于提交Flink应用程序， 并为每个Flink的应用程序启动一个新的JobMaster. 它还运行了FlinkWebUI用来提供作业的执行信息</li><li>JobMaster: 每个作业（Job）对应一个，负责管理单个JobGraph的执行， Flink中可以同时运行多个作业， 每个作业都有自己的JobMaster</li></ul><pre class="mermaid">graph LR    A[JobManager] --> B([ResourceManager])    A --> C([Dispatcher])    A --> D([JobMaster])</pre><p>:one:主要职责是调度工作并协调任务检查点</p><p>:two:集群中至少要存在一个master, master负责调度task, 协调checkpoints和容错</p><p>:three:高可用设置的话可以有多个master, 但是保证一个是leader, 其他是standby</p><p>:four:JobManager包含Actor System, Scheduler, CheckPoint三个重要的组件</p><p>:five:JobManager从客户端接收到任务之后, 首先生成优化过的执行计划, 再调度到TaskManager中进行执行</p><h3 id="TaskManager"><a href="#TaskManager" class="headerlink" title="TaskManager"></a>TaskManager</h3><ul><li>TaskSlot： 任务插槽， 是一个物理分区</li><li>不同的任务插槽就是不同的物理分区</li><li>每个任务插槽是一个内存分片</li><li>内存的本质是字节数组</li></ul><pre class="mermaid">graph LR    A[TaskManager] --> B([Task Slot])    A --> C([Task Slot])    A --> D([Task Slot])</pre><p>:one:主要职责是从JobManager处接收任务, 并部署启动, 接受上游的数据并处理</p><p>:two:TaskManager是在JVM中的一个或者多个线程中执行任务的工作节点</p><p>:three:TaskManager在创建之处就设置好了Slot, 每个Slot可以执行一个任务</p><h2 id="任务槽和槽共享"><a href="#任务槽和槽共享" class="headerlink" title="任务槽和槽共享"></a>任务槽和槽共享</h2><p><img src="https://cdn.jsdelivr.net/gh/quietCC/imageBed/img/tasks_slots.svg"></p><p>每个TaskManager是一个JVM进程， 可以在不同的线程中执行一个或者多个子任务。 为了控制一个TaskManager能够接受多少个task。 TaskManager通过task slot进行控制， 一个TaskManager至少拥有一个task slot</p><h3 id="任务槽"><a href="#任务槽" class="headerlink" title="任务槽"></a>任务槽</h3><p>每个task slot表示TaskManager表示资源的一个固定大小的子集</p><p>Flink将进程的内存划分到多个slot中。</p><p>途中有两个TaskManager， 每个TaskManager有3个slot， 每个slot占用1/3的内存</p><p>内存被划分到不同的slot之后可以获得如下好处：</p><p>:one:TaskManager最多能同时并发执行的任务是可以控制的， 那就是3个， 因为不能超过slot的数量</p><p>:two:slot有独占的内存空间， 这样在一个TaskManager中可以运行多个不同的作业， 作业之间不会受到影响。</p><h3 id="槽共享"><a href="#槽共享" class="headerlink" title="槽共享"></a>槽共享</h3><p>默认情况下， Flink允许子任务共享插槽， 即使它们是不同task的subtask， 只要它们来自于同一个作业， 结果是一个slot可以保存作业的整个管道。 允许插槽共享有两个主要的好处：</p><p>:one:只需要计算Job最高并行度（parallelism）的task slot， 只要这个满足， 其他的job也可以满足</p><p>:two:资源分配更加的公平， 如果有比较空闲的slot可将更多的任务分配给他。 图中若没有任务槽共享， 负载不高的Source/Map等subtask将会占据许多的资源， 而负载较高的窗口subtask则会缺乏资源</p><p>:three:有了任务槽共享， 可以将基本并行度（base parallelism）从2提升至6， 提高了分配资源的利用率。 同时还可以保障TaskManager给subtask分配的slot方案更加的公平</p><h3 id="不同的DAG结构-有争议"><a href="#不同的DAG结构-有争议" class="headerlink" title="不同的DAG结构(有争议)"></a>不同的DAG结构(有争议)</h3><pre class="mermaid">graph LR    StreamGraph -->|客户端| JobGraph -->|作业管理器| ExecutionGraph -->|部署| PhysicalGraph</pre><ul><li><p>StreamGraph: 是根据用户通过Stream API编写的代码生成的最初的图, 用来表示程序的拓扑结构</p></li><li><p>JobGraph: StreamGraph 在编译阶段经过优化之后生成了JobGraph, 提交给JobManager的数据结构. 主要的有华为, 将多个符合条件(窄依赖, 没有shuffle, 并行度相同)的算组串联在一起作为一个节点, 保证串联起来的节点里面所有的算子都在同一个任务插槽执行, 这样算子之间的数据就是本地转发的(无序序列化和网络io), 需要两个条件</p><blockquote><ul><li>两个算子之间没有shuffle的存在</li><li>两个算子的并行度必须相同</li></ul></blockquote></li><li><p>ExecutionGraph: JobManager根据JobGraph生成ExecutionGraph, ExecutionGraph是JobGraph的并行化版本, 是调度曾最核心的数据结构</p></li><li><p>PhysicalGraph: JobManager根据ExecutionGraph对job进行调度之后, 在各个TaskManager上部署Task后形成的图 , 并不是具体的数据结构</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flink </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flink-知识点</title>
      <link href="/2010/12/12/Flink-%E7%9F%A5%E8%AF%86%E7%82%B9/"/>
      <url>/2010/12/12/Flink-%E7%9F%A5%E8%AF%86%E7%82%B9/</url>
      
        <content type="html"><![CDATA[<h2 id="简单介绍一下FLink"><a href="#简单介绍一下FLink" class="headerlink" title="简单介绍一下FLink"></a>简单介绍一下FLink</h2><p>&emsp;Flink是一个框架和分布式处理引擎, 用于对有界流和无界流进行有状态的计算. 并且Flink还提供了数据分布, 容错机制以及资源管理等核心功能. Flink提供了诸多高抽象层的API一边用户编写分布式任务. </p><p>&emsp;DataSet API, 对静态数据进行批处理操作, 将静态数据抽象成为分布式的数据集, 用户可以使用Flink提供的各种操作符对分布式数据集进行处理, 支持Java, Scala, Python</p><p>&emsp;DataStream API, 对于数据流进行流处理操作, 将流式的数据抽象成分布式的数据流, 用户可以方便的对分布式数据流进行各种操作, 支持Java和Scala</p><p>&emsp;Table API, 对结构化数据进行查询操作, 将结构化数据抽象成关系表, 并通过类SQL的DSL对辨析表进行各种查询操作, 支持Java和Scala</p><p>​    此外Flink还对特定的应用领域提供了领域库, 例如: Flink ML, Flink的机器学习库, 提供了机器学习Pipelines API并实现了多种机器学习算法, Gelly, Flink 的图计算库, 提供了图计算的相关API以及多种图计算算法实现. </p><h2 id="Flink和Spark-Streaming的区别"><a href="#Flink和Spark-Streaming的区别" class="headerlink" title="Flink和Spark Streaming的区别"></a>Flink和Spark Streaming的区别</h2><p>&emsp;Flink是标准的实时处理引擎, 基于事件驱动, 而Spark Streaming是为批处理模型(Micro-Batch)的模型.</p><p>🌰<strong>主要区别</strong></p><ol><li><p>架构模型</p><p>1️⃣ SparkStreaming在运行的时候的主要角色是: Master, Worker, Driver, Executor</p><p>2️⃣ Flink在运行时主要包含JobManager, TaskManager和Slot</p></li><li><p>任务调度</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 面试相关 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flink </tag>
            
            <tag> 面试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>模板</title>
      <link href="/2010/12/12/Hadoop-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
      <url>/2010/12/12/Hadoop-%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>HDFS-优化</title>
      <link href="/2010/12/12/HDFS-%E4%BC%98%E5%8C%96/"/>
      <url>/2010/12/12/HDFS-%E4%BC%98%E5%8C%96/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Git</title>
      <link href="/2010/12/12/Git/"/>
      <url>/2010/12/12/Git/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Interview-分层</title>
      <link href="/2010/12/12/Interval-%E5%88%86%E5%B1%82/"/>
      <url>/2010/12/12/Interval-%E5%88%86%E5%B1%82/</url>
      
        <content type="html"><![CDATA[<div class="hide-toggle" style="border: 1px solid #FF7242"><div class="hide-button toggle-title" style="background-color: #FF7242;color: #fff"><i class="fas fa-caret-right fa-fw"></i><span><b>查看答案</b></span></div>    <div class="hide-content"></div></div><h1 id="数仓怎么建模"><a href="#数仓怎么建模" class="headerlink" title="数仓怎么建模"></a>数仓怎么建模</h1><ul><li><p>200张表</p></li><li><p>和业务人员(200张表是怎么产生的), 产品经理聊(未来统计哪些指标)</p><p>业务线: </p></li><li></li></ul>]]></content>
      
      
      <categories>
          
          <category> Interview </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flink </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Interview-FLink</title>
      <link href="/2010/12/12/Interval-Hive/"/>
      <url>/2010/12/12/Interval-Hive/</url>
      
        <content type="html"><![CDATA[<div class="hide-toggle" style="border: 1px solid #FF7242"><div class="hide-button toggle-title" style="background-color: #FF7242;color: #fff"><i class="fas fa-caret-right fa-fw"></i><span><b>查看答案</b></span></div>    <div class="hide-content"></div></div><h1 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h1>]]></content>
      
      
      <categories>
          
          <category> Interview </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flink </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Interview-Hadoop</title>
      <link href="/2010/12/12/Interview-Hadoop/"/>
      <url>/2010/12/12/Interview-Hadoop/</url>
      
        <content type="html"><![CDATA[<h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><h2 id="常用端口号"><a href="#常用端口号" class="headerlink" title="常用端口号"></a>常用端口号</h2><table><thead><tr><th></th><th>2.x</th><th>3.x</th></tr></thead><tbody><tr><td>HDFS端口</td><td>50070</td><td>9870</td></tr><tr><td>MR监控端口</td><td>8088</td><td>8088</td></tr><tr><td>历史服务器</td><td>19888</td><td>19888</td></tr><tr><td>客户端访问集群端口</td><td>9000</td><td>8020</td></tr></tbody></table><h1 id="MapReduce"><a href="#MapReduce" class="headerlink" title="MapReduce"></a>MapReduce</h1><h1 id="Yarn"><a href="#Yarn" class="headerlink" title="Yarn"></a>Yarn</h1><h2 id="工作机制"><a href="#工作机制" class="headerlink" title="工作机制"></a>工作机制</h2><div class="hide-toggle" style="border: 1px solid #FF7242"><div class="hide-button toggle-title" style="background-color: #FF7242;color: #fff"><i class="fas fa-caret-right fa-fw"></i><span><b>查看答案</b></span></div>    <div class="hide-content"><ol><li>首先提交MR程序到客户端所在的节点, 客户端向ResourceManager申请一个Application</li><li>ResourceManager返回客户端资源的提交路径并以application_id进行命名</li><li>客户端将对应的jar包, xml配置文件, 以及任务的切分规则上传到hdfs</li><li>当资源提交完毕之后, 向ResourceManager申请运行AplicationMaster</li><li>ResourceMananger将客户端的请求初始化为一个Task任务, 并放置到任务调度队列中, 等待NodeManager的领取</li><li>NodeManager从队列中获取到任务</li><li>NodeManager创建Container容器, 并根据Task的信息从hdfs上下载运行资源, 构建ApplicationMaster对象</li><li>ApplicationMaster根据文件的切片信息创建MapTask任务, 并以Task的形式提交到ResourceManager的队列中, NodeManager获取到MapTask任务, 构建Container对象, </li><li>ApplicationMaster向MapTask发送启动脚本, MapTask程序启动, 并将数据根据分区落盘</li><li>ApplicationMaster同时也提交了ReduceTask任务, 当MapTask执行到95%的时候, ReduceTask开始向MapTask拉取指定分区的数据, 计算并存储</li></ol></div></div><h2 id="Yarn调度器"><a href="#Yarn调度器" class="headerlink" title="Yarn调度器"></a>Yarn调度器</h2><h3 id="种类以及不同"><a href="#种类以及不同" class="headerlink" title="种类以及不同"></a>种类以及不同</h3><div class="hide-toggle" style="border: 1px solid #FF7242"><div class="hide-button toggle-title" style="background-color: #FF7242;color: #fff"><i class="fas fa-caret-right fa-fw"></i><span><b>查看答案</b></span></div>    <div class="hide-content"><p><strong>FIFO</strong></p><p>单队列 , 先进先出, 生产环境不会用</p><p><strong>Capacity Scheduler 容量调度器</strong> </p><p>多队列  可以借资源 优先选择资源占用率最低的队伍进行资源分配, 作业资源分配按照提交时间或者优先级进行分配. 容器的资源分配, 遵循本地原则</p><p><strong>Fair Scheduler 公平调度器</strong></p><p>多队列, 可以借资源, 保证每个任务公平的享用队列的资源, 资源不够的时候按照缺额进行分配.</p></div></div><h3 id="生产环境下怎么选择"><a href="#生产环境下怎么选择" class="headerlink" title="生产环境下怎么选择"></a>生产环境下怎么选择</h3><ul><li>如果对并发度要求比较高的情况下, 选择公平调度器, 但是要求服务器的性能较高</li><li>对于中小公司可以选择容量调度器</li></ul><h3 id="在生产环境怎么创建队列"><a href="#在生产环境怎么创建队列" class="headerlink" title="在生产环境怎么创建队列"></a>在生产环境怎么创建队列</h3><ol><li>调度器默认就一个default队列, 不能满足生产的要求</li><li>按照框架进行创建, 根据框架的不同放到不同的队列中, 比如hive, spark, flink</li><li>按照部门进行划分</li><li>按照不同的业务进行划分</li></ol><h3 id="创建对队列的好处"><a href="#创建对队列的好处" class="headerlink" title="创建对队列的好处"></a>创建对队列的好处</h3><ol><li>起到资源隔离的作用, 如果存在员工不小心写了递归死循环的代码, 避免将资源全部耗尽</li><li>实现任务降级, 在一定的场景下保证任务队列的资源充足</li></ol><h1 id="HDFS"><a href="#HDFS" class="headerlink" title="HDFS"></a>HDFS</h1><h2 id="读数据流程"><a href="#读数据流程" class="headerlink" title="读数据流程"></a>读数据流程</h2><div class="hide-toggle" style="border: 1px solid #FF7242"><div class="hide-button toggle-title" style="background-color: #FF7242;color: #fff"><i class="fas fa-caret-right fa-fw"></i><span><b>查看答案</b></span></div>    <div class="hide-content"><ol><li>首先HDFSClient会创建DistributedFileSystem, 去NameNode上获取要下载文件的块位置信息.</li><li>NameNode会根据客户端和存储文件的DataNode的位置信息返回给客户端对应的元数据信息</li><li>HDFSClient会根据文件的元数据信息, 选择最近的一台DataNode通过DFSDataInputStream请求文件读取, , 数据以packet为单位向客户端传输数据, 当一个数据块传输完毕之后, 会在元数据信息中获取下一个文件块的位置, 并建立连接进行数据传输.</li><li>当文件传输完毕之后, 客户端会调用close方法关闭DFSDataInputStream</li></ol></div></div><h2 id="写数据流程"><a href="#写数据流程" class="headerlink" title="写数据流程"></a>写数据流程</h2><div class="hide-toggle" style="border: 1px solid #FF7242"><div class="hide-button toggle-title" style="background-color: #FF7242;color: #fff"><i class="fas fa-caret-right fa-fw"></i><span><b>查看答案</b></span></div>    <div class="hide-content"><ol><li><p>首先客户端创建DistributeFileSystem对象, 并向NameNode请求上传文件</p></li><li><p>NameNode根据请求文件的路径信息是否合法, 并响应客户端</p></li><li><p>当客户端收到NameNode允许上传的消息的时候, 会通过DistributeFileSystem向HDFS创建一个空的文件夹, 并且向NameNode请求上传第一个Block</p></li><li><p>NameNode根据副本配置信息以及节点的状态信息返回3个(N个)节点给客户端</p></li><li><p>客户端通过DFSDataOutputStream向离自己最近的一台节点DN1发起连接, DN1连接DN2, DN2连接DN3, 建立连接通道</p></li><li><p>当DN3连接成功之后, 应答DN2, 最后由DN1应答客户端, 说明连接成功了</p></li><li><p>客户端开始通过DFSDataOutputStream传输数据, 首先会数据写入内部的一个缓冲区, 之后数据会被切分成为Packet, 每个Packet的大小默认为64kb, 由PacketHeader, CheckSums, Data组成, 其中PacketHeader记录了包的一些属性信息, Data由n多个Chunk组成, 每个Chunk大小为512b, 每个Chunk对应着一个大小为4b的CheckSum, 这些CheckSum构成了Packet的CheckSums, 每个校验和都是校验块对应的和.</p><p>将Packet放到dataQueue中队列中, 之后由DFSOutputStream内部的DataStreamer发送器从队列中取出数据并发送到数据流管道上, 之后将发送的Packet从队列中移除并放到AckQueue中</p><p>当数据流管道接收到这个Packet之后, 会向PacketProcesser响应Ack, 当收到成功的Ack之后, 会从AckQueue中移除对应的Packet, 表示该Packet发送成功, 当数据块中的所有数据包都发送完毕, 会发送一个空包表示该数据块发送完毕</p><p>客户端写满一个数据块之后, 会向NameNode申请上传下一个数据块, 请求对应的DN, 直到全部的数据块写入完毕</p><p>当DataNode接收到一个数据块的时候就会向NameNode汇报信息, NameNode会更新文件和块的对应关系</p></li><li><p>当所有的文件传输完毕, 就可以关闭输出流了, 同时通知NameNode更新文件和块的信息, 完成了整个文件的写入操作</p></li></ol></div></div><h2 id="小文件处理"><a href="#小文件处理" class="headerlink" title="小文件处理"></a>小文件处理</h2><div class="hide-toggle" style="border: 1px solid #FF7242"><div class="hide-button toggle-title" style="background-color: #FF7242;color: #fff"><i class="fas fa-caret-right fa-fw"></i><span><b>查看答案</b></span></div>    <div class="hide-content"><p><strong>影响</strong></p><ol><li><p>存储层面</p><p>一个文件块对应着一份元数据, 元数据占用NameNode 150字节</p></li><li><p>计算层面</p><p>每个小文件都对应着一个 MapTask, 而且每个MapTask的默认资源是1G, 会造成资源的浪费</p></li></ol><p><strong>解决</strong></p><ol><li>采用har归档的方式, 将小文件进行归档处理</li><li>使用CombineTextInputFormat</li><li>在有小文件的场景可以尝试开启JVM重用; 如果没有小文件, 不建议开启, 因为会占用Task卡槽.</li></ol></div></div><h2 id="NameNode的内存"><a href="#NameNode的内存" class="headerlink" title="NameNode的内存"></a>NameNode的内存</h2><div class="hide-toggle" style="border: 1px solid #FF7242"><div class="hide-button toggle-title" style="background-color: #FF7242;color: #fff"><i class="fas fa-caret-right fa-fw"></i><span><b>查看答案</b></span></div>    <div class="hide-content"><p>在Hadoop 2.x的时候, 默认是2000m</p><p>在Hadoop3.x的时候采用的是动态分配的方式, 默认大小是1G, 每当增加Block文件的数量达到100w之后, 会在原有内存的基础上增加1G</p></div></div><h2 id="NameNode心跳并发机制"><a href="#NameNode心跳并发机制" class="headerlink" title="NameNode心跳并发机制"></a>NameNode心跳并发机制</h2><div class="hide-toggle" style="border: 1px solid #FF7242"><div class="hide-button toggle-title" style="background-color: #FF7242;color: #fff"><i class="fas fa-caret-right fa-fw"></i><span><b>查看答案</b></span></div>    <div class="hide-content"><p>NameNode有一个线程池, 用来处理不同的DataNode的并发心跳以及客户端并发的元数据操作.</p><p>对于比较大的集群或者有大量的客户端的集群来说, 通常要调大这个参数, 默认值是10.</p><p>工作线程的个数设置参考公式:20*log<sub>e</sub><sup>Cluster Size</sup>, 比如集群的规模为3台, 则设置参数为21</p><p>修改hdfs-site.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.handler.count<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>21<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br></pre></td></tr></table></figure></div></div><h2 id="什么时候产生小文件"><a href="#什么时候产生小文件" class="headerlink" title="什么时候产生小文件"></a>什么时候产生小文件</h2><p>Flume 的 hdfs sink               </p><h2 id="纠删码原理和异构存储-空"><a href="#纠删码原理和异构存储-空" class="headerlink" title="纠删码原理和异构存储(空)"></a>纠删码原理和异构存储(空)</h2><h2 id=""><a href="#" class="headerlink" title=""></a></h2><h1 id="调优"><a href="#调优" class="headerlink" title="调优"></a>调优</h1>]]></content>
      
      
      <categories>
          
          <category> Interview </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hadoop </tag>
            
            <tag> HDFS </tag>
            
            <tag> MapReduce </tag>
            
            <tag> Yarn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Interview-FLink</title>
      <link href="/2010/12/12/Interview-Flink/"/>
      <url>/2010/12/12/Interview-Flink/</url>
      
        <content type="html"><![CDATA[<div class="hide-toggle" style="border: 1px solid #FF7242"><div class="hide-button toggle-title" style="background-color: #FF7242;color: #fff"><i class="fas fa-caret-right fa-fw"></i><span><b>查看答案</b></span></div>    <div class="hide-content"></div></div><h2 id="Flink和SparkStreaming的区别"><a href="#Flink和SparkStreaming的区别" class="headerlink" title="Flink和SparkStreaming的区别"></a>Flink和SparkStreaming的区别</h2><div class="hide-toggle" style="border: 1px solid #FF7242"><div class="hide-button toggle-title" style="background-color: #FF7242;color: #fff"><i class="fas fa-caret-right fa-fw"></i><span><b>查看答案</b></span></div>    <div class="hide-content"><p>Flink时标准的实时引擎, 基于事件驱动, 而SparkSteaming是微批处理<br>框架的主要区别: </p><p>SparkStreaming框架的主要运行角色包括: Master, Worker, Driver,Executor</p><p>Flink在运行的时候主要包含</p></div></div>]]></content>
      
      
      <categories>
          
          <category> Interview </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flink </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Interview-Kafka</title>
      <link href="/2010/12/12/Interview-Kafka/"/>
      <url>/2010/12/12/Interview-Kafka/</url>
      
        <content type="html"><![CDATA[<h1 id="基本信息"><a href="#基本信息" class="headerlink" title="基本信息"></a>基本信息</h1><h2 id="组成"><a href="#组成" class="headerlink" title="组成"></a>组成</h2><p>生产者,  消费者,  broker,  zk(broker ids, controller, isr)</p><blockquote><p>每一个broker都有一个controller</p></blockquote><h2 id="安装多少台"><a href="#安装多少台" class="headerlink" title="安装多少台"></a>安装多少台</h2><p>2 * (生产者峰值生产速率 * 副本 /100)+1</p><h2 id="压测"><a href="#压测" class="headerlink" title="压测"></a>压测</h2><p>生产者峰值生产速率, 消费者峰值消费速率</p><h2 id="副本"><a href="#副本" class="headerlink" title="副本"></a>副本</h2><p>默认1个, 设置为2个</p><p>副本多的好处, 提高可靠性, 坏处是降低了效率</p><h2 id="速率"><a href="#速率" class="headerlink" title="速率"></a>速率</h2><p>100万日活 * 100条 = 1亿</p><p>1亿/(24 * 3600) = 1150条/s    每条1K,  1m/s</p><p>1亿 * 1k = 100G</p><p>1000万 * 1k = 10G</p><p>100万 * 1k = 1G</p><h2 id="是否做了监控"><a href="#是否做了监控" class="headerlink" title="是否做了监控"></a>是否做了监控</h2><p>eagle,  kafka manager(新版本要求jdk14)</p><blockquote><p>如果是自己研发的, 仰视大佬</p></blockquote><h2 id="分区设置为多少"><a href="#分区设置为多少" class="headerlink" title="分区设置为多少"></a>分区设置为多少</h2><p>期望的吞吐量  t</p><p>生产者峰值生产速率  tp  20m/s</p><p>消费者峰值消费速率  tc  40m/s</p><p>分区数 = t /min(tp, tc) = 100/20 = 5</p><blockquote><p>小公司为 3-5个分区</p></blockquote><h2 id="生产者-gt-broker"><a href="#生产者-gt-broker" class="headerlink" title="生产者 =&gt; broker"></a>生产者 =&gt; broker</h2><ol><li><p>指定分区, 按照指定的分区</p></li><li><p>没有指定分区, 指定了key, 按照可以的hash值%上分区数</p></li><li><p>没有key, 没有指定分区</p><p>粘性分区, 随机选择一个分区, 达到批次或者linger.ms()的时候, 切换下一个分区, 下一个分区不会是上一个分区</p></li></ol><h2 id="broker-gt-消费者"><a href="#broker-gt-消费者" class="headerlink" title="broker =&gt; 消费者"></a>broker =&gt; 消费者</h2><ol><li><p>range</p><p>10个分区            三个消费者</p><p>0  1  2  3                数据倾斜</p><p>4  5  6 </p><p>7  8  9</p><blockquote><p>45秒以内</p><p>0  1  2  3  7  8  9</p><p>4  5  6 </p><p>45秒以后</p><p>0  1  2  3  4 </p><p>5  6  7  8  9</p></blockquote></li><li><p>roundrobin  轮询</p><p>10个分区            三个消费者</p><p>0  3  6  9        </p><p>1  4  7</p><p>2  5  8</p><blockquote><p>45秒以后</p><p>0  3  6  9  2  8        </p><p>1  4  7  5</p></blockquote></li><li><p>粘性</p><p>10个分区            三个消费者</p><p>尽可能的均分        3 3 4</p><p>0  3  5 </p><p>2  6  9</p><p>1  4  7  8</p><blockquote><p>45秒以内挂了</p><p>0  3  5  1  7 </p><p>2  6  9  4  8</p></blockquote></li></ol><h1 id="挂了"><a href="#挂了" class="headerlink" title="挂了"></a>挂了</h1><h2 id="起不来了"><a href="#起不来了" class="headerlink" title="起不来了"></a>起不来了</h2><ol><li><p>整个集群瘫痪</p><p>后面的Flume消费不到数据, 影响不大. </p><p>前面的Flume如果采用的是memory channel的话可能会丢失100个event, 影响不大, 如果使用的是kafka channel, 当kafka挂掉之后, 无法发送数据, 没有任何意义, 如果使用的是taildir, 不会发生数据丢失, 当极端情况下可能会造成整个Flume的瘫痪, 但是我们的日志采集服务器日志默认保存30天, 问题不大.</p></li><li><p>一个节点挂了</p><p>3台服务器, 如果存在2个副本的情况下, 可以直接删除节点, 没有任何问题, 之后通过服役和退役.</p></li></ol><h2 id="节点没了"><a href="#节点没了" class="headerlink" title="节点没了"></a>节点没了</h2><p>只要副本是2, 一切好说. 如果是1, 需要带着历史数据启动. 服役退役</p><h1 id="丢了"><a href="#丢了" class="headerlink" title="丢了"></a>丢了</h1><p>ack 0 : 生产者发送的数据不需要应答, 可靠性低, 效率高, 生产环境几乎不用</p><p>ack 1 : 生产者发送过来的数据leader 应答, 可靠性一般, 效率一般</p><p>ack -1: 生产者发送过来的数据 leader + irs队列中 follower应答</p><p>​            leader 0 [0,1]</p><p>​            isr默认保存的值, 1 -&gt; 设置为大于等于2</p><p>​            副本数量大于等于2</p><h1 id="重复了"><a href="#重复了" class="headerlink" title="重复了"></a>重复了</h1><h2 id="生产者-gt-Broker"><a href="#生产者-gt-Broker" class="headerlink" title="生产者  ==&gt; Broker"></a>生产者  ==&gt; Broker</h2><p>幂等性就是指Producer不论向Broker发送多少次重复数据, Broker端都只会持久化一条, 保证了不重复, 结合上至少一次, 就构成了Kafka的精准一次消费</p><blockquote><p><strong>精准一次消费:</strong> </p><p><code>幂等性</code>+ <code>至少一次(ack = -1 + 分区副本数 &gt;= 2 + ISR最小副本数量 &gt;=2)</code></p></blockquote><p>生产者向broker发送消息是通过</p><p>判断的key (pid (每次启动会更新一次),  分区,  序列号)</p><p>幂等性    =&gt; 指的是单分区, 但绘画数据不丢不重复</p><p>事务        =&gt; </p><ul><li>初始化事务</li><li>开启事务</li><li>提交事务</li><li>终止事务</li><li>offset提交事务</li></ul><h2 id="Broker-gt-消费者"><a href="#Broker-gt-消费者" class="headerlink" title="Broker  ==&gt; 消费者"></a>Broker  ==&gt; 消费者</h2><p>事务</p><h1 id="积压了"><a href="#积压了" class="headerlink" title="积压了"></a>积压了</h1><ol><li><p>增加分区数量</p><blockquote><p>bin/kafka-topic.sh –bootstrap-server Hadoop102:9092 –alter –topic first  –partitions  6</p></blockquote></li><li><p>kafka的分区增加了, 但是对应的消费者并没有增加, 这里我们要增加对应cpu数量, 和kafka的分区数相对应, 进行消费数据</p></li><li><p>调高消费者每批次抓取条数大小, 默认为500条, 默认批次大小为55m, 可以尝试提高批次大小和处理批次的条数, 增加吞吐量.</p></li></ol><h1 id="乱序了"><a href="#乱序了" class="headerlink" title="乱序了"></a>乱序了</h1><ul><li><p>kafka  1.x</p><p>不需要考虑是否开启幂等性</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">max.in.flight.requests.per.connection = 1</span><br></pre></td></tr></table></figure></li><li><p>kafka  1.x以后的版本</p><p>在未开启幂等性的情况下, 和1.x的版本一样处理</p><p>在开启幂等性的情况下, 会缓存producer发来的最近5个request的数据</p><p>需要设置缓存的请求个数小于等于5个, 会在服务器端从新排序</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">max.in.flight.requests.per.connection # 设置参数小于等于5</span><br></pre></td></tr></table></figure></li></ul><h1 id="做了哪些优化"><a href="#做了哪些优化" class="headerlink" title="做了哪些优化"></a>做了哪些优化</h1><h1 id="杂七杂八"><a href="#杂七杂八" class="headerlink" title="杂七杂八"></a>杂七杂八</h1><h1 id="提高吞吐量"><a href="#提高吞吐量" class="headerlink" title="提高吞吐量"></a>提高吞吐量</h1><h1 id="为什么能做到高校读写"><a href="#为什么能做到高校读写" class="headerlink" title="为什么能做到高校读写"></a>为什么能做到高校读写</h1>]]></content>
      
      
      <categories>
          
          <category> Interview </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Kafka </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Interview-Linux</title>
      <link href="/2010/12/12/Interview-Linux/"/>
      <url>/2010/12/12/Interview-Linux/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> Interview </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hadoop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux环境编程：从应用到内核</title>
      <link href="/2010/12/12/Linux%E7%8E%AF%E5%A2%83%E7%BC%96%E7%A8%8B%EF%BC%9A%E4%BB%8E%E5%BA%94%E7%94%A8%E5%88%B0%E5%86%85%E6%A0%B8/"/>
      <url>/2010/12/12/Linux%E7%8E%AF%E5%A2%83%E7%BC%96%E7%A8%8B%EF%BC%9A%E4%BB%8E%E5%BA%94%E7%94%A8%E5%88%B0%E5%86%85%E6%A0%B8/</url>
      
        <content type="html"><![CDATA[<h1 id="文件IO"><a href="#文件IO" class="headerlink" title="文件IO"></a>文件IO</h1><h2 id="Linux中的文件"><a href="#Linux中的文件" class="headerlink" title="Linux中的文件"></a>Linux中的文件</h2><h3 id="文件-文件描述符和文件表"><a href="#文件-文件描述符和文件表" class="headerlink" title="文件, 文件描述符和文件表"></a>文件, 文件描述符和文件表</h3><p>&emsp;Linux内核将一切视为文件, Linux上的文件既可以是事实上的真正的物理文件, 也可以设备, 管道, 甚至还可以是一块内存. 狭义的文件是指文件系统中的物理文件, 而广义的文件则是Linux管理的所有对象. 这些广义的文件利用VFS机制, 以文件系统的形式挂载在Linux内核中, 对外提供一致的文件操作接口.</p><p>&emsp;从数值上看, 文件描述符就是一个非负的整数, 其本质上就是一个句柄, 所以也可以认为文件描述符就是一个文件的句柄. 那么, 什么是句柄呢? 一切对于用户透明的返回值, 即可以视为是句柄. 用户空间利用文件描述符与内核进行交互, 而内核拿到文件描述符之后, 可以通过它得到用于管理文件的真正的数据结构.</p><p><strong>&emsp;使用文件描述符也就是句柄</strong>, 有两个好处: 一是增加了安全性, 句柄类型对于用户完全透明, 用户无法通过任何hacking的方式, 缸盖句柄对应的内部结果, 比如Linux内核的文件描述符, 只有内核才能通过该值得到对应的文件结构; 二是增加可可扩展性, 用户的代码只依赖与句柄的值, 这样实际结构的类型就可以随时发生变化, 与句柄的映射关系也可以随时发生改变, 这些变化都不会影响任何现有的用过户代码. </p><p>&emsp;Linux的每个进程都会维护一个文件表, 以便维护该进程打开文件的信息, 包括打开的文件个数, 每个打开文件的偏移量等信息. </p><h3 id="内核文件表的实现"><a href="#内核文件表的实现" class="headerlink" title="内核文件表的实现"></a>内核文件表的实现</h3><p>内核中进程对应的结构是task_struct, 进程的文件表保存在task_struct -&gt; files中</p><p>files_struct是如何使用默认的fdtab和fd_array的, init是Linux的第一个进程, 它的文件表是一个全局变量, 代码如下: </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">struct  files_struct  init_files  =  &#123;</span><br><span class="line">.count=  ATOMIC_INIT(1),</span><br><span class="line">.fdt=  &amp;init_files.fdtab,</span><br><span class="line">.fdtab=  &#123;</span><br><span class="line">.max_fds=  NR_OPEN_DEFAULT,</span><br><span class="line">.fd=  &amp;init_files.fd_array[0],</span><br><span class="line"></span><br><span class="line">.close_on_exec    =  (fd_set  *)&amp;init_files.close_on_exec_init,</span><br><span class="line">.open_fds=  (fd_set  *)&amp;init_files.open_fds_init,</span><br><span class="line">&#125;,</span><br><span class="line">.file_lock    =      SPIN_LOCK_UNLOCKED(init_task.file_lock),</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 读书笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdown使用-公式符号</title>
      <link href="/2010/12/12/Markdown%E4%BD%BF%E7%94%A8-%E5%85%AC%E5%BC%8F%E7%AC%A6%E5%8F%B7/"/>
      <url>/2010/12/12/Markdown%E4%BD%BF%E7%94%A8-%E5%85%AC%E5%BC%8F%E7%AC%A6%E5%8F%B7/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> 文档编辑 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Interview-FLink</title>
      <link href="/2010/12/12/Interview-Leetcode/"/>
      <url>/2010/12/12/Interview-Leetcode/</url>
      
        <content type="html"><![CDATA[<h2 id="快排"><a href="#快排" class="headerlink" title="快排"></a>快排</h2><h2 id="归并"><a href="#归并" class="headerlink" title="归并"></a>归并</h2>]]></content>
      
      
      <categories>
          
          <category> Interview </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Flink </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Interview-Zookeeper</title>
      <link href="/2010/12/12/Interview-Zookeeper/"/>
      <url>/2010/12/12/Interview-Zookeeper/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="6888aace34deef44e292d961b152507b7b82cc6d5d852c6736498465ead1bc1e">d3e6c873a0c2a163e561e7b8a7ba8ea9daf22ff94a96d44f65b7db52ff35e6a7d3f6ce60753b1d58923e180f01eece0674729660f3067740dc415dc19a29209bfba154504cb6ad153895d27c2355005a346bc0624ede0a408bbe6a30d3a6d7156b2249839cebb6bdfea3a37e51c73da783bd9d368b00749fe80ddaccc1310e520dde4367dab428929a47aeb4508df2f06ad04b716a0fba4c235dbc783f0faf90f4027e4a8b817e77b7ad31da6db0610e0c1a0320dfbcddf7a350e23da32a927f61a23680f2b4c5dbfe7948bf3a4f16dc8ca49582585c53679e4e0a30ca5383389ccd43eeb464dbcd1908d5dad50aab246a29e4aee27b1bdae70d7ea1ba898159c1204b99993b0d3ff87c53f3ba03119b0c9c038248f93e10fa29cbee9820775900b3d7b30648d1b167dee99aa4763c5bfa02931263f54246c17fad6db4f4b4ca4c0015650ce69f757b4620422b71c1db5775313ff544341175ed35051c8813ea9acdb1c0b39e1c8fcb4f06c2af542a512de922e7290825f11ce1f65d1a9a5c75eda3b3fa33a54645bf8c47b7700a2682914e065488927f6de48761dc626e4068313a46693a772036b199813383a0a5c7ababaffdcae778c76f3e881c8ef79c6a17289f62fefbf2fa9274b3b3a79fe276b54c257d0edf7c7325b7706940ad1be9d962787b645498c8861e2589c338e0a62a47fe3da881bee14358599dda7547f641088d1c04af791a4a6dcdb1a38bad673752f9de1d58b8f2288ccd1d21a4090aeafc300ac43b4dbd21c5209817b0c9f718cf27e8a9a7ce708a0989af695bd70c3f95683d7df4edca4bc7ef1a52051ff374942e5889bf36dc73a9b0364f932fdd</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-xray">      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">您好, 这里需要密码.</span>      </label>      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>      </svg>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> Interview </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Zookeeper </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Netty, Redis, Zookeeper高并发实战(阅读中)</title>
      <link href="/2010/12/12/Netty,%20Redis,%20Zookeeper%E9%AB%98%E5%B9%B6%E5%8F%91%E5%AE%9E%E6%88%98,%20/"/>
      <url>/2010/12/12/Netty,%20Redis,%20Zookeeper%E9%AB%98%E5%B9%B6%E5%8F%91%E5%AE%9E%E6%88%98,%20/</url>
      
        <content type="html"><![CDATA[<h1 id="高并发时代的必备技能"><a href="#高并发时代的必备技能" class="headerlink" title="高并发时代的必备技能"></a>高并发时代的必备技能</h1><p>&emsp;&emsp;高并发时代已然到来, Netty, Redis, Zookeeper是高并发时代的必备工具.</p><h2 id="Netty为何这么火"><a href="#Netty为何这么火" class="headerlink" title="Netty为何这么火"></a>Netty为何这么火</h2><p>&emsp;&emsp;Netty是JBOOS提供的一个Java开源框架, 是基于NIO的客户端, 服务器编程框架, 它既能快速开发高并发, 高可用 , 高可靠性的网络服务器程序, 也能开发高可用, 高可靠的客户端. </p><blockquote><p>NIO是指非阻塞输入输出(Non-Blocking IO), 也称非阻塞IO.</p></blockquote><h2 id="高并发利器Redis-空"><a href="#高并发利器Redis-空" class="headerlink" title="高并发利器Redis(空)"></a>高并发利器Redis(空)</h2><h2 id="分布式利器Zookeeper-空"><a href="#分布式利器Zookeeper-空" class="headerlink" title="分布式利器Zookeeper(空)"></a>分布式利器Zookeeper(空)</h2><h2 id="高并发IM的综合实践-空"><a href="#高并发IM的综合实践-空" class="headerlink" title="高并发IM的综合实践(空)"></a>高并发IM的综合实践(空)</h2><h2 id="Netty-Redis-Zookeeper实践计划-空"><a href="#Netty-Redis-Zookeeper实践计划-空" class="headerlink" title="Netty, Redis, Zookeeper实践计划(空)"></a>Netty, Redis, Zookeeper实践计划(空)</h2><h2 id="本章小结-空"><a href="#本章小结-空" class="headerlink" title="本章小结(空)"></a>本章小结(空)</h2><h1 id="高并发IO的底层原理"><a href="#高并发IO的底层原理" class="headerlink" title="高并发IO的底层原理"></a>高并发IO的底层原理</h1><h2 id="IO读写的基本原理"><a href="#IO读写的基本原理" class="headerlink" title="IO读写的基本原理"></a>IO读写的基本原理</h2><p>&emsp;大家知道, 用户程序在进行IO读写的时候, 依赖于底层的IO读写, 基本上会用到底的read&amp;write两大系统调用. 在不同的操作系统中, IO读写的系统调用的名称可能不完全一样, 但是基本功能是一样的.</p><p>&emsp;这里设计一个基础只是: read系统调用, 并不是直接从物理设备把数据读取到内存中; write系统调用, 也不是直接把数据写入到物理设备中. 上层应用无论是调用操作系统的read, 还是调用操作系统的write, 都会涉及缓冲区. <strong>具体来说, 调用操作系统的read, 是把数据从内核缓冲区复制到进程缓冲区; 而write系统调用, 是把数据从进程缓冲区复制到内存缓冲区.</strong></p><p>&emsp;也就是说, <strong>上层程序的IO操作, 实际上不是物理设备级别的读写, 而是缓存的复制.</strong> read&amp;write两大系统的调用, 都不负责数据在内核缓冲区和物理设备(如磁盘)之间的交换, 这项底层的读写交换, 是由操作系统内核(Kernel)来完成的. </p><p>&emsp;在用户程序中, 无论是Socket的IO, 还是文件的IO操作, 都属于上层应用的开发, 它们的输入(Input)和输出(Output)的处理, 在编程的流程上, 多是一致的.</p><h3 id="内核缓冲区与进程缓冲区"><a href="#内核缓冲区与进程缓冲区" class="headerlink" title="内核缓冲区与进程缓冲区"></a>内核缓冲区与进程缓冲区</h3><p>&emsp;为什么设置那么多的缓冲区, 为什么要那么麻烦呢? 缓冲区的目的是为了减少频繁地与设备之间的物理交换. 大家都知道, 外部设备的直接读写, 涉及操作系统的中断. <strong>发生系统中断时, 需要保存之前的进程数据和状态等信息, 而结束中断之后, 还需要恢复之前的进程数据和状态等信息, 为了减少这种底层系统的时间损耗, 性能损耗, 于是出现了缓冲区.</strong> </p><p>&emsp;有了内存缓冲区, 上层应用使用read系统调用的时候, 仅仅是把数据从内核缓冲区复制到上层应用的缓冲区(进程缓冲区) ;上层应用使用write系统调用时, 仅仅把数据从进程缓冲区复制到内核缓冲区中. 底层操作会对内核缓冲区进行监控, 等待缓冲区达到一定数量的时候, 再进行IO设备的中断处理, 集中执行物理设备的实际IO操作, 这种机制提升了系统的性能. 至于什么时候中断(读中断, 写中断), 由操作系统的内核来决定, 用户程序则不需要关心</p><p>&emsp;从数量上来说, **在Linux系统中, 操作系统内核只有一个内核缓冲区. 而每个用户程序(进程), 有自己独立的缓冲区, 叫做进程缓冲区. **所以, 用户程序的IO读写程序, 在大多数情况下, 并没有进行实际的IO操作, 而是在进程缓冲区和内核缓冲器之间进行数据的交换.</p><h3 id="详解典型的系统调用流程"><a href="#详解典型的系统调用流程" class="headerlink" title="详解典型的系统调用流程"></a>详解典型的系统调用流程</h3><p>&emsp;前面讲到, 用户程序所使用的系统调用read&amp;write, 它们不等价于数据在内核缓冲区和磁盘时间的交换. read把数据从内核缓冲区复制到进程缓冲区, write把数据从进程缓冲区复制到内核缓冲区, 具体执行流程如下图所示</p><p><img src="https://cdn.jsdelivr.net/gh/quietCC/imageBed/img/image-20211203145059416.png"></p><p>(空)</p><h2 id="四种主要的IO模型"><a href="#四种主要的IO模型" class="headerlink" title="四种主要的IO模型"></a>四种主要的IO模型</h2><p>&emsp; 服务器编程, 经常需要构造高性能的网络服务器, 需要寻用高性能的IO模型, 这也是通关大公司面试必备的知识</p><p>&emsp;本章从最为基础的模型开始吗, 为大家揭秘IO模型, 常见的IO模型有四种: </p><ul><li><p>同步阻塞IO(Blocking IO)</p><p>&emsp;首先, 解释一下这里的阻塞与非阻塞</p><p><strong>&emsp;阻塞IO, 指的是需要内核IO操作彻底完成之后, 才返回到用户空间执行用户的操作</strong>. 阻塞指的是用户空间程序的执行状态. 传统的IO模型都是同步阻塞. 在Java中, 默认创建的socket都是阻塞的.</p><p>&emsp;解释一下同步与异步:</p><p><strong>&emsp;同步IO, 是一种用户空间与内核空间的IO发起方式. 同步IO是指有用户空间的线程时主动发起IO请求的一方, 内核空间是被动接收方. 异步IO则反过来, 是指系统内核时主动发起请求的一方, 用户空间的线程时被动接收方.</strong></p></li><li><p>同步非阻塞IO(Non-blocking IO)</p><p><strong>&emsp;非阻塞IO, 指的是用户空间的程序不需要等待内核IO操作彻底完成, 可以立即返回用户空间执行用户的操作, 也就是处于非阻塞状态, 与此同时内核会立即返回给用户一个状态值.</strong> </p><p><strong>&emsp;简单来说, 阻塞是指用户空间(调用线程)一直等待, 而不能干别的事情; 非阻塞是指用户空间(调用线程)拿到内核返回的状态值就返回自己的空间, IO操作可以干就干, 不可以干, 就去干别的事情</strong></p><p>&emsp;非阻塞IO要求socket被视之为NONBLOCK</p><p>&emsp;强调一下, 这里说的NIO指的是同步非阻塞IO, 并不是Java的NIO, Java的NIO指的时New IO</p></li><li><p>IO多路复用 (IO Multiplexing)</p><p>&emsp;即经典的Reactor反应器设计模式, 有的时候也被称为异步IO, Java中的Selector选择器和Linux中的epoll都是这种设计模式</p></li><li><p>异步IO (Asynchronous IO)</p><p>&emsp;异步IO, 指的是用户空间与内核空间的调用方式反过来. 用户空间的线程变成了被动接受者, 而内核空间成为了主动调用者. 这有点类似与Java中比较典型的回调模式, 用户空间的向内核空间注册了各种IO时间的回调函数, 由内核去主动调用</p><blockquote><p>回调函数就是一个通过函数指针调用的函数。如果你把函数的指针（地址）作为参数传递给另一个函数，当这个指针被用来调用其所指向的函数时，我们就说这是回调函数。回调函数不是由该函数的实现方直接调用，而是在特定的事件或条件发生时由另外的一方调用的，用于对该事件或条件进行响应。</p></blockquote></li></ul><h3 id="同步阻塞IO-Blocking-IO"><a href="#同步阻塞IO-Blocking-IO" class="headerlink" title="同步阻塞IO (Blocking IO)"></a>同步阻塞IO (Blocking IO)</h3><p>​    在Java应用程序进程中, 默认情况下, 所有的socket连接的的IO操作都是同步阻塞IO(Blocking IO)</p><p>&emsp;在阻塞式IO模型中, Java程序从IO系统调用开始, 直到系统调用返回, 在这段时间内, Java进程是阻塞的, 返回成功结果之后, 应用程序开始处理用户空间的缓存区数据</p><p>&emsp;同步阻塞IO的具体流程, 如图所示:</p><p><img src="https://cdn.jsdelivr.net/gh/quietCC/imageBed/img/image-20211210135759780.png"></p><p>&emsp;举个例子, 在Java中发起一个socket的read读操作的系统调用, 流程大致如下:</p><ul><li>从Java启动IO读的read系统调用开始, 用户线程就进入阻塞状态</li><li>当系统内核收到read系统调用, 就开始准备数据, 一开始, 数据可能还没有到达内核的缓冲区(比如, 还没有收到一个完整的socket包), 这个时候内核就需要等待</li><li>内核一直到等待知道完整的数据到达, 就会将</li></ul>]]></content>
      
      
      <categories>
          
          <category> 读书笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Zookeeper </tag>
            
            <tag> Netty </tag>
            
            <tag> Redis </tag>
            
            <tag> 同步 </tag>
            
            <tag> 异步 </tag>
            
            <tag> 阻塞 </tag>
            
            <tag> 非阻塞 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Lombok</title>
      <link href="/2010/12/12/StringUtils/"/>
      <url>/2010/12/12/StringUtils/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> 环境搭建 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hadoop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redis</title>
      <link href="/2010/12/12/Redis/"/>
      <url>/2010/12/12/Redis/</url>
      
        <content type="html"><![CDATA[<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><ul><li>redis是一个开源的key-value存储系统</li><li>和memcached一样的, 为了保证数据的效率, 所以数据保存在内存中</li><li>和memcached类似, 它支持的存储的value类型更加的多, 包括string, list, set, zset</li></ul>]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redis知识点</title>
      <link href="/2010/12/12/Redis%E7%9F%A5%E8%AF%86%E7%82%B9/"/>
      <url>/2010/12/12/Redis%E7%9F%A5%E8%AF%86%E7%82%B9/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <script id="hbeData" type="hbeData" data-hmacdigest="5d6b866930faf044c2779af3752d14ff16c8aeeeb6a2c8aadfaa5755ecb03730">4630436162ade97ba2718b7d0c4b3b63b82145efa12db6f9895ffd0d68bba8e3cf73871a2c8024b554d393252d376a66</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-xray">      <input class="hbe hbe-input-field hbe-input-field-xray" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-xray" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-xray">您好, 这里需要密码.</span>      </label>      <svg class="hbe hbe-graphic hbe-graphic-xray" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>        <path d="M0,2.5c0,0,298.666,0,399.333,0C448.336,2.5,513.994,13,597,13c77.327,0,135-10.5,200.999-10.5c95.996,0,402.001,0,402.001,0"></path>      </svg>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> 面试相关 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 面试 </tag>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>广告数仓</title>
      <link href="/2010/12/12/%E5%B9%BF%E5%91%8A%E6%95%B0%E4%BB%93/"/>
      <url>/2010/12/12/%E5%B9%BF%E5%91%8A%E6%95%B0%E4%BB%93/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ClickHouse </tag>
            
            <tag> Hadoop </tag>
            
            <tag> Hive </tag>
            
            <tag> Spark </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>术语</title>
      <link href="/2010/12/12/%E4%B8%93%E4%B8%9A%E5%90%8D%E8%AF%8D/"/>
      <url>/2010/12/12/%E4%B8%93%E4%B8%9A%E5%90%8D%E8%AF%8D/</url>
      
        <content type="html"><![CDATA[<h2 id="VFS"><a href="#VFS" class="headerlink" title="VFS"></a>VFS</h2><p>VFS（virtual File System）的作用就是采用标准的Unix系统调用读写位于不同物理介质上的不同文件系统,即为各类文件系统提供了一个统一的操作界面和应用编程接口。VFS是一个可以让open()、read()、write()等系统调用不用关心底层的存储介质和文件系统类型就可以工作的粘合层。<a href="https://baike.baidu.com/item/VFS/7519887?fr=aladdin">百度百科</a></p><h2 id="句柄"><a href="#句柄" class="headerlink" title="句柄"></a>句柄</h2><p>句柄（Handle）是一个是用来标识对象或者项目的标识符，可以用来描述窗体、文件等，值得注意的是句柄不能是常量 。</p><p>Windows之所以要设立句柄，根本上源于内存管理机制的问题，即虚拟地址。简而言之数据的地址需要变动，变动以后就需要有人来记录、管理变动，因此系统用句柄来记载数据地址的变更。在程序设计中，句柄是一种特殊的智能指针，当一个应用程序要引用其他系统（如数据库、操作系统）所管理的内存块或对象时，就要使用句柄 。</p><p><a href="https://baike.baidu.com/item/%E5%8F%A5%E6%9F%84">百度百科</a></p>]]></content>
      
      
      <categories>
          
          <category> 读书笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hadoop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Azkaban</title>
      <link href="/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Azkaban/"/>
      <url>/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Azkaban/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Azkaban </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DataX</title>
      <link href="/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-DataX/"/>
      <url>/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-DataX/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DataX </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ElasticSearch</title>
      <link href="/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-ElasticSearch/"/>
      <url>/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-ElasticSearch/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ElasticSearch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HBase</title>
      <link href="/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-HBase/"/>
      <url>/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-HBase/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HBase </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HDFS</title>
      <link href="/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-HDFS/"/>
      <url>/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-HDFS/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HDFS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Git</title>
      <link href="/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Git/"/>
      <url>/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Git/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hive</title>
      <link href="/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Hive/"/>
      <url>/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Hive/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hive </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IDEA配置信息</title>
      <link href="/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-IDEA-%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF/"/>
      <url>/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-IDEA-%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF/</url>
      
        <content type="html"><![CDATA[<h2 id="自定义模板"><a href="#自定义模板" class="headerlink" title="自定义模板"></a>自定义模板</h2>]]></content>
      
      
      <categories>
          
          <category> 工具 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Hudi</title>
      <link href="/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Hudi/"/>
      <url>/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Hudi/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hudi </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kafka</title>
      <link href="/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Kafka/"/>
      <url>/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Kafka/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Kafka </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Doris</title>
      <link href="/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Doris/"/>
      <url>/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Doris/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Doris </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kibana</title>
      <link href="/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Kibana/"/>
      <url>/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Kibana/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Kibana </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Kylin</title>
      <link href="/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Kylin/"/>
      <url>/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Kylin/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Kylin </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux</title>
      <link href="/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Linux/"/>
      <url>/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Linux/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Lombok</title>
      <link href="/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Lombok/"/>
      <url>/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Lombok/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> 常用类库 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Logstash</title>
      <link href="/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Logstash/"/>
      <url>/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Logstash/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Logstash </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Maven</title>
      <link href="/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Maven/"/>
      <url>/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Maven/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>模板</title>
      <link href="/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Redis/"/>
      <url>/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Redis/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>模板</title>
      <link href="/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Presto/"/>
      <url>/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Presto/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>模板</title>
      <link href="/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Shell/"/>
      <url>/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Shell/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>模板</title>
      <link href="/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Scala/"/>
      <url>/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Scala/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>模板</title>
      <link href="/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Sqoop/"/>
      <url>/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Sqoop/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>模板</title>
      <link href="/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Yarn/"/>
      <url>/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Yarn/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>模板</title>
      <link href="/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Spark/"/>
      <url>/2010/12/12/%E5%BE%85%E8%A1%A5%E5%85%85-Spark/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Nginx&amp;Tengine</title>
      <link href="/2010/12/12/%E8%BF%9B%E8%A1%8C%E4%B8%AD-Nginx&amp;Tengine/"/>
      <url>/2010/12/12/%E8%BF%9B%E8%A1%8C%E4%B8%AD-Nginx&amp;Tengine/</url>
      
        <content type="html"><![CDATA[<p><strong>参考引用文章</strong></p><ul><li>深入理解Nginx模块开发与架构解析第2版</li></ul><h1 id="Nginx是什么"><a href="#Nginx是什么" class="headerlink" title="Nginx是什么"></a>Nginx是什么</h1><p>​    Nginx是一个阔平台的web服务器, 可以运行在Linux, FreeBSD, Solaris, AIZ, MacOS, Windows等操作系统上, 并且它还可以使用当前操作系统特有的一些高效api来提高自己的性能.</p><h1 id="Nginx配置"><a href="#Nginx配置" class="headerlink" title="Nginx配置"></a>Nginx配置</h1><h2 id="Nginx进程之间的关系"><a href="#Nginx进程之间的关系" class="headerlink" title="Nginx进程之间的关系"></a>Nginx进程之间的关系</h2><p>在正式提供服务的产品环境下, 部署Nginx时都是使用一个master进程来管理多个worker进行, 一般情况下, worker进行的数量与服务器上cpu核心数量是相等的. 每一个worker进程都是繁忙的, 是真正地为互联网服务的, master是比较”清闲的”, 只负责监控管理worker进行, worker进程之间通过共享内存, 原子操作等一些进程通信机制来实现负载均衡等功能</p><h2 id="Nginx服务的基本配置-待补充"><a href="#Nginx服务的基本配置-待补充" class="headerlink" title="Nginx服务的基本配置(待补充)"></a>Nginx服务的基本配置(待补充)</h2><p>Nginx的配置文件其实就是一个普通的文本文件</p><h2 id="用HTTP核心模块配置一个静态web服务器-待补充"><a href="#用HTTP核心模块配置一个静态web服务器-待补充" class="headerlink" title="用HTTP核心模块配置一个静态web服务器(待补充)"></a>用HTTP核心模块配置一个静态web服务器(待补充)</h2><h2 id="用Http-proxy-module配置一个反向代理服务器"><a href="#用Http-proxy-module配置一个反向代理服务器" class="headerlink" title="用Http proxy module配置一个反向代理服务器"></a>用Http proxy module配置一个反向代理服务器</h2><p>​    反向代理， 是指用代理服务器来接受Internet上的连接请求， 然后将请求转发给内部网络中的上游服务器， 并将从上游服务器上得到的结果返回给Internet上请求连接的客户端， 此时代理服务器对外的表现就是一个web服务器， 充当反向代理服务器也是Nginx的一种常见的方法</p><p>​    由于Nginx具有“强悍的”的高并发和高负载能力， 因此一般会作为前端的服务器直接向客户端提供静态文件服务。</p><p>​    但是也有一些复杂， 多变的业务不适合放到Nginx服务器上, 这时会使用Apache, Tomcat等服务器来进行处理. 于是Nginx通常会被配置为既是静态web服务器, 也是反向代理服务器, 不适合Nginx处理的请求就会直接转发到上游服务器中进行处理.</p><p><img src="https://cdn.jsdelivr.net/gh/quietCC/imageBed/img/Snipaste_2021-11-23_16-48-15.jpg"></p><p>​    与Squid等反向代理服务器相比, Nginx的反向代理服务器有着自己的特点</p><p><img src="https://cdn.jsdelivr.net/gh/quietCC/imageBed/img/Snipaste_2021-11-23_16-50-07.jpg"></p><p>​    当客户端发来HTTP请求的时候, Nginx并不会立刻转发到上游服务器中, 而是先将用户的请求, 包括HTTP包体完整地接收到Nginx所在服务器的硬盘或者内存中, 然后再向上游服务器发起连接, 将缓存的客户端请求转发到上游服务器中, 而Squid等代理服务器则采用一边接受客户端请求, 一边转发到上游服务器的方式.</p><p>​    这种方式的缺点是延长了一个请求的处理事件, 并且增加了用户缓存请求内容的内存和磁盘的空间, 而有点事降低了上游服务器的负载, 尽量将压力放在Nginx服务器上.</p><p>​    Nginx的这种工作方式为什么会降低上游服务器的负载呢? 通常, 客户端与代理服务器之间的网络环境会比较复杂, 多半是”走”公网, 网速平均下来可能会比较慢, 一次一个请求可能要持续很久才能完成. 而代理服务器与上游服务器之间一般是”走”内网, 或者专有连接, 传输速度快. Squid等反向代理服务器</p>]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 负载均衡 </tag>
            
            <tag> 反向代理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>正则表达式</title>
      <link href="/2010/12/12/%E8%BF%9B%E8%A1%8C%E4%B8%AD-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
      <url>/2010/12/12/%E8%BF%9B%E8%A1%8C%E4%B8%AD-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/</url>
      
        <content type="html"><![CDATA[<p><strong>参考引用链接</strong></p><ul><li>正则表达式必知必会（人民邮电出版社）</li><li><a href="https://github.com/quietCC/learn-regex/blob/master/translations/README-cn.md#learn-regex">The Easy Way Learn Regex</a></li></ul><h1 id="正则入门"><a href="#正则入门" class="headerlink" title="正则入门"></a>正则入门</h1><h2 id="用途"><a href="#用途" class="headerlink" title="用途"></a>用途</h2><p>正则表达式（regular expression， 简称regex）是一种工具， 由文本和特殊指令构成的高度简练的字符串实现匹配。</p><blockquote><p>正则表达式起源于1950年代在数学领域的一些研究用作， 几年后， 计算机领域借鉴那些研究工作的成果和思路开发出了Unix世界里面的Perl语言和grep等工具程序。 在许多年里， 正则表达式只流行于Unix平台， 但是这种情况早已发生变化， 现在几乎所有的计算机平台都支持正则表达式。 只是具体的方式和支持的成都由略微的差异。</p></blockquote><h1 id="基本匹配"><a href="#基本匹配" class="headerlink" title="基本匹配"></a>基本匹配</h1><p>正则表达式其实就是在执行搜索时的格式， 它是由一些字母和数字组合而成的。例如：一个正则表达式<code>the</code>, 它表示一个规则： 由字母<code>t</code>开始，之后是<code>h</code>, 最后是<code>e</code>。</p><table><thead><tr><th>“the” =&gt; The fat cat sat on <a href="">the</a> mat</th></tr></thead></table><p>正则表达式123匹配123， 它逐个字符的与输入的正则表达式作比较， 正则表达式是大小写敏感的， 所以<code>The</code>是不会匹配<code>the</code>的。</p><table><thead><tr><th>“The” =&gt; <a href="">The </a>fat cat sat on the mat</th></tr></thead></table><h1 id="元字符"><a href="#元字符" class="headerlink" title="元字符"></a>元字符</h1><p>正则表达式主要依赖于元字符。 元字符不代表他们本身的字面意思， 他们都有特殊的含义。 一些元字符在方括号中的时候有一些特殊的意思。</p><table><thead><tr><th>元字符</th><th>描述</th></tr></thead><tbody><tr><td>,</td><td>句号匹配任意单个字符除了换行符</td></tr><tr><td>[]</td><td>字符种类。 匹配方括号内的任意字符</td></tr><tr><td>[^ ]</td><td>否定的字符种类。 匹配除了方括号里的任意字符</td></tr><tr><td>*</td><td>匹配&gt;=0个重复的在*号之前的字符</td></tr><tr><td>+</td><td>匹配&gt;=1个重复的在+之前的字符</td></tr><tr><td>？</td><td>标记？之前的字符为可选</td></tr><tr><td>{n,m}</td><td>匹配num个大括号之前的字符或者字符集</td></tr><tr><td>(xyz)</td><td>字符集， 匹配与xyz完全相等的字符串</td></tr><tr><td>|</td><td>或运算符， 匹配符号之前或者符号之后的字符</td></tr><tr><td>\</td><td>转义字符，用于匹配一些保留字符 <code>[ ] ( ) &#123; &#125; . * + ? ^ $ \ </code></td></tr><tr><td>^</td><td>从开始行开始匹配</td></tr><tr><td>￥</td><td>从末端开始匹配</td></tr></tbody></table><h2 id="点运算符"><a href="#点运算符" class="headerlink" title="点运算符 ."></a>点运算符 .</h2><p><code>.</code>是元字符中最简单的例子, <code>.</code>匹配任意<strong>单字符</strong>， 但是不匹配换行符，例如, 表达式<code>.ar</code>匹配一个任意字符后面跟着是<code>a</code>和<code>r</code>的字符串</p><table><thead><tr><th>“.ar” =&gt; The <a href="">car</a> <a href="">par</a>ked in the <a href="">gar</a>age</th></tr></thead></table><h2 id="字符集"><a href="#字符集" class="headerlink" title="字符集"></a>字符集</h2><p>字符集也叫做字符类, 方括号用来指定一个字符集. 在方括号中使用连字符执行字符集的范围. 在方括号中的字符集不关心顺序, 例如<code>[Tt]he</code>匹配<code>the</code>和<code>The</code></p><table><thead><tr><th>“[Tt]he” =&gt; <a href="">The</a> car parked in <a href="">the</a> garage.</th></tr></thead></table><p>方括号的句号就是句号, 表达式<code>ar[.]</code>匹配<code>ar.</code></p><table><thead><tr><th>“ar[.]” =&gt; A garage is a good place to park a c<a href="">ar.</a></th></tr></thead></table><h2 id="否定字符集"><a href="#否定字符集" class="headerlink" title="否定字符集"></a>否定字符集</h2><p>一般来说<code>^</code>表示一个字符串的开头, 但是在一个方括号的开头中, 表示这个字符集是否定的. 例如表达式<code>[^c]ar</code>匹配一个后面跟着<code>ar</code>的除了<code>c</code>的任意字符</p><table><thead><tr><th>“[^c]ar” =&gt; The car <a href="">par</a>ked in the <a href="">gar</a>age.</th></tr></thead></table><h2 id="重复次数"><a href="#重复次数" class="headerlink" title="重复次数"></a>重复次数</h2><p>后面跟着元字符<code>+</code>,<code>*</code>或者<code>?</code>的, 用来指定匹配子模式的次数, 这些元字符在不同的情况下有着不同的意思</p><h3 id="号"><a href="#号" class="headerlink" title="*号"></a><code>*</code>号</h3><p><code>*</code>号匹配在<code>*</code>之前的字符出现<strong>大于等于0次</strong>, 例如, 表达式<code>a*</code>匹配0或者跟多个以a开头的字符. 表达式<code>[a-z*]</code>匹配一个行中所有以小写字母开头的字符串</p><table><thead><tr><th>“[a-z]*” =&gt; T<a href="">he car parked in the garage</a> #21.</th></tr></thead></table><p><code>*</code>和<code>.</code>字符搭配可以匹配所有的字符<code>.*</code>, <code>*</code>和表示匹配空格的符号<code>\s</code>连起来用</p>]]></content>
      
      
      <categories>
          
          <category> 大数据 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Interval-Hive</title>
      <link href="/2010/12/12/%E6%A8%A1%E6%9D%BF/"/>
      <url>/2010/12/12/%E6%A8%A1%E6%9D%BF/</url>
      
        <content type="html"><![CDATA[<div class="hide-toggle" style="border: 1px solid #FF7242"><div class="hide-button toggle-title" style="background-color: #FF7242;color: #fff"><i class="fas fa-caret-right fa-fw"></i><span><b>查看答案</b></span></div>    <div class="hide-content"></div></div><h1 id="组成"><a href="#组成" class="headerlink" title="组成"></a>组成</h1><div class="hide-toggle" style="border: 1px solid #FF7242"><div class="hide-button toggle-title" style="background-color: #FF7242;color: #fff"><i class="fas fa-caret-right fa-fw"></i><span><b>查看答案</b></span></div>    <div class="hide-content"></div></div><p>#与mysql的区别</p><p>#内部表和外部表的区别</p>]]></content>
      
      
      <categories>
          
          <category> Interval </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Interval </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
